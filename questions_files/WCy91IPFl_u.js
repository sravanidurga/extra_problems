/*!CK:2231465935!*//*1449269178,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["I0T2G"]); }

__d("AdminSignatureConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SETTING_ATTACH_TO_POST:"shouldAttachToPost",SETTING_ATTACH_TO_COMMENT:"shouldAttachToComment",SETTING_ATTACH_TO_MESSAGE:"shouldAttachToMessage",SETTING_EVER_PROMPTED:"everPromptedUser",SETTING_SIGNATURE_TEXT:"signature",FIELD_PAGE_ID:"pageID",FIELD_SIGNATURE_OPTION_FIELD:"signatureOption",FIELD_SIGNATURE_OPTION_VALUE_FIELD:"signatureOptionValue",FIELD_SIGNATURE_TEXT_FIELD:"signatureText",EVENT_ADMIN_SIGNATURE_PROMPTED:"AdminSignature\/prompted",EVENT_ADMIN_SIGNATURE_SETTING_CHANGED:"AdminSignatureSetting\/changed"};},null);
__d("ComposerEntryPointRef",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FEED:"feed",SPROUTS:"sprouts",TIMELINE:"timeline",NATIVE_PERMALINK:"native_permalink",EVENT:"event",EVENT_ALL_MEDIA:"event_all_media",EVENT_PHOTOS:"event_photos",EVENT_VIDEOS:"event_videos",GROUP:"group",NATIVE_PAGE:"native_page",PAGES_MANAGER:"pages_manager",FINCH_PAGE_CHECKIN:"finch_page_checkin",PLACES_NEARBY_FRIENDS:"places_nearby_friends",PLACES_SEARCH_FAILURE:"places_search_failure",FEED_STORY:"feed_story",PHOTOS_DASHBOARD:"photos_dashboard",PHOTOS_TAB_TIMELINE:"photos_tab_timeline",ADD_PHOTO_IN_TIMELINE_TAB:"add_photo_in_timeline_tab",ADD_PHOTO_IN_ALBUM:"add_photo_in_album",ADD_PHOTO_IN_PHOTOS_SECTION:"add_photo_in_photos_section",PHOTOS_ALBUM:"photos_album",PHOTOS_ALBUM_LISTING:"photos_album_listing",CREATE_COUPON_DIALOG:"create_coupon_dialog",SOCIAL_PLUGIN:"social_plugin",SHARE_BUTTON_PLUGIN:"share_button",PAGE_PLUGIN:"page",ADS_CREATE:"ads_create",ADS_POWER_EDITOR:"ads_power_editor",TOPIC_HASHTAG_FEED:"topic_hashtag_feed",PERMALINK:"permalink",EDIT_DIALOG:"edit_dialog",PAGES_FEED:"pages_feed",PAGES_PHOTO_TAB:"pages_photo_tab",PAGES_VIDEO_TAB:"pages_video_tab",PAGES_VIDEO_TAB_HUB:"pages_video_tab_hub",AGGREGATED_LINK_STORY:"aggregated_link_story",FEED_STICKY_COMPOSER:"feed_sticky_composer",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",WIFI_CHECKIN:"wifi_checkin",HOVERCARD_CONICS:"hovercard_conics",AGGREGATED_STORY:"aggregated_story",WORLD_CUP:"world_cup",YEAR_IN_REVIEW:"year_in_review",ORIGIN_STORY:"origin_story",CELEBRATE_FRIENDS:"celebrate_friends",MEGAPHONE:"megaphone",MOMENTS:"moments",LIVE:"live",TOPIC_STORY_ACTION_LINK:"topic_story_action_link",OTHER:"other",TRENDING_TOPIC:"trending_topic",UC_TOOLBAR:"uc_toolbar",PAGE_CONTENT_TAB_DRAFTS:"page_content_tab_drafts",PAGE_LAUNCH_POINT:"page_launch_point",PAGE_CONTENT_TAB_PUBLISHED_POSTS:"page_content_tab_published_posts",PAGE_CONTENT_TAB_SCHEDULED_POSTS:"page_content_tab_scheduled_posts",PAGE_CONTENT_TAB_ADS_POSTS:"page_content_tab_ads_posts",PAGE_CONTNET_TAB_JOB_POSTS:"page_contet_tab_job_posts",PAGE_CONTENT_TAB_VIDEO_LIBRARY:"page_content_tab_video_library",PAGE_CONTENT_TAB_CANVAS:"page_content_tab_canvas",PAGE_CONTENT_TAB_REFERENCE_LIBRARY:"page_content_tab_reference_library",REVIEW_UNIT:"review_unit",REVIEWS_LIST:"reviews_list",BULK_UPLOAD:"bulk_upload",SAHELI:"saheli",GAMEFACE:"gameface",GAMETIME:"gametime",ANNIVERSARY_VIDEO:"anniversary_video",FRIENDS_DAY:"friends_day_2016",FEEDX:"feedx",LEGACY_FEED:"legacy_feed",REACTION:"reaction",FLASHBACK:"flashback"};},null);
__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null);
__d("ReactComposerAttachmentType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STATUS:"STATUS",MEDIA:"MEDIA",ALBUM:"ALBUM",MLE:"MLE",LIFE_EVENT:"LIFE_EVENT",NOTES:"NOTES",QANDA:"QANDA",PAGES_EXTRA:"PAGES_EXTRA",FILE:"FILE",QUESTION:"QUESTION",SELL:"SELL",WORK_HEADER:"WORK_HEADER"};},null);
__d("ReactComposerConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ID_PREFIX:"rc.",GK_VIDEO_COPYRIGHT:"video_copyright_confirmation_dialog",GK_MULTILINGUAL_COMPOSER:"multilingual_composer_www"};},null);
__d("SocialGoodCharityActionsLoggerEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INITIALIZATION_BEGIN:"initialization_begin",INITIALIZATION:"initialization",PREPARE_PAYMENT_METHOD:"prepare_payment_method",PUX_METHOD:"pux_method",NUX_METHOD:"nux_method",FRAUD_CHECK_BEGIN:"fraud_check_begin",FRAUD_CHECK:"fraud_check",CHARGE_CREDENTIAL:"charge_credential",COMPLETE_DONATE:"complete_donate",FUNDRAISER_PAGE_SHARE_IMPRESSION:"fundraiser_page_share_impression",CHANGE_DONATION_AMOUNT:"change_donation_amount",CHOOSE_PAYMENT_METHOD:"choose_payment_method",CLICK_ADD_PAYMENT_METHOD:"click_add_payment_method",ADD_PAYMENT_METHOD:"add_payment_method",DONATE_CLICK:"donate_click",DONATE_CANCEL:"donate_cancel",LEARN_MORE_CLICK:"learn_more_click",INVITE_CLICK:"invite_click",INVITE_COMPLETE:"invite_complete",SHARE_CLICK:"share_click",SHARE_CLICK_CANCEL:"share_click_cancel",SHARE_COMPLETE:"share_complete",JOIN_CLICK:"join_click",JOIN_COMPLETE:"join_complete",LEAVE_CLICK:"leave_click",LEAVE_COMPLETE:"leave_complete",UNFOLLOW_CLICK:"unfollow_click",UNFOLLOW_COMPLETE:"unfollow_complete",FOLLOW_CLICK:"follow_click",FOLLOW_COMPLETE:"follow_complete",VIEW_FUNDRAISER:"view_fundraiser"};},null);
__d("SocialGoodCharityActionsLoggerParentEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DONATE:"donate",INTERACT:"interact",CREATE:"create"};},null);
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STORY:{CHANGE_ORDER_MODE:"story_change_order_mode",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SPAM_FETCHED:"story_spam_fetched",TOGGLE_LIKE:"story_toggle_like",TOGGLE_REPLIES:"story_toggle_replies"},COMMENT:{EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_PIN:"comment_toggle_pin",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",TYPING_CHANGE:"add_comment_typing_change"},FEEDBACK:{FETCH_REQUEST:"feedback_fetch_request",FETCHED_TARGET:"feedback_fetched_target"}};},null);
__d("UFITranslationConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BING_PAGE_URL:"http:\/\/bing.com\/translator",BING_TRANSLATOR_APP:"bing",FB_TRANSLATOR_APP:"fb",FB_AND_BING_TRANSLATOR_APP:"fb_and_bing"};},null);
__d('AppUserRoleConstants.brands',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={ADMIN:'ADMIN',MANAGER:'MANAGER',EMPLOYEE:'EMPLOYEE',NO_PERMISSION:'NO_PERMISSION'};f.exports=h;},null);
__d('RTISubscriptionManager',['ChannelConstants','SystemEvents','invariant','setTimeoutAcrossTransitions','Arbiter','ErrorUtils','Run','RTISubscriptionManagerConfig','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q={SUBSCRIBE:'s',UNSUBSCRIBE:'u'},r=300,s=3;function t(){this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=null;this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=true;this.$RTISubscriptionManager8=null;l.subscribe(h.ON_ENTER_STATE,(function(w,x){if(!this.$RTISubscriptionManager8)return;var y=/pull/.test(x.state);if(!this.$RTISubscriptionManager2&&y){this.$RTISubscriptionManager3=true;if(!this.$RTISubscriptionManager4){this.$RTISubscriptionManager4=true;k((function(){this.$RTISubscriptionManager2=this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;if(this.$RTISubscriptionManager2)this.flush();}).bind(this),t.PULL_HINT_DELAY_MILLIS);}}else if(!y){this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager2=false;}else if(y){this.$RTISubscriptionManager2=true;this.flush();}}).bind(this));i.subscribe(i.ONLINE,(function(w,x){if(!x){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;}}).bind(this));i.subscribe(i.USER,(function(w,x){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager1={};}).bind(this));l.subscribe(h.RTI_SESSION,(function(w,x){if(!this.$RTISubscriptionManager8&&x)this.deleteSubscriptions(function(y){return y.getState()===q.UNSUBSCRIBE;});this.$RTISubscriptionManager8=x;if(this.$RTISubscriptionManager8){this.$RTISubscriptionManager2=true;this.flush();}}).bind(this));l.subscribe(h.ON_INVALID_HISTORY,(function(){this.$RTISubscriptionManager2=true;this.forEachSubscription(function(w,x){x.setDirty(true);});this.getCurrentSession();}).bind(this));this.getCurrentSession();l.subscribe(h.SKYWALKER,function(w,x){var y=x.obj.topic,z={};if(x.obj.payloads===undefined){z.obj=[x.obj.payload];}else z.obj=x.obj.payloads;l.inform(h.getSkywalkerArbiterType(y),z);});}t.prototype.subscribe=function(w,x,y,z,aa){!w?j(0):undefined;!x?j(0):undefined;if(Object.keys(this.$RTISubscriptionManager1).length<this.getMaxSubscriptions()){if(this.isSubscribed(w)){var ba=this.$RTISubscriptionManager1[w];if(ba&&ba.getArbiterToken()){l.unsubscribe(ba.getArbiterToken());ba.setArbiterToken(null);}}if(o.autobot){y=y||{};y.autobotOverrideTier=o.autobot.tier;y.autobotOverrideHostName=o.autobot.host_name;y.autobotOverrideHostIp=o.autobot.host_ip;}var ca=new v(w,x,y,z,aa),da=new u(ca);this.$RTISubscriptionManager1[w]=ca;var ea=h.getSkywalkerArbiterType(w),fa=l.subscribe(ea,(function(ga,event){var ha=event.obj.length;for(var ia=0;ia<ha;ia++){var ja={topic:w,payload:event.obj[ia]};m.applyWithGuard(x,this,[ja]);}this.$RTISubscriptionManager9();}).bind(this));ca.setArbiterToken(fa);this.flush();return da;}return null;};t.prototype.unsubscribe=function(w){!w?j(0):undefined;if(w in this.$RTISubscriptionManager1){var x=this.$RTISubscriptionManager1[w];x.prepareUnsubscribe();if(x.getArbiterToken()){l.unsubscribe(x.getArbiterToken());x.setArbiterToken(null);}}};t.prototype.unsubscribeAll=function(){if(this.isReady()){var w={reset:'t'};this.$RTISubscriptionManager8.issueRequest('/sub',w,{},function(x){});}};t.prototype.flush=function(){if(this.isReady()&&!this.$RTISubscriptionManager5){this.$RTISubscriptionManager5=true;this.$RTISubscriptionManager6=false;var w=[],x={},y=false;this.forEachSubscription(function(da,ea){ea.ping();if(ea.isDirty()){var fa='subscriptions',ga=x[fa];if(!ga){ga=[];x[fa]=ga;}w.push(ea);ea.setDirty(false);ea.setSent(false);var ha={topic:ea.getTopic(),state:ea.getState(),context:ea.getContext()};ga.push(ha);}else y=true;});if(!y&&x.subscriptions&&x.subscriptions.length>0){var z=[];for(var aa=0;aa<x.subscriptions.length;aa++)if(x.subscriptions[aa].state!==q.UNSUBSCRIBE)z.push(x.subscriptions[aa]);x.subscriptions=z;this.$RTISubscriptionManager7=true;}var ba=(function(da){var ea=da.data!=null;if(this.$RTISubscriptionManager7&&ea)this.$RTISubscriptionManager7=false;for(var fa=0;fa<w.length;fa++){var ga=w[fa];ga.setSent(ea);ga.setDirty(!ea);var ha=ga.getSubscribeCallback();if(ha!==null)m.applyWithGuard(ha,this,[da]);}this.deleteSubscriptions(function(ia){return ia.getState()===q.UNSUBSCRIBE&&ia.isSent();});this.$RTISubscriptionManager5=false;if(this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=false;this.flush();}}).bind(this);if(Object.keys(x).length>0){var ca={};if(this.$RTISubscriptionManager7)ca.reset='t';this.$RTISubscriptionManager8.issueRequest('/sub',ca,x,ba);}else this.$RTISubscriptionManager5=false;}else{this.$RTISubscriptionManager6=true;if(!this.$RTISubscriptionManager5)this.getCurrentSession();}};t.prototype.deleteSubscriptions=function(w){!w?j(0):undefined;var x=[];this.forEachSubscription(function(z,aa){if(w.apply(this,[aa]))x.push(z);});for(var y=0;y<x.length;y++)delete this.$RTISubscriptionManager1[x[y]];};t.prototype.forEachSubscription=function(w){!w?j(0):undefined;for(var x in this.$RTISubscriptionManager1)if(this.$RTISubscriptionManager1.hasOwnProperty(x))w.apply(this,[x,this.$RTISubscriptionManager1[x]]);};t.prototype.isSubscribed=function(w){!w?j(0):undefined;return w in this.$RTISubscriptionManager1;};t.prototype.isReady=function(){if(this.$RTISubscriptionManager8&&this.$RTISubscriptionManager2!==null&&this.$RTISubscriptionManager2)return true;return false;};t.prototype.getCurrentSession=function(){l.inform(h.GET_RTI_SESSION_REQUEST);};t.prototype.getMaxSubscriptions=function(){if(o.config&&o.config.hasOwnProperty('max_subscriptions')){return o.config.max_subscriptions;}else return r;};t.prototype.$RTISubscriptionManager10=function(){if(o.config)return o.config.www_idle_unsubscribe_ms;return null;};t.prototype.$RTISubscriptionManager9=function(){var w=this.$RTISubscriptionManager10();if(!w)return;if(p.isActive(w))return;this.forEachSubscription((function(x,y){var z=y.getTopic();if(z.startsWith('graphql'))this.unsubscribe(z);}).bind(this));};function u(w){this.$SubscriptionToken1=w;}u.prototype.unsubscribe=function(){t.unsubscribe(this.$SubscriptionToken1.getTopic());};function v(w,x,y,z,aa){this.$SubscriptionData1=w;this.$SubscriptionData2=x;this.$SubscriptionData3=true;this.$SubscriptionData4=false;this.$SubscriptionData5=q.SUBSCRIBE;this.$SubscriptionData6=null;if(y){this.$SubscriptionData7=y;}else this.$SubscriptionData7={};if(z){this.$SubscriptionData8=z;}else this.$SubscriptionData8=null;if(typeof aa=='function'){this.$SubscriptionData9=aa;this.$SubscriptionData10=0;}else this.$SubscriptionData9=function(){return true;};}v.prototype.getTopic=function(){return this.$SubscriptionData1;};v.prototype.getListener=function(){return this.$SubscriptionData2;};v.prototype.getSubscribeCallback=function(){return this.$SubscriptionData8;};v.prototype.getArbiterToken=function(){return this.$SubscriptionData6;};v.prototype.setArbiterToken=function(w){this.$SubscriptionData6=w;};v.prototype.isDirty=function(){return this.$SubscriptionData3;};v.prototype.setDirty=function(w){this.$SubscriptionData3=w;};v.prototype.ping=function(){if(this.$SubscriptionData9()){this.$SubscriptionData10=0;}else if(this.$SubscriptionData10<=s){this.$SubscriptionData10++;}else{var w=this.getState();this.setState(q.UNSUBSCRIBE);if(w!=this.$SubscriptionData5){this.setDirty(true);this.setSent(false);}}};v.prototype.getState=function(){return this.$SubscriptionData5;};v.prototype.setState=function(w){this.$SubscriptionData5=w;};v.prototype.getContext=function(){return this.$SubscriptionData7;};v.prototype.isSent=function(){return this.$SubscriptionData4;};v.prototype.setSent=function(w){this.$SubscriptionData4=w;};v.prototype.prepareUnsubscribe=function(){this.setState(q.UNSUBSCRIBE);this.setDirty(true);this.setSent(false);};n.onUnload(function(){t.unsubscribeAll();});t.PULL_HINT_DELAY_MILLIS=10000;Object.keys(t.prototype).forEach(function(w){t[w]=function(){var x=t;return t.prototype[w].apply(x,arguments);};});t.call(t);f.exports=t;},null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$UFICommentTypedLogger1=babelHelpers._extends({},this.$UFICommentTypedLogger1,m);return this;};k.prototype.setDuration=function(m){this.$UFICommentTypedLogger1.duration=m;return this;};k.prototype.setEvent=function(m){this.$UFICommentTypedLogger1.event=m;return this;};k.prototype.setHasPhoto=function(m){this.$UFICommentTypedLogger1.has_photo=m;return this;};k.prototype.setHasSticker=function(m){this.$UFICommentTypedLogger1.has_sticker=m;return this;};k.prototype.setIsReply=function(m){this.$UFICommentTypedLogger1.is_reply=m;return this;};k.prototype.setRequestLength=function(m){this.$UFICommentTypedLogger1.request_length=m;return this;};k.prototype.setVC=function(m){this.$UFICommentTypedLogger1.vc=m;return this;};var l={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=k;},null);
__d('UFICommentLogger',['UFICommentTypedLogger'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}i.prototype.logNewCommentPost=function(j,k,l){this.$UFICommentLogger2[j]=babelHelpers._extends({timestamp:k},l);new h().setEvent('new_comment_post').setHasPhoto(l.has_photo).setHasSticker(l.has_sticker).setIsReply(l.is_reply).log();};i.prototype.logNewCommentReceived=function(j,k){var l=this.$UFICommentLogger2[j];if(l){var m=0;if(k&&l.timestamp)m=k-l.timestamp;new h().setEvent('new_comment_received').setDuration(m).setHasPhoto(l.has_photo).setHasSticker(l.has_sticker).setIsReply(l.is_reply).log();}delete this.$UFICommentLogger2[j];};i.prototype.logCommentFetch=function(j,k,l){var m=babelHelpers._extends({timestamp:k},l);if(this.$UFICommentLogger1[j]===undefined){this.$UFICommentLogger1[j]=[m];}else this.$UFICommentLogger1[j].push(m);new h().setEvent('fetch_comment').setIsReply(l.is_reply).setRequestLength(l.request_length).log();};i.prototype.logCommentFetchReceived=function(j,k){if(this.$UFICommentLogger1[j]){var l=this.$UFICommentLogger1[j].shift(),m=0;if(k&&l.timestamp)m=k-l.timestamp;new h().setEvent('fetch_comment_received').setDuration(m).setIsReply(l.is_reply).setRequestLength(l.request_length).log();if(this.$UFICommentLogger1[j].length===0)delete this.$UFICommentLogger1[j];}};f.exports=new i();},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=new h();function l(o,p){i.log('comment_vpv',undefined,null,'comment',p);if(!k.has(o))k.set(o,new j());k.get(o).add(p);}function m(o,p){if(k.has(o))return k.get(o).has(p);return false;}var n={logVPV:l,hasLoggedVPV:m};f.exports=n;},null);
__d('ReactDispatcher',['Dispatcher','ReactDOM'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h);k=j&&j.prototype;l.prototype.dispatch=function(m){i.unstable_batchedUpdates((function(){k.dispatch.call(this,m);}).bind(this));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFIDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h;},null);
__d('UFISharedDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={cancel:function(j){return {type:h.ADD_COMMENT.CANCEL,instanceid:j};},retrySubmit:function(j){return {type:h.ADD_COMMENT.RETRY_SUBMIT,comment:j};},submitEdit:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_EDIT,comment:j,commentData:k,target:l};},submitNew:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_NEW,comment:j,target:k,replyCommentID:l,timestamp:Date.now()};},typingChange:function(j){return {type:h.ADD_COMMENT.TYPING_CHANGE,state:j};}};f.exports=i;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={edit:function(j){return {type:h.COMMENT.EDIT,comment:j};},remove:function(j,k,l){return {type:h.COMMENT.REMOVE,comment:j,target:k,onConfirm:l};},removePreview:function(j,k){return {type:h.COMMENT.REMOVE_PREVIEW,comment:j,target:k};},toggleLike:function(j,k){return {type:h.COMMENT.TOGGLE_LIKE,comment:j,like:!j.hasviewerliked,target:k};},togglePin:function(j,k){return {type:h.COMMENT.TOGGLE_PIN,comment:j,target:k};},translate:function(j,k){return {type:h.COMMENT.TRANSLATE,comment:j,target:k};},markAsSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:j,target:k};},markAsNotSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:j,target:k};},inlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:j,target:k,ownerid:l};},undoInlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:j,target:k,ownerid:l};}};f.exports=i;},null);
__d('LiveWWWFeedbackTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:LiveWWWFeedbackLoggerConfig',this.$LiveWWWFeedbackTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:LiveWWWFeedbackLoggerConfig',this.$LiveWWWFeedbackTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$LiveWWWFeedbackTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$LiveWWWFeedbackTypedLogger1=babelHelpers._extends({},this.$LiveWWWFeedbackTypedLogger1,m);return this;};k.prototype.setCommentID=function(m){this.$LiveWWWFeedbackTypedLogger1.comment_id=m;return this;};k.prototype.setEvent=function(m){this.$LiveWWWFeedbackTypedLogger1.event=m;return this;};k.prototype.setIsMSite=function(m){this.$LiveWWWFeedbackTypedLogger1.is_m_site=m;return this;};k.prototype.setMechanism=function(m){this.$LiveWWWFeedbackTypedLogger1.mechanism=m;return this;};k.prototype.setOriginatedLocally=function(m){this.$LiveWWWFeedbackTypedLogger1.originated_locally=m;return this;};k.prototype.setRecipientID=function(m){this.$LiveWWWFeedbackTypedLogger1.recipient_id=m;return this;};k.prototype.setTimeSinceSub=function(m){this.$LiveWWWFeedbackTypedLogger1.time_since_sub=m;return this;};k.prototype.setUpdateType=function(m){this.$LiveWWWFeedbackTypedLogger1.update_type=m;return this;};k.prototype.setVC=function(m){this.$LiveWWWFeedbackTypedLogger1.vc=m;return this;};var l={comment_id:true,event:true,is_m_site:true,mechanism:true,originated_locally:true,recipient_id:true,time_since_sub:true,update_type:true,vc:true};f.exports=k;},null);
__d('UFICentralUpdates',['Arbiter','BanzaiLogger','BanzaiODS','ChannelConstants','LiveTimer','ShortProfiles','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();j.setEntitySample('feedback',.0001);var p=0,q={},r={},s={},t={},u=[];function v(){if(!p){var z=s,aa=q,ba=r,ca=t;s={};q={};r={};t={};if(Object.keys(z).length)x('feedback-id-changed',z);if(Object.keys(aa).length)x('feedback-updated',aa);if(Object.keys(ba).length)x('comments-updated',ba);if(Object.keys(ca).length)x('instance-updated',ca);u.pop();}}function w(){if(u.length){return u[u.length-1];}else return n.UFIPayloadSourceType.UNKNOWN;}function x(event,z){y.inform(event,{updates:z,payloadSource:w()});}var y=Object.assign(new h(),{handleUpdate:function(z,aa){if(Object.keys(aa).length)this.synchronizeInforms((function(){u.push(z);var ba=babelHelpers._extends({payloadsource:w()},aa);this.inform('update-feedback',ba);this.inform('update-comment-lists',ba);this.inform('update-comments',ba);this.inform('update-actions',ba);(aa.profiles||[]).forEach(function(ca){m.set(ca.id,ca);});if(aa.servertime)l.restart(aa.servertime);}).bind(this));},didUpdateFeedback:function(z){q[z]=true;v();},didUpdateComment:function(z){r[z]=true;v();},didUpdateFeedbackID:function(z,aa){s[z]=aa;v();},didUpdateInstanceState:function(z,aa){if(!t[z])t[z]={};t[z][aa]=true;v();},synchronizeInforms:function(z){p++;try{z();}catch(aa){throw aa;}finally{p--;v();}}});f.exports=y;},null);
__d('UFIFeedbackTargets',['ClientIDs','KeyedCallbackManager','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=new i();function n(y){var z={};y.forEach(function(aa){var ba=babelHelpers._extends({},aa);delete ba.commentlist;delete ba.commentcount;z[aa.entidentifier]=ba;k.didUpdateFeedback(aa.entidentifier);});m.addResourcesAndExecute(z);}function o(y,z){for(var aa=0;aa<y.length;aa++){var ba=y[aa];switch(ba.actiontype){case l.UFIActionType.LIKE_ACTION:q(ba,z);break;case l.UFIActionType.TOGGLE_PIN:r(ba);break;case l.UFIActionType.SUBSCRIBE_ACTION:s(ba);break;case l.UFIActionType.DISABLE_COMMENTS:t(ba);break;case l.UFIActionType.REACTION:u(ba);break;}}}function p(y){for(var z=0;z<y.length;z++){var aa=y[z];if(aa.orig_ftentidentifier)w(aa.orig_ftentidentifier,aa.ftentidentifier);}}function q(y,z){var aa=v(y);if(aa){var ba=y.clientid&&h.isExistingClientID(y.clientid);if(z===l.UFIPayloadSourceType.LIVE_SEND)new j().setEvent('update_view').setUpdateType('like').setOriginatedLocally(ba).log();y.hasviewerliked=!!y.hasviewerliked;if(ba&&y.hasviewerliked!=aa.hasviewerliked)return;aa.likecount=y.likecount||0;aa.likesentences=y.likesentences;if(y.actorid==aa.actorforpost){aa.hasviewerliked=y.hasviewerliked;}else if(y.hasviewerliked!=aa.hasviewerliked){aa.likesentences={current:y.likesentences.alternate,alternate:y.likesentences.current};if(aa.hasviewerliked){aa.likecount++;}else aa.likecount--;}if(y.actorid!=aa.actorforpost)aa.likesentences.isunseen=true;n([aa]);}}function r(y){var z=v(y),aa=y.newcommenttoken,ba=y.newpinstate;if(ba==='PIN'){z.pinnedcommenttoken=aa;}else if(aa===z.pinnedcommenttoken)z.pinnedcommenttoken=null;n([z]);}function s(y){var z=v(y);if(z){y.hasviewersubscribed=!!y.hasviewersubscribed;if(y.clientid&&h.isExistingClientID(y.clientid)&&y.hasviewersubscribed!=z.hasviewersubscribed)return;if(y.actorid==z.actorforpost)z.hasviewersubscribed=y.hasviewersubscribed;n([z]);}}function t(y){var z=v(y);if(z){z.cancomment=!!y.cancomment;z.arecommentsdisabled=!!y.arecommentsdisabled;z.commentdisablednotice=y.commentdisablednotice;n([z]);}}function u(y){var z=v(y);if(z){if(y.clientid&&h.isExistingClientID(y.clientid)&&y.viewerreaction!==z.viewerreaction)return;if(z.actorforpost==y.actorid||z.viewerreaction==y.viewerreaction){z.importantreactorids=y.importantreactorids;z.reactioncount=y.reactioncount;z.reactioncountmap=y.reactioncountmap;z.reactioncountreduced=y.reactioncountreduced;z.reactionsentences=y.reactionsentences;z.reactorids=y.reactorids;z.userreactions=y.userreactions;z.viewerreaction=y.viewerreaction;}n([z]);}}function v(y){if(y.orig_entidentifier)w(y.orig_entidentifier,y.entidentifier);return m.getResource(y.entidentifier);}function w(y,z){var aa=m.getResource(y);if(aa){m.setResource(y,null);aa.entidentifier=z;m.setResource(z,aa);k.didUpdateFeedbackID(y,z);}}var x={getFeedbackTarget:function(y,z){var aa=m.executeOrEnqueue(y,z),ba=m.getUnavailableResources(aa);ba.length;return aa;},getFeedbackTargetIfExists:function(y){return m.getResource(y)||null;},getActorIDForFeedbackTargetIfExists:function(y){var z=m.getResource(y);return z?z.actorforpost:null;},handleNFB:function(y,z){var aa=m.getResource(y);if(aa){aa.nfbcount=z||0;n([aa]);}},unsubscribe:function(y){m.unsubscribe(y);}};k.subscribe('update-feedback',function(y,z){var aa=z.feedbacktargets;if(aa&&aa.length)n(aa);});k.subscribe('update-actions',function(y,z){if(z.actions&&z.actions.length)o(z.actions,z.payloadsource);});k.subscribe('update-comments',function(y,z){if(z.comments&&z.comments.length)p(z.comments);});f.exports=x;},6);
__d('UFICommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=o({actorID:true});function q(r){this.count=0;this.overriddenDisplayCount=null;this.deletedComments={};this.deletedCount=0;this.dataSource=new i();this.feedbackTargetID=r;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};n.getFeedbackTarget(this.feedbackTargetID,(function(s){this.actorID=s.actorforpost;this.basePermalink=s.permalink;}).bind(this));}q.prototype.addOrUpdateComment=function(r){if(r.islocal){this.$UFICommentList1(r.id);}else this.$UFICommentList2(r.id,r.clientid,r.legacyid);j.didUpdateFeedback(this.feedbackTargetID);};q.prototype.$UFICommentList1=function(r){this.dataSource.setResource(this.count,r);this.count++;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount++;};q.prototype.$UFICommentList2=function(r,s,t){var u=s&&h.isExistingClientID(s),v=this.dataSource.getAllResources(),w={};for(var x in v){var y=v[x];w[y]=x;}if(u&&s in w){w[r]=w[s];var z=w[s];this.dataSource.setResource(z,r);if(l.logCommentPost)k.logNewCommentReceived(s,Date.now());}else if(!w[r]&&s)this.$UFICommentList1(r);if(t&&r in w)this.commentPermalinks[r]=this.buildCommentPermalink(r,t,w[r]);};q.prototype.addCommentIDs=function(r,s,t){var u={};for(var v=0;v<s;v++)u[r+v]=t[v]||m.unavailableCommentKey;this.dataSource.addResourcesAndExecute(u);j.didUpdateFeedback(this.feedbackTargetID);return this;};q.prototype.getComments=function(r,s,t,u){var v=[];for(var w=0;w<s;w++)v.push(r+w);var x=this.dataSource.getUnavailableResourcesFromRequest(v);if(x.length){var y=Math.min.apply(Math,x),z=Math.max.apply(Math,x),aa=y,ba=z-y+1;if(aa<this.lastRequestedOffset||aa+ba>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=aa;this.lastRequestedLength=ba;this.fetchComments(aa,ba,t);}}else this.dataSource.executeOrEnqueue(v,this.deferredCallback.bind(this,r,s,u));};q.prototype.fetchComments=function(r,s,t){};q.prototype.deferredCallback=function(r,s,t,u){};q.prototype.reset=function(){var r=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return r;};q.prototype.deleteComment=function(r){if(!(r in this.deletedComments)){this.deletedComments[r]=true;this.deletedCount++;}};q.prototype.updateCommentCount=function(r){this.count=r;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount=r;this.deletedCount=0;return this;};q.prototype.updateOverriddenDisplayCount=function(r){this.overriddenDisplayCount=r;return this;};q.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};q.prototype.getCommentCount=function(){return this.count;};q.prototype.getDeletedCount=function(){return this.deletedCount;};q.prototype.getDisplayedCommentCount=function(){if(this.overriddenDisplayCount===null){return this.count-this.deletedCount;}else return this.overriddenDisplayCount;};q.prototype.getBasePermalink=function(){return this.basePermalink;};q.prototype.buildCommentPermalink=function(r,s,t){};q.prototype.getPermalinkForComment=function(r){return this.commentPermalinks[r];};q.isValidContextPropertyForReset=function(r){return r in p;};f.exports=q;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={inverted:function(j){switch(j){case h.UFICommentOrderingMode.RECENT_ACTIVITY:case h.UFICommentOrderingMode.RANKED_THREADED:case h.UFICommentOrderingMode.FILTERED:case h.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=i;},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={};function j(l){if(!i[l])i[l]={};}var k={getKeyForInstance:function(l,m){j(l);return i[l][m];},updateState:function(l,m,n){j(l);i[l][m]=n;h.didUpdateInstanceState(l,m);},updateStateField:function(l,m,n,o){var p=this.getKeyForInstance(l,m)||{};p[n]=o;this.updateState(l,m,p);},updateStateFields:function(l,m,n){var o=this.getKeyForInstance(l,m)||{};o=babelHelpers._extends({},o,n);this.updateState(l,m,o);}};f.exports=k;},null);
__d('UFIComments',['ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={},q={};function r(ha){return ha in q?q[ha]:ha;}function s(ha,ia){ha.forEach(function(ja){var ka=ja.ftentidentifier,la=l.UFIPayloadSourceType,ma=ja.clientid,na=false,oa=babelHelpers._extends({},ja);if(ma){delete oa.clientid;na=h.isExistingClientID(ma);if(na&&q[ma]){new j().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ja.id).log();return;}}if(ia===la.LIVE_SEND||ia===la.USER_ACTION||ia===la.ENDPOINT_ADD_COMMENT||ia===la.ENDPOINT_EDIT_COMMENT)oa.isunseen=true;if(ia===la.LIVE_SEND)oa.islive=true;if(ia===la.ENDPOINT_COMMENT_FETCH||ia===la.ENDPOINT_ID_COMMENT_FETCH)oa.fromfetch=true;if(na){if(p[ma].ufiinstanceid)m.updateStateField(p[ma].ufiinstanceid,'locallycomposed',ja.id,true);oa.ufiinstanceid=p[ma].ufiinstanceid;q[ma]=ja.id;p[ja.id]=p[ma];delete p[ma];k.didUpdateComment(ma);}ga.setComment(ja.id,new i(oa));k.didUpdateComment(ja.id);k.didUpdateFeedback(ka);});}function t(ha,ia){for(var ja=0;ja<ha.length;ja++){var ka=ha[ja];switch(ka.actiontype){case l.UFIActionType.LIKE_ACTION:if(ga.getComment(ka.entidentifier))u(ka.clientid,ka.entidentifier,ka.hasviewerliked,ka.likecount,ia);break;case l.UFIActionType.COMMENT_LIKE:u(ka.clientid,ka.commentid,ka.viewerliked,ka.likecount,ia);break;case l.UFIActionType.TOGGLE_PIN:v(ka.newcommenttoken,ka.oldcommenttoken);break;case l.UFIActionType.DELETE_COMMENT:z(ka);break;case l.UFIActionType.LIVE_DELETE_COMMENT:aa(ka);break;case l.UFIActionType.REMOVE_PREVIEW:ba(ka);break;case l.UFIActionType.COMMENT_SET_SPAM:ca(ka);break;case l.UFIActionType.CONFIRM_COMMENT_REMOVAL:da(ka);break;case l.UFIActionType.TRANSLATE_COMMENT:x(ka);break;case l.UFIActionType.COMMENT_LIKECOUNT_UPDATE:w(ka);break;}}}function u(ha,ia,ja,ka,la){var ma=ga.getComment(ia);if(ma){var na={},oa=ha&&h.isExistingClientID(ha);if(!oa){na.hasviewerliked=ja;na.likecount=ka;}if(la===l.UFIPayloadSourceType.LIVE_SEND)new j().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(oa).setCommentID(ia).log();na.likeconfirmhash=o(0,1024);fa(ia,na);}}function v(ha,ia){fa(ha,{});fa(ia,{});}function w(ha){var ia=ga.getComment(ha.commentid);if(ia&&ha.hasviewerliked===ia.hasviewerliked){var ja={likecount:ha.likecount,likeconfirmhash:o(0,1024)};fa(ha.commentid,ja);}}function x(ha){var ia=ha.commentid,ja=ga.getComment(ia);if(ja){var ka={translatedbody:ha.translatedbody,translatorapp:ha.translatorapp};fa(ia,ka);}}function y(ha){var ia={reportLink:ha.reportLink,commenterIsFOF:ha.commenterIsFOF,userIsMinor:ha.userIsMinor,giveFeedbackLink:ha.giveFeedbackLink};return ia;}function z(ha){var ia=ga.getComment(ha.commentid);ea(ia,l.UFIStatus.DELETED);}function aa(ha){var ia=ga.getComment(ha.commentid);if(ia&&ia.status!==l.UFIStatus.DELETED)ea(ia,l.UFIStatus.LIVE_DELETED);}function ba(ha){fa(ha.commentid,{attachment:null});}function ca(ha){var ia=ga.getComment(ha.commentid),ja=ha.shouldHideAsSpam?l.UFIStatus.SPAM_DISPLAY:null;ea(ia,ja);}function da(ha){fa(ha.commentid,y(ha));}function ea(ha,ia){fa(ha.id,{priorstatus:ha.status,status:ia});}function fa(ha,ia){var ja=ga.getComment(ha)||new i({});ga.setComment(ha,i.set(ja,ia));k.didUpdateComment(ja.id);k.didUpdateFeedback(ja.ftentidentifier);}var ga={getComment:function(ha){if(ha===l.unavailableCommentKey)return null;return p[r(ha)];},setComment:function(ha,ia){!(ia instanceof i)?n(0):undefined;p[r(ha)]=ia;},resetComments:function(ha){for(var ia in ha)delete p[r(ia)];}};k.subscribe('update-comments',function(ha,ia){if(ia.comments&&ia.comments.length)s(ia.comments,ia.payloadsource);});k.subscribe('update-actions',function(ha,ia){if(ia.actions&&ia.actions.length)t(ia.actions,ia.payloadsource);});f.exports=ga;},6);
__d('UFIReplyCommentList',['ActorURI','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t={},u=i.create('ufi_reply_comment_list');r=babelHelpers.inherits(v,l);s=r&&r.prototype;v.getCommentList=function(x,y){if(!t[y])t[y]=new v(x,y);return t[y];};v.resetWithContext=function(x,y,z){var aa=t[y];if(!aa)return;aa.reset();for(var ba in z)if(this.isValidContextPropertyForReset(ba))aa[ba]=z[ba];};function v(x,y){s.constructor.call(this,x);this.parentCommentID=y;}v.prototype.fetchComments=function(x,y,z){if(o.logCommentLoad)m.logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:y,is_reply:true});var aa={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[x],lengths:[y],feed_context:z?z.feedContext:null,numpagerclicks:z?z.numPagerClicks:null};if(!z||!z.viewAs)aa[h.PARAMETER_ACTOR]=this.actorID;j.trySend('/ajax/ufi/reply_fetch.php',aa);};v.prototype.deferredCallback=function(x,y,z,aa){var ba={};for(var ca=0;ca<y;ca++){var da=n.getComment(aa[x+ca]);if(da)ba[x+ca]=da;}z(ba);};v.prototype.reset=function(){var x=s.reset.call(this),y={};for(var z in x){var aa=x[z];y[aa]=true;}n.resetComments(y);};v.prototype.getParentCommentID=function(){return this.parentCommentID;};v.prototype.buildCommentPermalink=function(x,y,z){if(!this.basePermalink)return null;var aa=this.getParentCommentID().split("_"),ba=y;if(aa.length===2){ba=aa[1];}else u.error("Bad reply comment ID: "+this.getParentCommentID());return (new q(this.basePermalink).addQueryData({comment_id:ba,reply_comment_id:y}).toString());};j.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:j.IMMEDIATE}});function w(x){var y=n.getComment(x.commentid),z=y.id,aa=y.ftentidentifier,ba=y.parentcommentid;if(!ba)return;if(y.status!==p.UFIStatus.DELETED&&y.status!==p.UFIStatus.FAILED_ADD)v.getCommentList(aa,ba).deleteComment(z);}k.subscribe('update-actions',function(x,y){if(y.actions&&y.actions.length)for(var z=0;z<y.actions.length;z++){var aa=y.actions[z];switch(aa.actiontype){case p.UFIActionType.DELETE_COMMENT:w(aa);break;}}});k.subscribe('update-comment-lists',function(x,y){var z=y.commentlists;if(z&&z.replies&&Object.keys(z).length)for(var aa in z.replies){var ba=z.replies[aa],ca=ba.ftentidentifier;v.getCommentList(ca,aa).addCommentIDs(ba.range.offset,ba.range.length,ba.values).updateCommentCount(ba.count);}});k.subscribe('update-comments',function(x,y){if(y.comments&&y.comments.length)y.comments.forEach(function(z){var aa=z.entidentifier,ba=z.parentcommentid;if(!ba)return;v.getCommentList(aa,ba).addOrUpdateComment(z);});});f.exports=v;},6);
__d('UFIToplevelCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t;'use strict';var u={};s=babelHelpers.inherits(v,k);t=s&&s.prototype;v.getCommentList=function(x,y){if(!u[x])u[x]={};if(!u[x][y]){var z=new v(x,y),aa=v.getCommentListsForFeedbackTargetID(x);if(aa.length)z.updateCommentCount(aa[0].getCommentCount());u[x][y]=z;}return u[x][y];};v.getCommentListsForFeedbackTargetID=function(x){var y=[],z=u[x]||{};for(var aa in z)y.push(z[aa]);return y;};v.getCommentListForFeedbackTargetID_UNSAFE=function(x){var y=v.getCommentListsForFeedbackTargetID(x);return y.length?y[0]:null;};v.resetCommentListsForFeedbackTargetID=function(x){if(!u[x])return;var y={};for(var z in u[x]){var aa=u[x][z],ba=aa.reset();for(var ca in ba){var da=ba[ca];y[da]=true;}}n.resetComments(y);};v.resetCommentListsWithContext=function(x,y){if(!u[x])return;var z={};for(var aa in u[x]){var ba=u[x][aa];for(var ca in y)if(this.isValidContextPropertyForReset(ca))ba[ca]=y[ca];var da=ba.reset();for(var ea in da){var fa=da[ea];z[fa]=true;q.resetWithContext(x,fa,y);}}n.resetComments(z);};function v(x,y){t.constructor.call(this,x);this.orderReversed=false;if(m.inverted(y))this.orderReversed=true;this.orderingMode=y;this.forceNotPageable=false;}v.prototype.fetchComments=function(x,y,z){if(o.logCommentLoad)l.logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:y,is_reply:false});var aa={ft_ent_identifier:this.feedbackTargetID,viewas:z&&z.viewAs?z.viewAs+'':null,source:z&&z.feedbackSource,offset:x,length:y,orderingmode:this.orderingMode,feed_context:z?z.feedContext:null,numpagerclicks:z?z.numPagerClicks:null};switch(this.orderingMode){case p.UFICommentOrderingMode.RECENT_ACTIVITY:case p.UFICommentOrderingMode.RANKED_THREADED:case p.UFICommentOrderingMode.FILTERED:aa.clientcommentcount=this.count;}if(!z||!z.viewAs)aa[h.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/comment_fetch.php',aa);};v.prototype.deferredCallback=function(x,y,z,aa){var ba={},ca=x,da=x+y-1;for(var ea=0;ea<y;ea++){var fa=this.orderReversed?da-ea:ca+ea,ga=n.getComment(aa[fa]);if(ga)ba[x+ea]=ga;}z(ba);};v.prototype.getOrderingMode=function(){return this.orderingMode;};v.prototype.setForceNotPageable=function(x){this.forceNotPageable=x;return this;};v.prototype.getForceNotPageable=function(){return this.forceNotPageable;};v.prototype.buildCommentPermalink=function(x,y,z){if(!this.basePermalink)return null;return (new r(this.basePermalink).addQueryData({comment_id:y}).toString());};i.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:i.IMMEDIATE}});function w(x){var y=n.getComment(x.commentid),z=y.id,aa=y.ftentidentifier,ba=y.parentcommentid;if(ba)return;if(x.islocal||y.status!==p.UFIStatus.DELETED&&y.status!==p.UFIStatus.FAILED_ADD)v.getCommentListsForFeedbackTargetID(aa).forEach(function(ca){ca.deleteComment(z);});}j.subscribe('update-actions',function(x,y){if(y.actions&&y.actions.length)for(var z=0;z<y.actions.length;z++){var aa=y.actions[z];switch(aa.actiontype){case p.UFIActionType.DELETE_COMMENT:w(aa);break;}}});j.subscribe('update-comment-lists',function(x,y){var z=y.commentlists;if(z&&z.comments&&Object.keys(z).length)for(var aa in z.comments)for(var ba in z.comments[aa]){var ca=z.comments[aa][ba],da=v.getCommentList(aa,ba).addCommentIDs(ca.range.offset,ca.range.length,ca.values);da.setForceNotPageable(!!ca.forcenotpageable);}});j.subscribe('update-comments',function(x,y){if(y.comments&&y.comments.length)y.comments.forEach(function(z){if(z.parentcommentid)return;var aa=z.ftentidentifier;v.getCommentListsForFeedbackTargetID(aa).forEach(function(ba){ba.addOrUpdateComment(z);});});});j.subscribe('update-feedback',function(x,y){if(y.feedbacktargets&&y.feedbacktargets.length)y.feedbacktargets.forEach(function(z){var aa=z.entidentifier,ba=z.defaultcommentorderingmode,ca={};if(ba)ca[ba]=true;if(z.orderingmodes)z.orderingmodes.forEach(function(ea){ca[ea.value]=true;});for(var da in ca)v.getCommentList(aa,da).updateCommentCount(z.commentcount);});});f.exports=v;},6);
__d("UFIReactionsUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getReactionData:function(i,j,k){j=parseInt(j,10);var l=!!j,m=i.reactorids?i.reactorids.slice(0):[],n=m.indexOf(k),o=0;if(l){if(n<0){m.unshift(k);o=1;}}else if(n>-1){m.splice(n,1);o=-1;}var p=Math.max(i.reactioncount+o,0),q=i.reactioncountreduced;if(q&&!isNaN(q))q=p.toString();var r=i.reactioncountmap||{},s,t=i.viewerreaction;if(t&&r[t]){r[t]["default"]=Math.max((r[t]["default"]||0)-1,0);s=r[t].reduced;if(s&&!isNaN(s))r[t].reduced=r[t]["default"].toString();}if(l&&r[j]){r[j]["default"]=(r[j]["default"]||0)+1;s=r[j].reduced;if(s&&!isNaN(s))r[j].reduced=r[j]["default"].toString();}var u=i.userreactions;if(!u||Array.isArray(u))u={};if(l){u[k]=j;}else delete u[k];var v=i.importantreactorids||[],w=v.indexOf(k);if(l&&w===-1){v.unshift(k);}else if(!l&&w!==-1)v.splice(w,1);var x=null;if(i.reactionsentences)x={current:i.reactionsentences.alternate,alternate:i.reactionsentences.current};return {importantreactorids:v,reactioncount:p,reactioncountmap:r,reactioncountreduced:q,reactionsentences:x,reactorids:m,userreactions:u,viewerreaction:j};}};f.exports=h;},null);
__d("XUFITogglePinCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/comment\/pin\/",{});},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1}});},null);
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null);
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0}});},null);
__d('UFIUserActions',['ActorURI','AsyncRequest','AsyncResponse','requireWeak','ChannelClientID','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionsUtils','MercuryServerDispatcher','XUFITogglePinCommentAsyncController','XUFITypingIndicatorController','XUFIAddCommentController','XUFIDeleteCommentController','XUFICommentLikeController','XUFIHideCommentController','XUFILikeController','XUFIEditCommentController','XUFITranslateCommentController','XUFIActorChangeController','XUFIReactionController','collectDataAttributes','errorCode','fbt','UnicodeBidi'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){if(c.__markCompiled)c.__markCompiled();var na;k('CLoggerX',function(ob){na=ob;});var oa={BAN:'ban',UNDO_BAN:'undo_ban'},pa={changeActor:function(ob,pb){v.getFeedbackTarget(ob,function(qb){q.resetCommentListsWithContext(ob,{actorID:pb});p.inform('actor-changed',{actorID:pb});var rb={from_actor_id:qb.actorforpost,ft_ent_identifier:ob};rb[h.PARAMETER_ACTOR]=pb;var sb=ha.getURIBuilder().getURI();x.trySend(sb,rb);});},changeCommentLike:function(ob,pb,qb){var rb=r.getComment(ob);if(rb.hasviewerliked!=pb){var sb=qa(qb.target),tb=pb?1:-1,ub={commentid:ob,actiontype:u.UFIActionType.COMMENT_LIKE,viewerliked:pb,likecount:(rb.likecount||0)+tb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[ub]});v.getFeedbackTarget(rb.ftentidentifier,function(vb){var wb={};wb[h.PARAMETER_ACTOR]=vb.actorforpost;var xb=ca.getURIBuilder().getURI();x.trySend(xb,babelHelpers._extends({comment_id:ob,legacy_id:rb.legacyid,like_action:pb,ft_ent_identifier:rb.ftentidentifier,source:qb.source,client_id:m.getNewClientID(),session_id:l.getID()},sb,wb));});}},changeCommentPin:function(ob,pb){var qb=r.getComment(ob);v.getFeedbackTarget(qb.ftentidentifier,function(rb){var sb=ob,tb=rb.pinnedcommenttoken,ub=sb===tb?'UNPIN':'PIN',vb={newcommenttoken:sb,oldcommenttoken:tb,newpinstate:ub,actiontype:u.UFIActionType.TOGGLE_PIN,entidentifier:rb.entidentifier};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[vb]});var wb=y.getURIBuilder().getURI();x.trySend(wb,{comment_token:ob,pin_action:ub});});},addComment:function(ob,pb,qb,rb){v.getFeedbackTarget(ob,function(sb){var tb=qa(rb.target),ub=m.getNewClientID();if(!sb.actorforpost)return;var vb=ma.isDirectionLTR(pb)?'ltr':'rtl',wb={ftentidentifier:ob,body:{text:pb,dir:vb},author:sb.actorforpost,id:ub,islocal:true,ufiinstanceid:rb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:rb.replyid,replycommentparentid:rb.replycommentparentid,attachment:rb.attachedsticker,photo_comment:rb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:la._("a few seconds ago")}},xb={actiontype:u.UFIActionType.SUBSCRIBE_ACTION,actorid:sb.actorforpost,hasviewersubscribed:true,entidentifier:ob},yb={actiontype:u.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:sb.targetfbid};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[wb],actions:[xb,yb]});var zb=null;if(rb.replyid)zb=r.getComment(rb.replyid).fbid;var ac;if(na)ac=na.getCLParamsForTarget(rb.target,zb);if(t.logCommentPost)s.logNewCommentPost(ub,rb.timestamp,{has_photo:!!rb.attachedphoto,has_sticker:!!rb.attachedsticker,is_reply:!!rb.replyid});var bc={};bc[h.PARAMETER_ACTOR]=sb.actorforpost;var cc=aa.getURIBuilder().getURI();x.trySend(cc,babelHelpers._extends({ft_ent_identifier:sb.entidentifier,comment_text:qb,source:rb.source,client_id:ub,session_id:l.getID(),reply_fbid:zb,parent_comment_id:rb.replyid,reply_comment_parent_id:rb.replycommentparentid,rootid:rb.rootid,clp:ac,attached_sticker_fbid:rb.attachedsticker?rb.attachedsticker.fbid:0,attached_photo_fbid:rb.attachedphoto?rb.attachedphoto.fbid:0,feed_context:rb.feedcontext},tb,bc));});},_hasCommentTextChanged:function(ob,pb){return ob.body&&ob.body.text!=pb;},_hasCommentPhotoChanged:function(ob,pb){return (ob||pb)&&!(ob&&pb)||ob&&pb&&ob.fbid!=pb.fbid;},_hasCommentStickerChanged:function(ob,pb){return (ob||pb)&&!(ob&&pb)||ob&&ob.type=="sticker"&&pb&&ob.fbid!=pb.fbid;},editComment:function(ob,pb,qb,rb){var sb=qa(rb.target),tb=r.getComment(ob),ub=this._hasCommentTextChanged(tb,pb)||this._hasCommentPhotoChanged(tb.photo_comment,rb.attachedPhoto)||this._hasCommentStickerChanged(tb.attachment,rb.attachedSticker);tb=n.set(tb,{status:u.UFIStatus.PENDING_EDIT,body:{text:pb},editnux:null,attachment:rb.attachedSticker,photo_comment:rb.attachedPhoto});if(ub)tb=n.set(tb,{originalTimestamp:tb.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:la._("a few seconds ago")}});p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[tb]});v.getFeedbackTarget(tb.ftentidentifier,function(vb){var wb={};wb[h.PARAMETER_ACTOR]=vb.actorforpost;var xb=fa.getURIBuilder().getURI();x.trySend(xb,babelHelpers._extends({ft_ent_identifier:tb.ftentidentifier,comment_text:qb,source:rb.source,comment_id:tb.id,parent_comment_id:tb.parentcommentid,attached_sticker_fbid:rb.attachedSticker?rb.attachedSticker.fbid:0,attached_photo_fbid:rb.attachedPhoto?rb.attachedPhoto.fbid:0},sb,wb));});},translateComment:function(ob,pb){var qb=ga.getURIBuilder().getURI();x.trySend(qb,{ft_ent_identifier:ob.ftentidentifier,comment_ids:[ob.id],source:pb.source});},setHideAsSpam:function(ob,pb,qb){var rb=qa(qb.target),sb=r.getComment(ob),tb={commentid:ob,actiontype:u.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:pb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});v.getFeedbackTarget(sb.ftentidentifier,function(ub){var vb={};vb[h.PARAMETER_ACTOR]=ub.actorforpost;var wb=da.getURIBuilder().getURI();x.trySend(wb,babelHelpers._extends({comment_id:ob,spam_action:pb,ft_ent_identifier:sb.ftentidentifier,source:qb.source},rb,vb));});},removeComment:function(ob,pb){var qb=qa(pb.target),rb=r.getComment(ob),sb={actiontype:u.UFIActionType.DELETE_COMMENT,commentid:ob,islocal:true,oneclick:pb.oneclick};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[sb]});v.getFeedbackTarget(rb.ftentidentifier,function(tb){var ub={};ub[h.PARAMETER_ACTOR]=tb.actorforpost;var vb=ba.getURIBuilder().getURI();x.trySend(vb,babelHelpers._extends({comment_id:rb.id,comment_legacyid:rb.legacyid,ft_ent_identifier:rb.ftentidentifier,one_click:pb.oneclick,source:pb.source,client_id:m.getNewClientID()},qb,ub));});},banUser:function(ob,pb,qb,rb){var sb=qb?oa.BAN:oa.UNDO_BAN;x.trySend('/ajax/ufi/ban_user.php',{page_id:pb,commenter_id:ob.author,action:sb,comment_id:ob.id,client_side:true});},changeReaction:function(ob,pb,qb){v.getFeedbackTarget(ob,function(rb){var sb=[nb(rb,pb)],tb=parseInt(pb,10)!==0;if(rb.hasviewerliked!==tb){var ub=tb?1:-1;sb.push({actiontype:u.UFIActionType.LIKE_ACTION,actorid:rb.actorforpost,hasviewerliked:tb,likecount:(rb.likecount||0)+ub,entidentifier:ob,likesentences:{current:rb.likesentences.alternate,alternate:rb.likesentences.current}});}p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:sb});var vb=qa(qb.target),wb={};wb[h.PARAMETER_ACTOR]=rb.actorforpost;x.trySend(ia.getURIBuilder().getURI(),babelHelpers._extends({client_id:m.getNewClientID(),ft_ent_identifier:ob,reaction_type:pb,root_id:qb.rootid,session_id:l.getID(),source:qb.source},wb,vb));});},changeSubscribe:function(ob,pb,qb){v.getFeedbackTarget(ob,function(rb){var sb=qa(qb.target);if(rb.hasviewersubscribed!==pb){var tb={actiontype:u.UFIActionType.SUBSCRIBE_ACTION,actorid:rb.actorforpost,hasviewersubscribed:pb,entidentifier:ob};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});var ub={};ub[h.PARAMETER_ACTOR]=rb.actorforpost;x.trySend('/ajax/ufi/subscribe.php',babelHelpers._extends({subscribe_action:pb,ft_ent_identifier:ob,source:qb.source,client_id:m.getNewClientID(),rootid:qb.rootid,comment_expand_mode:qb.commentexpandmode},sb,ub));}});},fetchSpamComments:function(ob,pb,qb,rb){x.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ob,viewas:rb,comment_ids:pb,parent_comment_id:qb,source:null});},removePreview:function(ob,pb){var qb=qa(pb.target),rb={commentid:ob.id,actiontype:u.UFIActionType.REMOVE_PREVIEW};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[rb]});x.trySend('/ajax/ufi/remove_preview.php',babelHelpers._extends({comment_id:ob.id,ft_ent_identifier:ob.ftentidentifier,source:pb.source},qb));},typingChange:function(ob,pb){new i(z.getURIBuilder().setString('feedback_id',ob).setEnum('update',pb?'start':'stop').getURI()).send();}};function qa(ob){if(!ob)return {ft:{}};var pb={ft:ja(ob,['ft']).ft};o.addModuleData(pb,ob);return pb;}function ra(ob){j.defaultErrorHandler(ob);}function sa(ob){var pb=ob.request.data;j.defaultErrorHandler(ob);var qb=pb.client_id||pb.comment_id,rb=r.getComment(qb),sb=rb.status===u.UFIStatus.PENDING_EDIT?u.UFIStatus.FAILED_EDIT:u.UFIStatus.FAILED_ADD;rb=n.setDeep(rb,{status:sb,allowRetry:ta(ob),body:{mentionstext:pb.comment_text,mentionsphoto:rb.photo_comment}});p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[rb]});}function ta(ob){var pb=ob.getError();if(ob.isBlockedAction())return false;if(ob.silentError)return true;if(pb===1357012||pb===1357006)return false;return true;}function ua(ob){var pb=ob.request.data,qb=pb.comment_id,rb=r.getComment(qb);rb=n.set(rb,{status:rb.priorstatus||null,priorstatus:undefined});p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[rb]});}function va(ob){var pb=ob.request.data,qb=pb.comment_id,rb=r.getComment(qb);if(pb.like_action===rb.hasviewerliked){var sb=rb.hasviewerliked?-1:1,tb={commentid:qb,actiontype:u.UFIActionType.COMMENT_LIKE,viewerliked:!rb.hasviewerliked,likecount:(rb.likecount||0)+sb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});}j.defaultErrorHandler(ob);}function wa(ob){var pb=ob.request.data,qb=pb.ft_ent_identifier;v.getFeedbackTarget(qb,function(rb){if(rb.hasviewerliked===pb.like_action){var sb=rb.hasviewerliked?-1:1,tb={actiontype:u.UFIActionType.LIKE_ACTION,actorid:rb.actorforpost,hasviewerliked:!rb.hasviewerliked,likecount:(rb.likecount||0)+sb,entidentifier:qb,likesentences:{current:rb.likesentences.alternate,alternate:rb.likesentences.current}};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});}});j.defaultErrorHandler(ob);}function xa(ob){var pb=ob.request.data,qb=pb.ft_ent_identifier;v.getFeedbackTarget(qb,function(rb){if(rb.hasviewersubscribed===pb.subscribe_action){var sb={actiontype:u.UFIActionType.SUBSCRIBE_ACTION,actorid:rb.actorforpost,hasviewersubscribed:!rb.hasviewersubscribed,entidentifier:qb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[sb]});}});j.defaultErrorHandler(ob);}var ya={'/ajax/ufi/ban_user.php':{mode:x.IMMEDIATE,error_handler:ra},'/ajax/ufi/subscribe.php':{mode:x.BATCH_CONDITIONAL,error_handler:xa,batch_if:lb,batch_function:mb},'/ajax/ufi/id_comment_fetch.php':{mode:x.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:x.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:x.IMMEDIATE}},za=aa.getURIBuilder().getURI();ya[za]={mode:x.IMMEDIATE,error_handler:sa};var ab=ba.getURIBuilder().getURI();ya[ab]={mode:x.IMMEDIATE,error_handler:ua};var bb=ca.getURIBuilder().getURI();ya[bb]={mode:x.BATCH_CONDITIONAL,error_handler:va,batch_if:jb,batch_function:mb};var cb=da.getURIBuilder().getURI();ya[cb]={mode:x.IMMEDIATE,error_handler:ua};var db=ea.getURIBuilder().getURI();ya[db]={mode:x.BATCH_CONDITIONAL,error_handler:wa,batch_if:kb,batch_function:mb};var eb=fa.getURIBuilder().getURI();ya[eb]={mode:x.IMMEDIATE,error_handler:sa};var fb=ga.getURIBuilder().getURI();ya[fb]={mode:x.IMMEDIATE};var gb=ha.getURIBuilder().getURI();ya[gb]={mode:x.IMMEDIATE};var hb=ia.getURIBuilder().getURI();ya[hb]={mode:x.IMMEDIATE};var ib=y.getURIBuilder().getURI();ya[ib]={mode:x.IMMEDIATE};x.registerEndpoints(ya);function jb(ob,pb){return ob&&ob.ft_ent_identifier==pb.ft_ent_identifier&&ob.comment_id==pb.comment_id;}function kb(ob,pb){return ob&&ob.ft_ent_identifier==pb.ft_ent_identifier;}function lb(ob,pb){return ob&&ob.ft_ent_identifier==pb.ft_ent_identifier;}function mb(ob,pb){return pb;}function nb(ob,pb){return Object.assign({actiontype:u.UFIActionType.REACTION,actorid:ob.actorforpost,entidentifier:ob.entidentifier},w.getReactionData(ob,pb,ob.actorforpost));}f.exports=pa;},null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUserActions','UFIUIEvents'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={onNewComment:function(m,n,o,p,q,r,s,t){j.addComment(m,q.visibleValue,q.encodedValue,{source:p.source,ufiinstanceid:n,target:r,replyid:s,rootid:p.rootid,attachedphoto:q.attachedPhoto,attachedsticker:q.attachedSticker,feedcontext:p.feedcontext,timestamp:t});i.getFeedbackTarget(m,function(u){if(o)h.inform(k.Comment,{form:o,isinverted:u.isranked||p.isstreaming});if(u.showtopicconversationcreationpivot)h.inform(k.ActionAddComment,{feedback:u,target:r});});}};f.exports=l;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={changeOrderingMode:function(j){return {type:h.STORY.CHANGE_ORDER_MODE,mode:j};},commentsArrived:function(j,k,l){return {type:h.STORY.COMMENTS_ARRIVED,newOffset:j,newLength:k,source:l};},pageInComments:function(j,k,l){return {type:h.STORY.PAGE_IN_COMMENTS,commentID:j,direction:k,nextRange:l};},showReplies:function(j,k){return {type:h.STORY.SHOW_REPLIES,commentID:j,initiatorComment:k};},spamFetched:function(j,k,l,m){return {type:h.STORY.SPAM_FETCHED,ftentidentifier:j,viewas:k,commentIDs:l,parentCommentID:m};},toggleLike:function(j){return {type:h.STORY.TOGGLE_LIKE,target:j};},toggleReplies:function(j){return {type:h.STORY.TOGGLE_REPLIES,commentID:j};}};f.exports=i;},null);
__d('ClickPointIdentifiersDEPRECATED',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(i){return '{"ua_id":"'+i+'"}';}};f.exports=h;},null);
__d('CommentPrelude',['Arbiter','BanzaiODS','ErrorUtils','CSS','Parent','clickRefAction','ex'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(u,v){if(u==='ufi.react'||u==='ufi_mentions_input.react'||u==='ufi_controller'||u==='action_link_bling'||u==='action_link_timeline_bling')return;var w=new Error(n('Deprecated CommentPrelude action %s called from ref %s',v||'unknown',u||'unknown'));w.type='warn';j.reportError(w);i.bumpEntityKey('comment_prelude',u);}function p(u,v,w){o(w,'click');var x=l.byTag(u,'form');if(!x||!k.hasClass(x,'collapsible_comments'))return;m('ufi',u,null,'FORCE');return q(u,v,w);}function q(u,v,w){o(w,'expand');var x=l.byTag(u,'form');if(!x||!k.hasClass(x,'collapsible_comments'))return;r(x,w);if(v!==false){var y=x.add_comment_text_text||x.add_comment_text,z=y.length;if(z)if(!l.byClass(y[z-1],'UFIReplyList')){y=y[z-1];}else if(!l.byClass(y[0],'UFIReplyList')){y=y[0];}else y=null;if(y){y.focus();h.inform('comment/focus',{element:y});}}return false;}function r(u,v){o(v,'uncollapse');if(!u||!k.hasClass(u,'collapsible_comments'))return;var w=k.removeClass.bind(null,u,'collapsed_comments');if(window.ScrollAwareDOM){window.ScrollAwareDOM.monitor(u,w);}else w();}function s(u){var v=u.getAttribute('data-comment-prelude-ref');o(v,'blingbox');var w=l.byTag(u,'form');if(!w||!k.hasClass(w,'collapsible_comments'))return;k.toggleClass(w,'collapsed_comments');}var t={click:p,expand:q,uncollapse:r,onBlingboxClick:s,logRef:o};f.exports=t;},null);
__d('NumberFormat',['NumberFormatConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/(\d{3})(?=\d)/g;function j(m){return (''+m).split('').reverse().join('');}function k(m,n){if(Math.abs(m).toString().length<h.minDigitsForThousandsSeparator)return m.toString();var o=j(m);return j(o.replace(i,'$1'+n));}var l={formatIntegerWithDelimiter:k,formatInteger:function(m){return k(m,h.numberDelimiter);}};f.exports=l;},null);
__d('UFIBlingItem.react',['React','NumberFormat','UFIConfig','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:n.object.isRequired,count:n.number.isRequired,countreduced:n.string,allowText:n.bool,className:n.string,iconClassName:n.string,itemKey:n.string},render:function(){var p=m(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),q=i.formatIntegerWithDelimiter(this.props.count,j.numberDelimiter),r=q,s=this.props.contextArgs.ufiexperiments||{};if(this.props.allowText||s.showSlimUFI)switch(this.props.itemKey){case 'like':if(s.showSlimUFI)r=l._({"Like":"{count} Like","Likes":"{count} Likes"},[l.param('count',s.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':if(s.showSlimUFI)r=l._({"Comment":"{count} Comment","Comments":"{count} Comments"},[l.param('count',s.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':r=l._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[l.param('count',s.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':if(j.reshareedu||s.showSlimUFI)r=l._({"Share":"{count} Share","Shares":"{count} Shares"},[l.param('count',s.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}var t=h.createElement('span',{className:(s.showSlimUFI?"_2u_j":'')+(!s.showSlimUFI?' '+"UFIBlingBoxText":'')},r);if(!s.showSlimUFI){return (h.createElement('span',null,h.createElement('i',{className:p}),t));}else return t;}});f.exports=o;},null);
__d('UFIBlingBox.react',['React','UFIBlingItem.react','UFIConstants','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:m.object.isRequired,'data-ft':m.string,'data-comment-prelude-ref':m.string,comments:m.number,commentsreduced:m.string,likes:m.number,likesreduced:m.string,nfb:m.number,onClick:m.func,permalink:m.string,reactionCount:m.number,reactionCountMap:m.object,reactionCountReduced:m.string,reshares:m.number,resharesreduced:m.string,readOnly:m.bool},render:function(){var o=[],p='',q=this.props.contextArgs.ufiexperiments||{},r=this.props,s=r.likes,t=r.likesreduced,u=r.reactionCount,v=r.reactionCountMap,w=r.reactionCountReduced;if(s||u){var x=v&&v[j.LikeReaction]['default']!==u;o.push(h.createElement(i,{className:o.length>0?"mls":'',contextArgs:this.props.contextArgs,count:x?u:s,countreduced:x?w:t,iconClassName:'UFIBlingBoxLikeIcon',itemKey:x?'reaction':'like',key:'like'}));p+=this.props.likes==1?l._("1 like"):l._({"*":"{count} likes"},[l.param('count',this.props.likes,[0])]);p+=' ';}if(this.props.comments){o.push(h.createElement(i,{className:o.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));p+=this.props.comments==1?l._("1 comment"):l._({"*":"{count} comments"},[l.param('count',this.props.comments,[0])]);p+=' ';}if(this.props.reshares){o.push(h.createElement(i,{className:o.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));p+=this.props.reshares==1?l._("1 share"):l._({"*":"{count} shares"},[l.param('count',this.props.reshares,[0])]);}var y=(!q.showSlimUFI?"UFIBlingBox":'')+(!q.showSlimUFI&&this.props.readOnly?' '+"UFIBlingBoxReadOnly":'')+(!q.showSlimUFI?' '+"uiBlingBox":'')+(!q.showSlimUFI?' '+"feedbackBling":''),z;if(this.props.readOnly){z=h.createElement('span',{className:y,'aria-label':p},o);}else{var aa=this.props.contextArgs.commentajaxify;z=h.createElement('a',{ajaxify:aa,className:y,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':p,onClick:this.props.onClick,rel:aa?'dialog':'ignore'},o);}return z;}});f.exports=n;},null);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIToplevelCommentList','URI','UFIReactionsBling'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=c('UFIReactionsBling').module;o=babelHelpers.inherits(r,i.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);}r.prototype.render=function(){var s=this.props.contextArgs,t=this.props.feedbackTarget,u=j.getTrackingInfo(j.types.BLINGBOX),v=new n(t.permalink).addQueryData({comment_tracking:u}).toString(),w=m.getCommentList(s.ftentidentifier,t.defaultcommentorderingmode).getDisplayedCommentCount(),x=s.hasReactions&&t.displayreactions&&q,y=(function(event){event.preventDefault();if(x&&s.feedbackMode==='expanded'){this.$UFIBling1(false);}else{h.onBlingboxClick(event.currentTarget);this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}).bind(this);if(x){return (i.createElement(q,{commentCount:w,contextArgs:s,'data-comment-prelude-ref':'action_link_bling','data-ft':u,feedback:t,href:v,onCommentClick:y}));}else{var z,aa,ba;if(s.hasReactions){z=t.reactioncount;aa=t.reactioncountmap;ba=t.reactioncountreduced;}return (i.createElement(k,{comments:w,commentsreduced:t.commentcountreduced,contextArgs:s,'data-comment-prelude-ref':'action_link_bling','data-ft':u,likes:t.likecount,likesreduced:t.likecountreduced,nfb:t.nfbcount,onClick:y,permalink:v,reactionCount:z,reactionCountMap:aa,reactionCountReduced:ba,reshares:t.sharecount,resharesreduced:t.sharecountreduced}));}};r.prototype.$UFIBling1=function(s){l.updateStateFields(this.props.UFIInstanceID,'inlineShare',{active:s,toggling:true});};f.exports=r;},null);
__d('UFICommentLink.react',['React','TrackingNodes','cx','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFICommentLink',propTypes:{onClick:n.func,href:n.string,ajaxify:n.string,rel:n.string},getDefaultProps:function(){return {ufiExperiments:{},onClick:k};},render:function(){var p=l._("Comment"),q=l._("Leave a comment"),r='{ "tn": "'+i.encodeTN(i.types.COMMENT_LINK)+'", "type": 24 }';return (h.createElement('a',{className:"comment_link _5yxe",role:'button',href:this.props.href?this.props.href:'#',title:q,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,'data-ft':r},p));}});f.exports=o;},null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFIInstanceState'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFICommentActionLink',propTypes:{ufiInstanceID:k.string.isRequired,contextArgs:k.object.isRequired},render:function(){var m=this.props.contextArgs,n=m.commentajaxify,o=m.commentredirecturi,p=m.ufiexperiments;if(n){return (h.createElement(i,{ufiExperiments:p,ajaxify:n,rel:'dialog'}));}else if(o)return (h.createElement(i,{ufiExperiments:p,href:o}));return (h.createElement(i,{ufiExperiments:p,onClick:(function(event){event.preventDefault();j.updateStateFields(this.props.ufiInstanceID,'inlineShare',{active:false,toggling:true});}).bind(this)}));}});f.exports=l;},null);
__d('UFILikeLink.react',['React','Image.react','TrackingNodes','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFILikeLink',propTypes:{likeAction:n.bool,ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(p){p.preventDefault();this.props.onClick(p);},render:function(){var p=this.props.ufiExperiments,q=this.props.likeAction||p.showSlimUFI?l._("Like"):l._("Unlike"),r=j.getTrackingInfo(this.props.likeAction?j.types.LIKE_LINK:j.types.UNLIKE_LINK),s=this.props.likeAction?l._("Like this"):l._("Unlike this");return (h.createElement('a',{className:"_48-k"+(' '+"UFILikeLink")+(p.showSlimUFI&&!this.props.likeAction?' '+"UFILinkBright":''),href:'#',role:'button','aria-label':s,'aria-live':'polite',onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:(function(t,u){this.props.onKeyDown&&this.props.onKeyDown(t,u);}).bind(this),'data-ft':r},q));}});f.exports=o;},null);
__d('UFILikeActionLink.react',['Arbiter','BanzaiLogger','React','UFIConfig','UFIConstants','UFILikeLink.react','UFIUIEvents','UFIUserActions','UFIReactionsLink'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=c('UFIReactionsLink').module,q=j.PropTypes,r=j.createClass({displayName:'UFILikeActionLink',propTypes:{feedback:q.object.isRequired,contextArgs:q.object.isRequired,entidentifier:q.string.isRequired,source:q.number},_initialHasViewerLiked:false,_mouseDownTime:0,_mouseEnterTime:0,_mouseUpTime:0,onClick:function(event,s){var t=s?n.ActionLinkLike:n.ActionLinkUnlike;h.inform(t,{ft_id:this.props.entidentifier,like_action:s,target:event.target});o.changeReaction(this.props.entidentifier,s?l.LikeReaction:0,{source:this.props.source,target:event.target,rootid:this.props.contextArgs.rootid});event.preventDefault();h.inform('inlineShare/reflow');},render:function(){var s=this.props.feedback,t=!s.hasviewerliked;if(this.props.contextArgs.hasReactions&&s.canviewerreact&&p){return (j.createElement(p,{id:this.props.entidentifier,hasNUX:k.hasReactionsNUX&&!s.hasviewerliked,onActionLikeClick:(function(event){return this.onClick(event,t);}).bind(this),reaction:s.viewerreaction,supportedReactions:s.supportedreactions}));}else{var u=(function(event){this._initialHasViewerLiked=s.hasviewerliked;this._mouseDownTime=0;this._mouseEnterTime=event.timeStamp;this._mouseUpTime=0;}).bind(this),v=(function(event){var y=this._mouseUpTime>0&&this._mouseDownTime>0?this._mouseUpTime-this._mouseDownTime:0;this._log({click_duration:y,final_state:Number(s.hasviewerliked),hover_duration:event.timeStamp-this._mouseEnterTime,initial_state:Number(this._initialHasViewerLiked)});}).bind(this),w=(function(event){this._mouseDownTime=event.timeStamp;}).bind(this),x=(function(event){this._mouseUpTime=event.timeStamp;}).bind(this);return (j.createElement(m,{likeAction:t,onClick:(function(event){return this.onClick(event,t);}).bind(this),onMouseDown:w,onMouseEnter:u,onMouseLeave:v,onMouseUp:x,ufiExperiments:this.props.contextArgs.ufiexperiments}));}},_log:function(s){i.log('LikeButtonTimingLoggerConfig',s);}});f.exports=r;},null);
__d('UFIShareLink.react',['Event','React','ReactDOM','Image.react','TrackingNodes','XUISpinner.react','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=i.PropTypes,s=i.createClass({displayName:'UFIShareLink',componentDidMount:function(){if(!this.props.onShareClick)return;this._clickEvent=h.listen(j.findDOMNode(this),'click',this.props.onShareClick);},componentWillUnmount:function(){if(!this.props.onShareClick)return;this._clickEvent.remove();},_onClick:function(event){event.preventDefault();this.props.onClick&&this.props.onClick(event);},render:function(){var t=o._("Send this to friends or post it on your timeline."),u='{ "tn": "'+l.encodeTN(l.types.SHARE_LINK)+'", "type": 25 }',v=null;if(this.props.rel!=='dialog')v=i.createElement(m,{className:"UFIShareLinkSpinner _1wfk",showOnAsync:true});return (i.createElement('a',babelHelpers._extends({},this.props,{className:q(this.props.className,"share_action_link _5f9b"),onClick:this._onClick,'data-ft':u,title:t}),o._("Share"),v));}});f.exports=s;},null);
__d('UFIShareNowMenuBootloader.react',['BootloadedComponent.react','JSResource','React','UFIShareLink.react'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'UFIShareNowMenuBootloader',getInitialState:function(){return {openOnInit:false,focusOnInit:false,interacted:false};},render:function(){var m=this.state,n=m.openOnInit,o=m.focusOnInit,p=m.interacted,q=this.props,r=q.endpoint,s=q.endpointData,t=q.onShow,u=q.onHide,v=j.createElement(k,{href:'#',onClick:(function(){return this.setState({interacted:true,openOnInit:true});}).bind(this),onFocus:(function(){return this.setState({interacted:true,focusOnInit:true});}).bind(this),onMouseOver:(function(){return this.setState({openOnInit:false,focusOnInit:false,interacted:true});}).bind(this)});if(p)return (j.createElement(h,{bootloadLoader:i('UFIShareNowMenu.react'),bootloadPlaceholder:v,endpoint:r,endpointData:s,onShow:t,onHide:u,openOnInit:n,focusOnInit:o}));return v;}});f.exports=l;},null);
__d('UFIShareActionLink.react',['React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI','UFIInstanceState'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIShareActionLink',propTypes:{ufiInstanceID:m.string,shareURI:m.string,shareRel:m.string,shareNowMenuURI:m.string},render:function(){var o=this.props,p=o.ufiInstanceID,q=o.shareURI,r=o.shareRel,s=o.shareNowMenuURI,t=!this._getInlineShareProp('active')&&s,u={ufi_id:p};if(!t)return (h.createElement(j,{href:'#',ajaxify:new k(q).addQueryData(u),rel:r,onShareClick:(function(event){if(this._getInlineShareProp('loaded')){l.updateStateFields(p,'inlineShare',{active:true,toggling:true});event.kill();}}).bind(this)}));return (h.createElement(i,{endpoint:s,endpointData:u}));},_getInlineShareProp:function(o){var p=l.getKeyForInstance(this.props.ufiInstanceID,'inlineShare');return !!(p&&p[o]);}});f.exports=n;},null);
__d('UFISubscribeLink.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?i._("Turn On Notifications"):i._("Turn Off Notifications"),m=this.props.subscribeAction?i._("Get a notification whenever someone comments."):i._("Stop getting notifications when someone comments.");return (h.createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:m,onClick:this.props.onClick},l));}});f.exports=k;},null);
__d('ProfileBrowserLink',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='/ajax/browser/dialog/',j='/browse/',k=function(m,n,o){return new h(m+n).setQueryData(o);},l={constructPageURI:function(m,n){return k(j,m,n);},constructDialogURI:function(m,n){return k(i,m,n);}};f.exports=l;},null);
__d('ProfileBrowserTypes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={LIKES:'likes',FRIEND_CHECKINS:'friendcheckins',FRIENDED_FANS_OF:'friended_fans_of',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',TOPIC_CONVERSATION_PARTICIPANTS:'topic_conversation_participants'};f.exports=h;},null);
__d('UFITimelineBlingBox.react',['ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=n._("See who likes this"),t=j.createElement('a',{ajaxify:r.dialog,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:r.page,key:'like',rel:'dialog',role:'button',title:s},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=n._("Show comments"),v=j.createElement('a',{'aria-label':u,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:'#',key:'comment',onClick:this.props.commentOnClick},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));q.push(v);}if(this.props.reshares){var w=n._("Show shares"),x=this._getShareViewURI(),y=j.createElement('a',{ajaxify:x.dialog,'aria-label':w,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:x.page,key:'reshare',rel:'async'},j.createElement(k,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));q.push(y);}return (j.createElement('span',null,q));},_getItemClassName:function(q){return (q.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=i.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=h.constructDialogURI(q,r),t=h.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});f.exports=p;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null);
__d('UFIPrivateReplyLink.react',['ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=j.Status,p=j.Type,q=k.PropTypes,r=k.createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},statics:{willRender:function(s,t){if(!s)return false;if(s.hasReplyPermission&&this.props.actorID===s.pageID)return true;if(s.status===o.ALREADY_REPLIED)return true;return false;}},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===o.REPLYABLE){return this._renderMessageLink();}else if(s.status===o.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===o.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=h.create(m.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (k.createElement(i,{href:s,rel:'dialog'},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case o.EXPIRED:s=n._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[n['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case o.NOT_USER_CREATED:s=n._("Pages can't send private messages to other Pages.");break;}return (k.createElement('span',null,k.createElement(l,{shade:'light','aria-label':s,'data-hover':s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (k.createElement(i,{href:this.props.context.permalink||'#'},n._("See Response")));},_renderIndicator:function(){return (k.createElement('span',null,k.createElement(l,{shade:'light'},n._("Page responded privately"))));},_getLabel:function(){return n._("Message");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case p.COMMENT_PAGE_POST:case p.COMMENT_WALL_POST:case p.COMMENT_REVIEW:return 'comments';case p.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=r;},null);
__d('UFIActionLinkController',['Arbiter','BootloadedComponent.react','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBling.react','UFICentralUpdates','UFICommentActionLink.react','UFICommentLink.react','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILikeActionLink.react','UFIShareActionLink.react','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelCommentList','UFIUserActions','UFIPrivateReplyLink.react','URI','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){if(c.__markCompiled)c.__markCompiled();function ma(oa,pa,qa){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ra=o.scry(oa,pa)[0];if(ra){var sa=document.createElement('span');ra.parentNode.replaceChild(sa,ra);sa.appendChild(ra);if(typeof qa==='function')qa(sa);}else var ta=h.subscribe('PhotoSnowlift.DATA_CHANGE',function(){h.unsubscribe(ta);ma(oa,pa,qa);},h.SUBSCRIBE_NEW);}var na=function(oa,pa,qa,ra,sa){this._id=pa.ftentidentifier;this._ftFBID=qa.targetfbid;this._source=pa.source;this._contextArgs=pa;this._ufiRoot=oa;this._ufiInstanceID=ra;!(typeof sa==='function')?la(0):undefined;this._visibilityToggler=sa;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(qa.viewercanlike||qa.hasviewerliked)this._attemptInitializeLike();if(qa.cancomment)this._attemptInitializeComment();if(qa.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();if(y.reactActionLinks){this._attemptInitializeInlineSearchFeedback();this._attemptInitializeActorSelector();}v.subscribe('feedback-updated',(function(ta,ua){var va=ua.updates;if(this._id in va)this.render();}).bind(this));v.subscribe('feedback-id-changed',(function(ta,ua){var va=ua.updates;if(this._id in va)this._id=va[this._id];}).bind(this));v.subscribe('instance-updated',(function(ta,ua){var va=ua.updates[this._ufiInstanceID];if(va&&va.inlineShare)this.render();}).bind(this));};Object.assign(na.prototype,{_attemptInitializeBling:function(){ma(this._ufiRoot,'^form .uiBlingBox',(function(oa){this._blingRoot=oa;if(this._dataReady)this._renderBling();}).bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var oa=o.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(oa){var pa=o.scry(oa,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=!!pa;var qa=o.scry(oa,'.fbTimelineFeedbackComments')[0];this._enableShowComments=!!qa;}this._blingTimelineRoot=oa;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeInlineSearchFeedback:function(){ma(this._ufiRoot,'^form .inline_feedback',(function(oa){this._inlineSearchRoot=oa;if(this._dataReact)this._renderInlineSearchFeedback();}).bind(this));},_attemptInitializeActorSelector:function(){ma(this._ufiRoot,'^form .actor_selector',(function(oa){this._actorSelectorRoot=oa;if(this._dataReact)this._renderActorSelector();}).bind(this));},_attemptInitializeLike:function(){ma(this._ufiRoot,'^form .like_link',(function(oa){this._likeRoot=oa;if(this._dataReady)this._renderLike();}).bind(this));},_attemptInitializeComment:function(){ma(this._ufiRoot,'^form .comment_link',(function(oa){this._commentRoot=oa;if(this._dataReady)this._renderComment();}).bind(this));},_attemptInitializeSubscribe:function(){ma(this._ufiRoot,'^form .unsub_link',(function(oa){this._subscribeRoot=oa;if(this._dataReady)this._renderSubscribe();}).bind(this));},_attemptInitializeMessageReply:function(){ma(this._ufiRoot,'^form .message_reply_action_link',(function(oa){this._messageReplyRoot=oa;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}).bind(this));},_attemptInitializeShare:function(){ma(this._ufiRoot,'^form .share_action_link',(function(oa){this._shareRoot=oa;l.addClass(this._shareRoot,"share_root");var pa=o.scry(this._shareRoot,'.share_action_link')[0];if(pa){this._shareURI=pa.getAttribute('href');this._shareRel=pa.getAttribute('rel');this._shareNowMenuURI=m.get(pa,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}).bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();if(y.reactActionLinks){this._renderInlineSearchFeedback();this._renderActorSelector();}},_renderBling:function(){if(this._blingRoot)aa.getFeedbackTarget(this._id,(function(oa){this._blingBox=s.render(this.getBling(oa),this._blingRoot);}).bind(this));},getBling:function(oa){return (r.createElement(u,{contextArgs:this._contextArgs,feedbackTarget:oa,onCommentVisibilityChanged:this._visibilityToggler,UFIInstanceID:this._ufiInstanceID}));},_renderTimelineBling:function(){if(this._blingTimelineRoot)aa.getFeedbackTarget(this._id,(function(oa){s.render(this.getTimelineBling(oa),this._blingTimelineRoot);}).bind(this));},getTimelineBling:function(oa){var pa=t.getTrackingInfo(t.types.BLINGBOX),qa=j.getUserActionID(j.types.TIMELINE_SEE_LIKERS),ra=function(event){var ta=q.byTag(event.target,'form');k.uncollapse(ta,'action_link_timeline_bling');var ua=o.scry(ta,'a.UFIPagerLink');if(ua.length)ua[0].click();event.preventDefault();},sa=ga.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount();return (r.createElement(fa,{comments:sa,commentsreduced:oa.commentcountreduced,commentOnClick:ra,contextArgs:this._contextArgs,'data-ft':pa,'data-gt':qa,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:oa.likecount,likesreduced:oa.likecountreduced,reshares:oa.sharecount,resharesreduced:oa.sharecountreduced,actorid:oa.actorid}));},_renderInlineSearchFeedback:function(){if(this._inlineSearchRoot)s.render(this.getInlineSearchFeedback(),this._inlineSearchRoot);},getInlineSearchFeedback:function(){return (r.createElement('div',null,r.createElement(i,babelHelpers._extends({bootloadPlaceholder:r.createElement('div',null),bootloadLoader:p('InlineFeedback.react')},this._contextArgs.inlineSearchFeedbackConfig))));},_renderActorSelector:function(){if(this._actorSelector)s.render(this.getActorSelector(),this._actorSelectorRoot);},getActorSelector:function(){var oa=this._contextArgs.actorSelectorConfig,pa=oa.module,qa=oa.props;qa.nuxHoverContext=q.byTag(event.target,'form');return (r.createElement(pa,qa));},_renderLike:function(){if(this._likeRoot)aa.getFeedbackTarget(this._id,(function(oa){s.render(this.getLike(oa),this._likeRoot);}).bind(this));},getLike:function(oa){return (r.createElement(ca,{feedback:oa,contextArgs:this._contextArgs,entidentifier:this._id,source:this._source}));},_renderComment:function(){if(this._commentRoot)this._commentLink=s.render(this.getComment(),this._commentRoot);},getComment:function(){return (r.createElement(w,{ufiInstanceID:this._ufiInstanceID,contextArgs:this._contextArgs}));},_renderMessageReply:function(){if(this._messageReplyRoot)aa.getFeedbackTarget(this._id,(function(oa){this._messageReplyLink=null;var pa=this.getMessageReply(oa);if(pa)this._messageReplyLink=s.render(pa,this._messageReplyRoot);if(!this._messageReplyLink||!s.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';n.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}).bind(this));},getMessageReply:function(oa){if(oa.messagereplycontext)return (r.createElement(ia,{actorID:oa.actorforpost,activityID:this._id,context:oa.messagereplycontext}));return null;},_renderSubscribe:function(){if(this._subscribeRoot)aa.getFeedbackTarget(this._id,(function(oa){this._subscribeLink=s.render(this.getSubscribe(oa),this._subscribeRoot);}).bind(this));},getSubscribe:function(oa){var pa=!oa.hasviewersubscribed,qa=(function(event){ha.changeSubscribe(this._id,pa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:oa.commentexpandmode});event.preventDefault();}).bind(this);return (r.createElement(ea,{onClick:qa,subscribeAction:pa}));},_renderShare:function(){if(this._shareRoot&&this._shareURI)this._shareLink=s.render(this.getShare(),this._shareRoot);},getShare:function(){return (r.createElement(da,{ufiInstanceID:this._ufiInstanceID,shareURI:this._shareURI,shareRel:this._shareRel,shareNowMenuURI:this._shareNowMenuURI}));},_setInlineShareActive:function(oa){ba.updateStateFields(this._ufiInstanceID,'inlineShare',{active:oa,toggling:true});},_isRenderingOnTimeline:function(){if(this._source===z.UFIFeedbackSourceType.PROFILE){var oa=o.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return oa.length>0;}return false;}});f.exports=na;},null);
__d('PageAdminSignatureSettings',['Arbiter','AdminSignatureConstants','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.$PageAdminSignatureSettings1();if(!!m)this.$PageAdminSignatureSettings2=m;if(l instanceof k){!!!m?j(0):undefined;this.$PageAdminSignatureSettings3(l);}else if(l!==null&&l!==undefined){this.$PageAdminSignatureSettings4=l.isValid;if(!this.$PageAdminSignatureSettings4)return;this.$PageAdminSignatureSettings5=l.signature;this.$PageAdminSignatureSettings6=l.shouldAttachToPost;this.$PageAdminSignatureSettings7=l.shouldAttachToComment;this.$PageAdminSignatureSettings8=l.shouldAttachToMessage;this.$PageAdminSignatureSettings9=l.everPromptedUser;this.$PageAdminSignatureSettings10=l.pageID;this.$PageAdminSignatureSettings11=l.userID;}h.subscribe(i.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,(function(n,o){return this.$PageAdminSignatureSettings12(n,o);}).bind(this));h.subscribe(i.EVENT_ADMIN_SIGNATURE_PROMPTED,(function(n,o){return this.$PageAdminSignatureSettings13(n,o);}).bind(this));}k.prototype.getIsValid=function(){'use strict';return this.$PageAdminSignatureSettings4;};k.prototype.getIsValidWithActor=function(){'use strict';return this.getIsValid()&&this.$PageAdminSignatureSettings2!==null&&this.$PageAdminSignatureSettings2===this.$PageAdminSignatureSettings10;};k.prototype.getPageID=function(){'use strict';return this.$PageAdminSignatureSettings10;};k.prototype.getUserID=function(){'use strict';return this.$PageAdminSignatureSettings11;};k.prototype.getSignature=function(){'use strict';return this.$PageAdminSignatureSettings5;};k.prototype.getShouldAttachToPost=function(){'use strict';return this.$PageAdminSignatureSettings6;};k.prototype.getShouldAttachToComment=function(){'use strict';return this.$PageAdminSignatureSettings7;};k.prototype.getShouldAttachToMessage=function(){'use strict';return this.$PageAdminSignatureSettings8;};k.prototype.getEverPromptedUser=function(){'use strict';return this.$PageAdminSignatureSettings9;};k.prototype.$PageAdminSignatureSettings1=function(){'use strict';this.$PageAdminSignatureSettings9=false;this.$PageAdminSignatureSettings10="";this.$PageAdminSignatureSettings7=false;this.$PageAdminSignatureSettings8=false;this.$PageAdminSignatureSettings6=false;this.$PageAdminSignatureSettings5="";this.$PageAdminSignatureSettings11="";this.$PageAdminSignatureSettings4=false;this.$PageAdminSignatureSettings2=null;};k.prototype.$PageAdminSignatureSettings3=function(l){'use strict';this.$PageAdminSignatureSettings9=l.$PageAdminSignatureSettings9;this.$PageAdminSignatureSettings10=l.$PageAdminSignatureSettings10;this.$PageAdminSignatureSettings7=l.$PageAdminSignatureSettings7;this.$PageAdminSignatureSettings8=l.$PageAdminSignatureSettings8;this.$PageAdminSignatureSettings6=l.$PageAdminSignatureSettings6;this.$PageAdminSignatureSettings5=l.$PageAdminSignatureSettings5;this.$PageAdminSignatureSettings11=l.$PageAdminSignatureSettings11;this.$PageAdminSignatureSettings4=l.$PageAdminSignatureSettings4;};k.prototype.$PageAdminSignatureSettings13=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11)return;this.$PageAdminSignatureSettings9=true;};k.prototype.$PageAdminSignatureSettings12=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11||m.pageID!==this.$PageAdminSignatureSettings10)return;switch(m.settingChanged){case i.SETTING_ATTACH_TO_POST:this.$PageAdminSignatureSettings6=m.newValue;break;case i.SETTING_ATTACH_TO_MESSAGE:this.$PageAdminSignatureSettings8=m.newValue;break;case i.SETTING_ATTACH_TO_COMMENT:this.$PageAdminSignatureSettings7=m.newValue;break;default:j(0);}};f.exports=k;},null);
__d('ScrollSuppressor',['ScrollAwareDOM'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=0,j=null,k={start:function(){if(j)return;j=h.subscribe('scroll',function(){if(i>0){i-=1;return false;}return true;});},stop:function(){if(j){h.unsubscribe(j);j=null;}},increment:function(){i+=1;}};f.exports=k;},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")};},null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j(h));l=k&&k.prototype;function m(n,o){'use strict';l.constructor.call(this);this.uploadURIString=n;this.data=o;}m.prototype.handlePaste=function(event){'use strict';var n=m.getImages(event);for(var o=0;o<n.length;++o){var p=new FormData();p.append('pasted_file',n[o]);var q=new i();q.setURI(this.uploadURIString).setData(this.data).setRawData(p).setHandler((function(r){this.inform('upload_success',r);}).bind(this)).setErrorHandler((function(r){this.inform('upload_error',r);}).bind(this)).setAbortHandler((function(r){this.inform('upload_error',r);}).bind(this));this.inform('upload_start');q.send();break;}};m.getImages=function(event){'use strict';if(!event.clipboardData)return [];var n=event.clipboardData.items;if(!n)return [];var o,p=[];for(var q=0;q<n.length;++q){o=n[q];if(o.kind==='string')return [];if(o.kind==='file'&&o.type.indexOf('image/')!==-1)p.push(o.getAsFile());if(o.kind==='blob')p.push(o.blob);}return p;};f.exports=m;},null);
__d("InputCaretUtility",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={moveCaretToBeginning:function(i){if(typeof i.selectionStart==="number"){i.selectionStart=i.selectionEnd=0;}else if(i.createTextRange!==undefined){i.focus();var j=i.createTextRange();j.collapse(false);j.select();}},delayedMoveCaretToBeginning:function(i){setTimeout(function(){return h.moveCaretToBeginning(i);});}};f.exports=h;},null);
__d("XPagesAdminSignatureSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/settings\/",{});},null);
__d("XPagesAdminSignaturePromptDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/prompt\/",{__asyncDialog:{type:"Int"}});},null);
__d('PageAdminSignatureMonitor',['Arbiter','AsyncRequest','AdminSignatureConstants','DOM','DOMQuery','Event','InputCaretUtility','PageAdminSignatureSettings','XPagesAdminSignatureSettingsController','XPagesAdminSignaturePromptDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={registerComposerControlForSignature:function(s,t,u,v){if(!t||!t.isValid)return;var w=this._getUnderlyingTextControl(s),x=new o(t,u);m.listen(w,'focus',(function(){this._handleInputFieldFocusForSignature(w,x,x.getShouldAttachToPost(),function(y){return y.value;},function(y,z){if(v)z='\n\n'.concat(z);k.setAttributes(y,{value:z});n.delayedMoveCaretToBeginning(y);});}).bind(this));},handleReactInputFieldFocusForSignature:function(s,t,u){this._handleInputFieldFocusForSignature(s,t,u,function(v){return v.hasEnteredText();},function(v,w){return v.setSignature(w);});},prepareConfirmationDialog:function(s,t,u){s.subscribe('confirm',(function(){s.hide();this._notifyPromptConfirmation(t,u,true);}).bind(this));s.subscribe('cancel',(function(){this._notifyPromptConfirmation(t,u,false);}).bind(this));},_promptForAutoSignature:function(s){h.inform(j.EVENT_ADMIN_SIGNATURE_PROMPTED,{userID:s.getUserID()});var t=q.getURIBuilder().getURI();new i().setURI(t).setData({pageID:s.getPageID()}).send();},_handleInputFieldFocusForSignature:function(s,t,u,v,w){if(!t||!t.getIsValidWithActor())return;if(!t.getEverPromptedUser()){this._promptForAutoSignature(t);}else if(u&&!v(s))w(s,t.getSignature());},_notifyPromptConfirmation:function(s,t,u){var v=p.getURIBuilder().getURI();new i().setURI(v).setData({pageID:s,signatureOption:j.SETTING_EVER_PROMPTED,signatureOptionValue:u}).send();this._aribiterNotifyPromptConfirmation(s,t,u);},_getUnderlyingTextControl:function(s){return l.find(s,'textarea');},_aribiterNotifyPromptConfirmation:function(s,t,u){var v=[j.SETTING_ATTACH_TO_POST,j.SETTING_ATTACH_TO_COMMENT,j.SETTING_ATTACH_TO_MESSAGE];v.forEach(function(w){h.inform(j.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,{pageID:s,userID:t,settingChanged:w,newValue:u});});}};f.exports=r;},null);
__d('UFIActorIcon.react',['React','Image.react','UFIConfig','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'UFIActorIcon',render:function(){var m=h.createElement(i,this.props);if(j.rAI)m=h.createElement('div',{className:"_4cd"},m);return m;}});f.exports=l;},null);
__d('UFIBusinessActorIcon.react',['AppUserRoleConstants.brands','React','cx','joinClasses','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=/[^\u4e00-\u9eff]+/,o=i.createClass({displayName:'UFIBusinessActorIcon',propTypes:{firstName:m.string.isRequired,lastName:m.string.isRequired,classNames:m.string,textClassNames:m.string,businessRole:m.oneOf(l(h))},render:function(){var p=this._getInitials(this.props.firstName,this.props.lastName),q=this.props.businessRole===h.ADMIN;return (i.createElement('div',{className:k(this.props.classNames,"_1rpl")},i.createElement('div',{className:k(this.props.textClassNames,q?"_1rpm":null)},p)));},_getInitials:function(p,q){if(!(typeof p==='string')||!(typeof q==='string'))return '?';var r=p.trim().charAt(0)+q.trim().charAt(0);if(this._isLatinLanguage(r)){r=r.toUpperCase();}else r=q.trim().charAt(0);return r;},_isLatinLanguage:function(p){if(!(typeof p==='string'))return false;var q=p.replace(/[\s.-]+/g,'');return n.test(q);}});f.exports=o;},null);
__d('UFIActorIconContainer.react',['React','ShortProfiles','UFIActorIcon.react','UFIBusinessActorIcon.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=h.PropTypes,p=h.createElement(l,{size:'large'}),q=h.createClass({displayName:'UFIActorIconContainer',propTypes:{actorID:o.string.isRequired,className:o.string},getInitialState:function(){return {actor:null};},componentWillMount:function(){this._fetchActorData();},componentDidUpdate:function(r){if(this.props.actorID!==r.actorID)this._fetchActorData();},_fetchActorData:function(){i.get(this.props.actorID,(function(r){return this.setState({actor:r});}).bind(this));},render:function(){var r=this.state.actor;if(!r)return p;var s=n("img UFIActorImage _54ru",this.props.className);return (r.isBusinessPersona?h.createElement(k,{classNames:s,firstName:r.firstName,lastName:r.lastName,textClassNames:"UFIBusinessActorIconText"}):h.createElement(j,{alt:r.name,className:s,src:r.thumbSrc}));}});f.exports=q;},null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={START:'start',STOP:'stop'},k=10*1000;function l(m,n,o){this.$AbstractCommentLiveTypingController1=m;this.$AbstractCommentLiveTypingController2=n;this.$AbstractCommentLiveTypingController3=o;this.$AbstractCommentLiveTypingController4=null;this.$AbstractCommentLiveTypingController5=false;this.$AbstractCommentLiveTypingController6=0;this.$AbstractCommentLiveTypingController7=null;i(this.destroy.bind(this));}l.prototype.destroy=function(){this.$AbstractCommentLiveTypingController4&&this.$AbstractCommentLiveTypingController4.destroy();this.$AbstractCommentLiveTypingController4=null;this.$AbstractCommentLiveTypingController5=false;this.$AbstractCommentLiveTypingController6=0;this.$AbstractCommentLiveTypingController7=null;};l.prototype.bootloadPublisherModule=function(m){throw new Error(h('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};l.prototype.$AbstractCommentLiveTypingController8=function(m){var n=new m(this.$AbstractCommentLiveTypingController1,this.$AbstractCommentLiveTypingController2,this.$AbstractCommentLiveTypingController3),o=Date.now(),p=this.$AbstractCommentLiveTypingController6;if(p&&p+k>=o){var q=this.$AbstractCommentLiveTypingController7;if(q===j.START){n.handleStartEvent();}else if(q===j.STOP)n.handleStopEvent();}this.$AbstractCommentLiveTypingController4=n;};l.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController5||!this.$AbstractCommentLiveTypingController1)return;this.$AbstractCommentLiveTypingController5=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};l.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController7=j.START;this.$AbstractCommentLiveTypingController6=Date.now();if(this.$AbstractCommentLiveTypingController4){this.$AbstractCommentLiveTypingController4.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController5)this.$AbstractCommentLiveTypingController9();};l.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController7=j.STOP;this.$AbstractCommentLiveTypingController6=Date.now();if(this.$AbstractCommentLiveTypingController4){this.$AbstractCommentLiveTypingController4.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController5)this.$AbstractCommentLiveTypingController9();};f.exports=l;},null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n,o){k.constructor.call(this,m,n,o);}l.prototype.bootloadPublisherModule=function(m){i.loadModules(["UFIAddCommentLiveTypingPublisher"],m);};l.prototype.attemptPublishStartEvent=function(){k.attemptPublishStartEvent.call(this);};l.prototype.attemptPublishStopEvent=function(){k.attemptPublishStopEvent.call(this);};f.exports=l;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});},null);
__d('dotAccess',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.split('.');do{var m=l.shift();i=i[m]||k&&(i[m]={});}while(l.length&&i);return i;}f.exports=h;},null);
__d('UFIAddComment.react',['ActorURI','Arbiter','AsyncRequest','Bootloader','ClipboardPhotoUploader','getActiveElement','Event','Keys','Link.react','LitestandStoryInsertionStatus','PageAdminSignatureMonitor','React','ReactDOM','ReactLayeredComponentMixin','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachedPhotoPreview.react','UFIAttachPhotoSection.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','cx','dotAccess','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){if(c.__markCompiled)c.__markCompiled();var na=s.PropTypes,oa=la._("Write a comment..."),pa=la._("Write a reply..."),qa="fcg fss UFICommentTip",ra=19,sa='/ajax/ufi/upload/',ta='/ajax/ufi/sticker_preview/';function ua(){return !!da.canPublishLive;}var va=s.createClass({displayName:'UFIAddComment',mixins:[u],propTypes:{contextArgs:na.object.isRequired,viewerActorID:na.string.isRequired,allowPhotoAttachments:na.bool,allowStickerAttachments:na.bool,attachedSticker:na.object,editingComment:na.object.isRequired,hide:na.bool,initialData:na.object,isEditing:na.bool,isFirstComponent:na.bool,isLastComponent:na.bool,isSnowlift:na.bool,isQAndA:na.bool,mentionsDataSource:na.object,replyCommentID:na.string,showSendOnEnterTip:na.bool,subtitle:na.any,targetID:na.string,withoutSeparator:na.bool,markViewerHasInteracted:na.func},contextTypes:{dispatch:na.func},getInitialState:function(){var wa=ka(this.props,'editingComment.photo_comment');return {attachedPhoto:wa||null,attachedSticker:this.props.attachedSticker||null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing};},_onKeyDown:function(event){if(this.props.isEditing&&n.getKeyCode(event.nativeEvent)===o.ESC)this.context.dispatch(z.cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){v.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var wa=m();if(n.getKeyCode(event.nativeEvent)===o.ESC)wa.blur();},_onContentChange:function(wa){if(wa){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();},_handleUnsavedChanges:function(){var wa=b.PageTransitions;if(wa){var xa=ha.getNextURI(),ya=wa.getMostRecentURI();if(xa.getQueryData().hasOwnProperty('theater')||ya.getQueryData().hasOwnProperty('theater')||xa.getQueryData().hasOwnProperty('sdialog')||w.isPermalinkURI(xa)||w.isPermalinkURI(ya))return;var za=b.DialogNavigationStack;if(za&&za.isActiveURI(xa))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return la._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout((function(){if(this.isMounted())this.setState({isFocused:false});}).bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var wa=new l(sa,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[wa.subscribe('upload_start',this._prepareForAttachedPhotoPreview),wa.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),wa.subscribe('upload_success',(function(xa,ya){this._onPhotoUploadComplete(ya);}).bind(this))];wa.handlePaste(event);},_onEnterSubmit:function(wa,event){var xa=this.state.attachedPhoto||this.state.attachedSticker,ya=this.props.isEditing||xa;if(this.state.isLoadingPhoto){return false;}else if(!wa.encodedValue.trim()&&!ya)return false;wa.encodedValue=wa.encodedValue.trim();if(xa){wa.attachedPhoto=this.state.attachedPhoto;wa.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{wa.attachedPhoto=null;wa.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(z.submitEdit(this.props.editingComment,wa,event.target));}else this.context.dispatch(z.submitNew(wa,event.target,this.props.replyCommentID));this._attemptPublishStopEvent();return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(wa){wa.unsubscribe();});},_getFeedbackTarget:function(wa){return wa.contextArgs.ftentidentifier;},_initTypingEventController:function(){if(!this._typingEventController&&ua())this._typingEventController=new aa(this._getFeedbackTarget(this.props),this.props.replyCommentID,this.props.viewerActorID);},_attemptPublishStartEvent:function(){if(!ua())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function(){if(!ua())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=q.registerBlocker((function(){return this.state.isCommenting;}).bind(this));},_destroyLiveTypingController:function(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function(wa){var xa=this._getFeedbackTarget(this.props),ya=this._getFeedbackTarget(wa);if(ya!==xa||this.props.replyCommentID!==wa.replyCommentID||this.props.viewerActorID!==wa.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)i.unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)i.unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function(){var wa={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&da.shouldShowStickerNUX){var xa=ia.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new j(xa).send();if(this.state.renderStickerNUX===null)k.loadModules(["XUIAmbientNUX.react"],(function(za){wa.renderStickerNUX=(function(){return {ambientNUX:s.createElement(za,{contextRef:(function(){return this.refs.sticker_button;}).bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},la._("Now you can comment with a sticker!"))};}).bind(this);}).bind(this));da.shouldShowStickerNUX=false;wa.stickerNUXVisible=true;}var ya=this.props.contextArgs.pagesAdminSignatureSettings;if(ya)r.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,ya,ya.getShouldAttachToComment());this.setState(wa);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},_setFileInput:function(wa,xa){this.setState({fileInput:wa,fileUploader:xa});},render:function(){var wa=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,xa=null;if(this.props.subtitle){xa=s.createElement('span',{className:qa},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){xa=s.createElement('span',{className:qa},la._("{cancel}",[la.param('cancel',s.createElement(p,{onClick:(function(){return (this.context.dispatch(z.cancel()));}).bind(this)},la._("Cancel")))]));}else if(this.props.isEditing){xa=s.createElement('span',{className:qa},la._("Press Esc to {cancel}.",[la.param('cancel',s.createElement(p,{onClick:(function(){return (this.context.dispatch(z.cancel()));}).bind(this)},la._("cancel")))]));}else if(this.props.showSendOnEnterTip)xa=s.createElement('span',{className:qa},la._("Press Enter to post."));var ya=null,za=null,ab=this.state.attachedPhoto||this.state.attachedSticker,bb=null;if(this.props.allowStickerAttachments&&!ab)za=s.createElement(ga,{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){bb=this._onPaste;ya=s.createElement(ca,{getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,onPhotoUploadComplete:this._onPhotoUploadComplete,setFileInput:this._setFileInput,attachment:ab});}var cb=x.getTrackingInfo(x.types.ADD_COMMENT_BOX),db=s.createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},s.createElement(y,{actorID:this.props.viewerActorID,className:!wa?"hidden_elem":''})),eb=ma((this.props.hide?"noDisplay":'')+(' '+"UFIRow")+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),fb;if(!!this.props.replyCommentID){fb=pa;}else if(this.props.isQAndA){fb=la._("Ask a question...");}else if(this.props.source===ea.UFIFeedbackSourceType.TOPIC_CONVERSATION){fb=la._("Discuss this topic...");}else fb=oa;var gb=this.props.contextArgs.viewoptionstypeobjects,hb=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)xa=null;var ib=s.createElement(ba,{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedPhotoPreview:this._onRemoveAttachedPhotoPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto}),jb=this.props.allowStickerAttachments?ma("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",kb=this.props.contextArgs.mentionsinput,lb=kb.inputComponent,mb=kb.viewComponent,nb=kb.viewProps;return (s.createElement('div',{className:eb,onKeyDown:this._onKeyDown,'data-ft':cb},s.createElement(fa,{className:jb},db,s.createElement('div',{className:'UFICommentContainer'},s.createElement('div',{className:'UFIInputContainer'},s.createElement(lb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:fb,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:mb,viewProps:nb,viewOptionsTypeObjects:gb,viewOptionsTypeObjectsOrder:hb,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:da.showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:ua()?this._onContentChange:null,onPaste:bb,showBusinessTypeahead:this.props.contextArgs.showBusinessTypeahead,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),s.createElement('div',{className:"UFICommentAttachmentButtons clearfix"},ya,za)),ib,xa))));},componentDidUpdate:function(wa,xa,ya){if(!xa.attachedPhoto&&this.state.attachedPhoto||!xa.attachedSticker&&this.state.attachedSticker||!xa.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(wa.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=i.subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,(function(wa){this.refs.mentionsinput.focus();}).bind(this));i.inform('finishedMounting'+this.props.contextArgs.ftentidentifier);if(this.props.isSnowlift)this._remixedImageToken=i.subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,(function(wa,xa){var event={clipboardData:{items:[xa]}};this._onPaste(event);}).bind(this));}},insertMention:function(wa){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(wa);},_getPhotoUploadData:function(){var wa=this.props.viewerActorID,xa={profile_id:wa,target_id:this.props.targetID,source:ra};xa[h.PARAMETER_ACTOR]=wa;return xa;},_onPhotoUploadComplete:function(wa){if(!this.state.isLoadingPhoto)return;var xa=wa.getPayload();if(xa&&xa.fbid){this.setState({attachedPhoto:xa,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(wa){if(!this.state.isLoadingPhoto)return;var xa=wa.getPayload();if(xa&&xa.fbid){this.setState({attachedSticker:xa,isLoadingPhoto:false});}else{k.loadModules(["Dialog"],function(ya){var za=la._("Sticker Failed"),ab=la._("There was a problem attaching the sticker.");new ya().setTitle(za).setBody(ab).setButtons(ya.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(wa,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(wa);return;}this.sendSticker(wa,event);},_prepareForAttachedStickerPreview:function(wa){this.setState({attachedSticker:null,isLoadingPhoto:true});new j(ta).setData({sticker_id:wa}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(wa,event){var xa={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:wa}};this.context.dispatch(z.submitNew(xa,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function(wa){k.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],(function(xa,ya,za,ab){var bb=xa.symbols[wa];if(!bb)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(bb);return;}if(!this._selectionPosition)this._selectionPosition=new ab(t.findDOMNode(this.refs.mentionsinput.refs.textarea));var cb=this.refs.mentionsinput.refs.getTextFieldDOM(),db=za.getInstance(cb),eb=db.getValue(),fb=ya.insertEmoticon(bb,eb,this._selectionPosition.getPos());db.setValue(fb.result);this._selectionPosition.setPos(fb.start,fb.end);}).bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});f.exports=va;},null);
__d('UFIAddCommentLink.react',['React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':l.string,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,onClick:l.func},render:function(){var n=k("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o;if(this.props.isQAndA){o=j._("Ask a question...");}else o=j._("Write a comment...");return (h.createElement('div',{className:n,'data-ft':this.props['data-ft']},h.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},o)));}});f.exports=m;},null);
__d('UFICommentLikeCount.react',['NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=function(r,s){var t=new m('/ajax/like/tooltip.php').setQueryData({comment_fbid:r.fbid,comment_from:r.author,comment_likecount:r.likecount||0,comment_id:r.id,cache_buster:r.likeconfirmhash||0});if(s)t.addQueryData({viewas:s});return t;},q=k.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:o.object.isRequired,contextArgs:o.object.isRequired},render:function(){var r=this.props.comment,s=h.formatIntegerWithDelimiter(r.likecount||0,l.numberDelimiter),t=j.LIKES,u={id:r.fbid},v=p(this.props.comment,this.props.contextArgs.viewas),w=k.createElement('i',{className:"UFICommentLikeIcon"}),x=k.createElement('span',null,s),y="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":'');return (k.createElement('a',{ajaxify:i.constructDialogURI(t,u).toString(),className:y,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),rel:'dialog',role:'button'},w,x));}});f.exports=q;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['React','ReactFragment','TrackingNodes','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentMetadata.react','UFIConfig','UFIConstants','UFIMiddot.react','UFIPrivateReplyLink.react','UFISpamCount','cx','fbt','PagesPrivateReplyConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=c('PagesPrivateReplyConstants').Status,x=h.PropTypes,y=q.UFIStatus,z="fsm fwn fcg UFICommentActions",aa="UFIDeletedMessageIcon",ba="UFIDeletedMessage",ca='ufi_comment_like_link',da='ufi_reply_like_link',ea=h.createClass({displayName:'UFICommentActions',propTypes:{comment:x.object.isRequired,contextArgs:x.object.isRequired,feedback:x.object.isRequired,hideAsSpamForPageAdmin:x.bool,markedAsSpamHere:x.bool,onCommentReply:x.func,permalink:x.string,shareLink:x.string,shortenTimestamp:x.bool,showPermalink:x.bool,isStreaming:x.bool,showReplyLink:x.bool,viewerCanMarkNotSpam:x.bool},contextTypes:{dispatch:x.func},render:function(){var fa=this.props,ga=fa.comment,ha=fa.permalink,ia=fa.feedback,ja=fa.parentCanComment,ka=fa.markedAsSpamHere,la=ga.status===y.SPAM_DISPLAY,ma=fa.showReplyLink,na=fa.hideAsSpamForPageAdmin,oa,pa,qa,ra,sa,ta,ua,va,wa,xa=!ga.islocal&&ga.status!==y.LIVE_DELETED;if(xa){if(la&&!ka){if(fa.viewerCanMarkNotSpam)oa=h.createElement('a',{onClick:(function(event){return this.context.dispatch(m.markAsNotSpam(ga,event));}).bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},v._("Unhide"));if(na&&ia.isthreaded&&ga.cancomment&&ma)ua=this.renderCommentReply(ga);}else{if(ga.viewercanlike){var ya=j.getTrackingInfo(ga.hasviewerliked?j.types.UNLIKE_LINK:j.types.LIKE_LINK),za=ga.hasviewerliked?v._("Unlike this comment"):v._("Like this comment"),ab=ga.parentcommentid?da:ca;pa=h.createElement('a',{className:'UFILikeLink','data-ft':ya,'data-testid':ab,href:'#',onClick:(function(event){return this.context.dispatch(m.toggleLike(ga,event.target));}).bind(this),role:'button',title:za},ga.hasviewerliked?v._("Unlike"):v._("Like"));}if(ia.isthreaded&&ga.cancomment&&ma||!!ga.parentcommentid&&p.showReplyToReply&&ia.cancomment&&ja)ua=this.renderCommentReply(ga);if(ga.likecount>0)sa=h.createElement(n,{comment:ga,contextArgs:fa.contextArgs});if(ga.spamcount&&t.enabled)ta=h.createElement(t,{count:ga.spamcount});if(ga.messagereply&&(ga.messagereply.hasReplyPermission&&ia.actorforpost===ga.messagereply.pageID||ga.messagereply.status===w.ALREADY_REPLIED)){va=h.createElement(s,{actorID:ia.actorforpost,activityID:ga.id,context:ga.messagereply});}else if(ga.chattobuy)va=h.createElement('a',{href:ga.chattobuy,role:'button',rel:'async-dialog'},v._("Message"));}if(ga.attachment&&ga.attachment.type==='share'&&ga.canremove)wa=h.createElement('a',{href:'#',onClick:(function(event){return this.context.dispatch(m.removePreview(ga,event.target));}).bind(this),role:'button'},v._("Remove Preview"));if(this.props.contextArgs.shareablecomments)qa=h.createElement('a',{className:'share_action_link',href:fa.comment.commentshareuri,role:'button',rel:'dialog',title:v._("Share this comment")},v._("Share"));if(ia.canviewerpin&&!ga.parentcommentid){var bb=ga.id===ia.pinnedcommenttoken,cb=bb?v._("Unpin this comment"):v._("Pin this comment"),db=bb?v._("Unpin Comment"):v._("Pin Comment");ra=h.createElement('a',{className:'share_action_link',href:'#',role:'button',title:cb,onClick:(function(event){return this.context.dispatch(m.togglePin(ga,event.target));}).bind(this)},db);}}var eb=h.createElement(o,{comment:ga,onRetrySubmit:(function(){return this.context.dispatch(k.retrySubmit(ga));}).bind(this),permalink:ha,shortenTimestamp:fa.shortenTimestamp,showPermalink:fa.showPermalink}),fb={};if(ia.customcommentactionlinks)for(var gb in ia.customcommentactionlinks){var hb=ia.customcommentactionlinks[gb];if(hb.showInMenu)continue;var ib=function(event){return l.inform(hb.type,{comment:ga,feedback:ia});};fb[hb.type]=h.createElement('a',{href:'#',onClick:ib,role:'button'},hb.title);}var jb;if(fa.isStreaming){jb={likeToggle:pa,spamToggle:oa,likeCount:sa,spamCount:ta};jb=Object.assign(jb,fb);}else if(ia.isqanda){jb={likeCount:sa,spamCount:ta,likeToggle:pa,pinToggle:ra,commentReply:ua,shareComment:qa,messageReply:va,spamToggle:oa};jb=Object.assign(jb,fb);jb=Object.assign(jb,{metadata:eb,removePreview:wa});}else if(fa.contextArgs.entstream){jb={metadata:eb,likeToggle:pa,likeCount:sa,pinToggle:ra,commentReply:ua,messageReply:va,shareComment:qa,spamCount:ta,spamToggle:oa,removePreview:wa};jb=Object.assign(jb,fb);}else if(ia.isthreaded){jb={likeToggle:pa,pinToggle:ra,commentReply:ua,messageReply:va,spamToggle:oa,removePreview:wa,shareComment:qa,likeCount:sa,spamCount:ta};jb=Object.assign(jb,fb);jb=Object.assign(jb,{metadata:eb});}else{jb={metadata:eb,likeToggle:pa,pinToggle:ra,shareComment:qa,likeCount:sa,spamCount:ta,commentReply:ua,messageReply:va,spamToggle:oa,removePreview:wa};jb=Object.assign(jb,fb);}if(ga.status===y.LIVE_DELETED){var kb=h.createElement('span',{className:ba},h.createElement('i',{className:aa,'data-hover':'tooltip','aria-label':v._("Comment deleted")}));jb.deletionWarning=kb;}var lb=true,mb={};for(var nb in jb){var ib=jb[nb];if(ib){var ob=h.createElement(r,{key:'middot-'+nb});mb[nb]=lb?ib:i.create({middot:ob,action:ib});lb=false;}}return (h.createElement('div',{className:z},i.create(mb)));},renderCommentReply:function(fa){return (h.createElement('a',{className:"UFIReplyLink",href:'#',onClick:this.props.onCommentReply,role:'button'},v._("Reply")));}});f.exports=ea;},null);
__d('UFISocialContext.react',['HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=27,p=k.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=h.constructEndpoint(q).toString(),u=k.createElement('a',{href:q.uri,'data-hovercard':t,key:'top'},q.name),v=s.name.length+q.name.length,w;if(r===0){w=m._("Friends with {name}",[m.param('name',u)]);}else if(v<o){var x;if(r==1){x=m._("1 other");}else x=m._({"*":"{count} others"},[m.param('count',r,[0])]);w=m._("Friends with {name} and {others}",[m.param('name',u),m.param('others',this.getOthersLink(x,s,q))]);}else{var y=m._({"*":"{count} mutual friends"},[m.param('count',r+1,[0])]);w=this.getOthersLink(y,s);}return (k.createElement('span',{className:'UFICommentSocialContext'},w));},getOthersLink:function(q,r,s){var t=j.MUTUAL_FRIENDS,u={uid:r.id},v=new l('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=i.constructDialogURI(t,u).toString();return (k.createElement('a',{ajaxify:w,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),key:'others',rel:'dialog'},q));}});f.exports=p;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'UFICommentAuthorName',propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAdminViewer:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool},render:function(){var o=this.props,p=o.author,q=j.getTrackingInfo(j.types.USER_NAME);return (i.createElement(k,{author:p,showHovercard:o.showHovercard,isAdminViewer:o.isAdminViewer,key:'author',focusOnMount:o.focusOnMount,'data-ft':q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName},o.isFeatured?i.createElement(h,{key:'badge',size:'xsmall',type:'verified'}):null,o.socialContext?i.createElement(l,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});f.exports=n;},null);
__d('IntlLang',['UnicodeBidi'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},j=new RegExp('['+i.HE+']');function k(m){var n=h.firstStrongChar(m);if(n===null)return null;if(j.exec(n))return 'he';return null;}var l={getLang:k};f.exports=l;},null);
__d('UFICommentBody.react',['Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils.react','UFIConfig','UFIConstants','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=i.PropTypes,s=i.createClass({displayName:'UFICommentBody',propTypes:{commentText:r.string.isRequired,commentRanges:r.array,groupOrEventID:r.number,maxLength:r.number,maxLines:r.number,socialContext:r.object},render:function(){var t=this.props,u=t.commentText,v=j.getTrackingInfo(j.types.USER_MESSAGE),w=l.isDirectionLTR(u),x=!w,y=w&&h.isRTL()?'ltr':x&&!h.isRTL()?'rtl':null,z=m.getLang(u),aa=n.getCommentBodyInterpolator(t.groupOrEventID),ba=i.createElement(k,{key:'comment-body',className:"UFICommentBody",interpolator:aa,ranges:t.commentRanges,text:u,truncationPercent:p.commentTruncationPercent,maxLength:t.maxLength,maxLines:t.maxLines,renderEmoticons:o.renderEmoticons,renderEmoji:o.renderEmoji,'data-ft':v,dir:y,lang:z});if(t.socialContext){ba=i.createElement('div',{key:'body'},ba);}else{var ca=(w&&h.isRTL()?"_5wjy":'')+(w&&h.isRTL()?' '+"_5wjz":'')+(x&&!h.isRTL()?' '+"_5wj-":'')+(x&&!h.isRTL()?' '+"_5wj_":'');ba=ca?i.createElement('div',{key:'body',className:ca},ba):[' ',ba];}return i.createElement('span',null,ba);}});f.exports=s;},null);
__d('XUIEditButton.react',['XUIAbstractGlyphButton.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'XUIEditButton',render:function(){var n=this.props.label,o=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!n)n=k._("Edit");o=n;}return (i.createElement(h,babelHelpers._extends({},this.props,{label:n,title:o,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:l(this.props.className,"_5upq _5upr")})));}});f.exports=m;},null);
__d('UFICommentMenu.react',['Bootloader','React','XUICloseButton.react','XUIEditButton.react','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n,o,p,q,r=l({EDIT:true,CLOSE:true}),s=i.createClass({displayName:'UFICommentMenu',propTypes:{menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});h.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],(function(t,u,v){n=t,o=u;p=v;q=p.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}).bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(t,u,v){if(this.state.needsExpand&&!u.needsExpand)return false;return true;},render:function(){var t=null;if(this.props.menuType===r.EDIT){t=k;}else t=j;if(this.props.menuData&&this.state.bootloaded){var u=this.props.menuData.map(function(w){return (i.createElement(q,{'data-testid':w.testid,key:w.value,value:w.value},w.label));}),v=i.createElement(p,{onItemClick:this.props.onAction},u);return (i.createElement(o,babelHelpers._extends({},this.props,{alignh:'right',layerBehaviors:[n],menu:v,ref:'menu'}),i.createElement(t,{href:'#',onClick:this.onClickGuard})));}return i.createElement(t,babelHelpers._extends({},this.props,{href:'#',onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});s.MenuType=r;f.exports=s;},null);
__d('onViewportChanged',['EventListener','emptyFunction','getViewportDimensions','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=[],m=false,n=null,o,p;function q(){var ba=j.withoutScrollbars();return {top:0,bottom:ba.height,left:0,right:ba.width};}function r(ba,ca){var da={transform:ca||i.thatReturnsArgument,callback:ba,needsUpdate:true};l.push(da);y();t();return {remove:s.bind(null,da),scheduleCheck:w.bind(null,da)};}function s(ba){var ca=l.indexOf(ba);if(ca!==-1){l.splice(ca,1);if(l.length===0){u();n=null;}}}function t(){if(!p){p=h.listen(window,'scroll',x);o=h.listen(window,'resize',v);}}function u(){if(p){p.remove();o.remove();p=o=null;}}function v(){n=null;x();}function w(ba){ba.needsUpdate=true;y();}function x(){l.map(function(ba){return ba.needsUpdate=true;});y();}function y(){if(!m){m=true;k(function(){m=false;aa();});}}function z(ba){if(ba.needsUpdate){ba.needsUpdate=false;return true;}return false;}function aa(){if(!n)n=q();var ba=l.filter(z),ca=ba.map(function(da){return da.transform.call(null,n);});ba.forEach(function(da,ea){return da.callback.call(null,ca[ea]);});}f.exports=r;},null);
__d('onRectIsWithinViewport',['onViewportChanged'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l){return !(k.bottom<l.top||k.top>l.bottom||k.right<l.left||k.left>l.right);}function j(k,l){var m;function n(p){var q=k();return !!q&&i(q,p);}function o(p){if(m!==p){m=p;l(p);}}return h(o,n);}f.exports=j;},null);
__d('OnVisible.react',['React','ReactDOM','getElementRect','onRectIsWithinViewport','onlyChild'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'OnVisible',propTypes:{onVisible:m.func,onHidden:m.func,buffer:m.number},componentDidMount:function(){this._createListener();},componentDidUpdate:function(){this._createListener();},componentWillUnmount:function(){this._removeListener();},reset:function(){this._removeListener();this._createListener();},check:function(){if(this._listener)this._listener.scheduleCheck();},_measureElementRect:function(){if(!this.isMounted())return null;var o=this.props.buffer||0,p=j(i.findDOMNode(this));p.left-=o;p.right+=o;p.top-=o;p.bottom+=o;return p;},_createListener:function(){var o=i.findDOMNode(this);if(this._listener&&o!==this._element)this._removeListener();if(!this._listener){this._element=o;this._listener=k(this._measureElementRect,(function(p){var q=p?this.props.onVisible:this.props.onHidden;q&&q();}).bind(this));}},_removeListener:function(){if(this._listener){this._listener.remove();this._listener=null;}},render:function(){return l(this.props.children);}});f.exports=n;},null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFICommentVPVTracker',propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var p=this.props.comment.id,q=this.props.contextArgs.instanceid,r=this.props.children;if(!j.hasLoggedVPV(q,p))r=i.createElement(h,{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},r);return r;},maybeScheduleVPVLogging:function(){if(this.state.timer!==null)return;var p=this.props.comment.id,q=this.props.contextArgs.instanceid;if(j.hasLoggedVPV(q,p))return;this.setState({timer:m((function(){j.logVPV(q,p);this.setState({timer:null});}).bind(this),k.vpvLoggingTimeout)});},cancelScheduledVPVLogging:function(){if(this.state.timer===null)return;l(this.state.timer);this.setState({timer:null});},getInitialState:function(){return {timer:null};},shouldComponentUpdate:function(p,q){return q.timer===this.state.timer;},componentWillReceiveProps:function(){this.cancelScheduledVPVLogging();},componentWillUnmount:function(){this.cancelScheduledVPVLogging();}});f.exports=o;},null);
__d('fbglyph',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){throw new Error('fbglyph'+'('+JSON.stringify(i)+'): '+'Unexpected class transformation.');}f.exports=h;},null);
__d('UFIComment.react',['ix','Bootloader','HovercardLink','Image.react','LiveWWWFeedbackTypedLogger','React','ReactDOM','Tooltip.react','TrackingNodes','TextWithEntities.react','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils.react','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFITranslationConstants','URI','UserHovercardLocation','XUICloseButton.react','cx','emptyFunction','fbglyph','fbt','joinClasses','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){'use strict';if(c.__markCompiled)c.__markCompiled();var oa=m.PropTypes,pa=ca.UFIStatus,qa=na({edit:true,hide:true,remove:true}),ra='ufi_comment_close_button',sa='ufi_highlighted_comment',ta='ufi_comment_menu_delete',ua='ufi_comment_menu_edit',va='ufi_comment_menu_hide',wa="UFITranslateLink",xa="UFITranslationErrorText",ya="UFITranslateAttribution",za="fcg",ab={testid:ta,value:qa.remove,label:la._("Delete Comment...")},bb={testid:va,value:qa.hide,label:la._("Hide Comment")},cb=null,db=function(gb){var hb=gb.status;return hb===pa.FAILED_ADD||hb===pa.FAILED_EDIT;};function eb(gb){return gb.commenterIsFOF!==undefined&&gb.userIsMinor!==undefined&&gb.reportLink!==undefined;}var fb=m.createClass({displayName:'UFIComment',propTypes:{authorProfiles:oa.object.isRequired,comment:oa.object.isRequired,contextArgs:oa.object.isRequired,feedback:oa.object.isRequired,'data-ft':oa.string,focusOnMount:oa.bool,hasPartialBorder:oa.bool,hideAsSpamForPageAdmin:oa.bool,isFeatured:oa.bool,isFirst:oa.bool,isFirstCommentComponent:oa.bool,isFirstComponent:oa.bool,isLast:oa.bool,isLastCommentComponent:oa.bool,isLastComponent:oa.bool,isLocallyComposed:oa.bool,isReply:oa.bool,onCommentReply:oa.func,parentCanComment:oa.bool,permalink:oa.string,shortenTimestamp:oa.bool,showPermalink:oa.bool,isStreaming:oa.bool,showRemoveReportMenu:oa.bool,showReplyLink:oa.bool,viewerIsAuthor:oa.bool,orderingMode:oa.string},contextTypes:{dispatch:oa.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false};},_onHideAsSpam:function(event){this.context.dispatch(t.markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(t.markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(t.remove(this.props.comment,event.target,(function(){return this.setState({isInlinePageDeleted:true});}).bind(this)));},_onRemove:function(event){this.context.dispatch(t.remove(this.props.comment,event.target,ja));},_onInlineBan:function(event){this.context.dispatch(t.inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(t.undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,gb){var hb=gb.item,ib=hb.getValue();setTimeout((function(){if(ib===qa.remove){this._onRemove(event);}else if(ib===qa.edit){this.context.dispatch(t.edit(this.props.comment));}else if(ib===qa.hide){this._onHideAsSpam(event);}else s.inform(ib,{comment:this.props.comment,feedback:this.props.feedback});}).bind(this),0);},_createRemoveReportMenuData:function(){return [ab,bb];},_createEditDeleteMenuData:function(){return [{testid:ua,value:qa.edit,label:la._("Edit...")},{testid:ta,value:qa.remove,label:la._("Delete...")}];},_renderCloseButton:function(){var gb=this.props.comment,hb=null,ib=null,jb=null,kb=false;if(gb.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&gb.canedit){jb=la._("Edit or Delete");ib=this._createEditDeleteMenuData();kb=true;}else if(this.props.showRemoveReportMenu){jb=la._("Remove or Report");ib=this._createRemoveReportMenuData();}else if(this.props.feedback.customcommentactionlinks){jb=la._("Remove");kb=true;ib=[ab];}else{jb=la._("Remove");hb=this._onRemove;}}else if(this.props.feedback.customcommentactionlinks){jb=la._("Hide");kb=true;ib=[bb];}else if(gb.canreport){jb=la._("Hide");hb=this._onHideAsSpam;}if(this.props.feedback.customcommentactionlinks)for(var lb in this.props.feedback.customcommentactionlinks){var mb=this.props.feedback.customcommentactionlinks[lb];if(!mb.showInMenu)continue;ib.push({testid:mb.type,value:mb.type,label:mb.title});}var nb="UFICommentCloseButton"+(hb===null&&ib===null?' '+"hdn":''),ob=null,pb=null;if(this.props.contextArgs.viewas){ob='/ajax/profile/link_disabled_in_viewas.php';pb='dialog';hb=null;}var qb=kb?y.MenuType.EDIT:y.MenuType.CLOSE;return (m.createElement(y,{ajaxify:ob,className:nb,'data-testid':ra,onClick:hb,rel:pb,tooltip:jb,menuData:ib,menuType:qb,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (m.createElement(ha,{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));},componentDidMount:function(){if(this.state.isHighlighting){var gb=n.findDOMNode(this),hb=parseInt(this.props.comment.scrolltopoffset||0,10);i.loadModules(["UFIScrollHighlight"],function(ib){setTimeout(ib.actOn.bind(null,gb,hb),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(gb,hb){var ib=this.props,jb=this.state;return (gb.comment!==ib.comment||gb.showReplyLink!==ib.showReplyLink||gb.isFirst!==ib.isFirst||gb.isLast!==ib.isLast||gb.isFirstCommentComponent!==ib.isFirstCommentComponent||gb.isLastCommentComponent!==ib.isLastCommentComponent||gb.isFirstComponent!==ib.isFirstComponent||gb.isLastComponent!==ib.isLastComponent||gb.isFeatured!==ib.isFeatured||gb.hasPartialBorder!==ib.hasPartialBorder||hb.wasHighlighted!==jb.wasHighlighted||hb.isHighlighting!==jb.isHighlighting||hb.markedAsSpamHere!==jb.markedAsSpamHere||hb.isInlinePageDeleted!==jb.isInlinePageDeleted||hb.isInlineBanned!==jb.isInlineBanned);},render:function(){var gb=this.props.comment,hb=this.props.feedback,ib=gb.status===pa.DELETED,jb=gb.status===pa.LIVE_DELETED,kb=gb.status===pa.SPAM_DISPLAY,lb=this.state.markedAsSpamHere,mb=this.state.isInlinePageDeleted,nb=this.props.hideAsSpamForPageAdmin,ob=this.state.isInlineBanned;if(gb.islive&&!this.state.loggedLiveUpdate){new l().setEvent('update_view').setUpdateType('comment').setCommentID(gb.id).log();this.setState({loggedLiveUpdate:true});}var pb=eb(gb),qb=!gb.status&&(gb.isunseen||gb.islocal);if(!gb.status&&hb.lastseentime){var rb=gb.originalTimestamp||gb.timestamp.time;qb=qb||rb>hb.lastseentime;}var sb=this.props.contextArgs.markedcomments;if(sb&&sb[gb.legacyid])qb=true;var tb=(this.props.isFirst?"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),ub=la._("Comment"),vb=la._("Comment reply"),wb=this.props.isReply?vb:ub;if(pb)if(cb){var xb=null,yb=null,zb=null,ac=null;if(nb){zb=ob?this._onUndoInlineBan:this._onInlineBan;if(mb){xb=la._("You've deleted this comment so no one can see it.");}else if(lb){xb=la._("Now this is only visible to the person who wrote it and their friends.");ac=this._onDeleteSpam;yb=this._onMarkAsNotSpam;}}else if(lb){xb=la._("This comment has been hidden.");ac=this._onDeleteSpam;yb=this._onMarkAsNotSpam;}if(xb)return (m.createElement('div',{className:ma(tb,"UFIRow UFIHide"),role:'article','aria-label':wb},m.createElement(cb,{notice:xb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:yb,onBanAction:zb,onDeleteAction:ac,isInlineBanned:ob,isInlinePageDeleted:mb,hideAsSpamForPageAdmin:nb,pageID:this.props.feedback.ownerid})));}else i.loadModules(["UFICommentRemovalControls.react"],(function(ec){cb=ec;setTimeout((function(){this.forceUpdate();}).bind(this));}).bind(this));var bc=!ib,cc=ma(tb,"UFIRow"+(' '+"UFIComment")+(db(gb)?' '+"UFICommentFailed":'')+(ib||jb||kb?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!bc?' '+"noDisplay":'')+(bc?' '+"display":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(qb?' '+"UFIUnseenItem":'')),dc=this.renderComment();if(this.props.shouldLogVPVs&&!gb.islocal)dc=m.createElement(aa,{comment:gb,contextArgs:this.props.contextArgs},dc);return (m.createElement('div',{className:cc,role:'article','aria-label':wb,'data-testid':this.state.wasHighlighted?sa:null,'data-ft':this.props['data-ft']},dc));},renderComment:function(){var gb=this.props,hb=gb.comment,ib=gb.permalink,jb=gb.feedback,kb=hb.body?hb.body.text:'',lb=z.shallowCopyRanges(hb.body&&hb.body.ranges),mb=gb.authorProfiles[hb.author],nb=hb.status===pa.SPAM_DISPLAY,ob=hb.status===pa.LIVE_DELETED,pb=!(nb||ob),qb=jb.canremoveall||hb.hiddenbyviewer;kb=z.getCommentTextWithTruncatedURIs(lb,kb);var rb=null,sb=null;if(!gb.isLocallyComposed&&!this.state.wasHighlighted){sb=ca.commentTruncationLength;rb=ca.commentTruncationMaxLines;}var tb=p.getTrackingInfo(p.types.SMALL_ACTOR_PHOTO),ub=p.getTrackingInfo(p.types.USER_MESSAGE),vb=null,wb=null,xb=null,yb=null;if(hb.istranslatable&&hb.translatedbody===undefined)vb=m.createElement('a',{href:'#',role:'button',title:la._("Translate this comment"),className:wa,onClick:(function(event){return this.context.dispatch(t.translate(hb,event));}).bind(this)},la._("See Translation"));if(hb.translatedbody!==undefined)if(hb.translatedbody!==null&&hb.translatedbody.text!==''){var zb=ea.BING_PAGE_URL,ac=ea.BING_TRANSLATOR_APP,bc=null;if(hb.translatorapp===ac){var cc=new fa(zb).addQueryData({text:kb});bc=m.createElement('a',{href:cc.toString(),target:'_blank',className:za},la._("Translated by Bing"));}else bc=la._("Automatically Translated");yb=m.createElement('span',{className:ya},bc);var dc=z.shallowCopyRanges(hb.translatedbody.ranges),ec=hb.translatedbody.text,fc=hb.translatedbody.dir,gc=m.createElement('span',{key:'comment-body','data-ft':ub,dir:fc},m.createElement(q,{className:"UFICommentBody",interpolator:z.getCommentBodyInterpolator(gb.feedback.grouporeventid),ranges:dc,text:ec,renderEmoticons:ba.renderEmoticons,renderEmoji:ba.renderEmoji}));wb=m.createElement('span',{className:!ba.ltgTranslationUINew?"UFITranslatedTextLegacy":''},gc);}else xb=m.createElement('span',{className:xa},la._("No Translation Available"));var hc=m.createElement(x,{socialContext:hb.socialcontext,commentText:kb,commentRanges:lb,groupOrEventID:jb.grouporeventid,maxLength:sb,maxLines:rb}),ic=gb.contextArgs.viewas?null:j.constructEndpointWithGroupAndLocation(mb,jb.grouporeventid,ga.UFI,hb.isauthorweakreference).toString(),jc=m.createElement(w,{author:mb,authorProfiles:gb.authorProfiles,showHovercard:!!ic,isAuthorWeakReference:hb.isauthorweakreference,isAdminViewer:gb.feedback.isadminviewer,focusOnMount:gb.focusOnMount,groupOrEventID:jb.grouporeventid,isFeatured:gb.isFeatured,socialContext:hb.socialcontext}),kc=null;if(hb.photo_comment_status)kc=m.createElement('div',{className:"_50f8"},hb.photo_comment_status);var lc=null;if(hb.sticker_attachment_status)lc=m.createElement('div',{className:"_50f8"},hb.sticker_attachment_status);var mc=null;if(hb.status!==pa.DELETED&&!gb.isStreaming)mc=m.createElement(v,{comment:gb.comment});var nc=m.createElement(r,{actorID:hb.author});if(mb.uri||mb.isBusinessPersona)nc=m.createElement('a',{'data-ft':tb,'data-hovercard':ic,href:mb.uri},nc);var oc=false;switch(gb.orderingMode){case ca.UFICommentOrderingMode.RANKED_THREADED:case ca.UFICommentOrderingMode.FILTERED:oc=true;}var pc=null,qc=gb.contextArgs.ownerName;if(oc&&this.props.comment.id===jb.pinnedcommenttoken){var rc=la._("{post owner name} pinned this comment to the top",[la.param('post owner name',qc)]);pc=m.createElement(o,{position:'above',tooltip:rc},m.createElement(k,{className:'UFIPinnedCommentGlyph',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pushpin_16_bluegray-10.png")}));}return (m.createElement(da,{spacing:'medium'},nc,m.createElement('div',{className:'UFICommentContentBlock'},m.createElement('div',{className:'UFICommentContent'},jc,pc,hc,vb,m.createElement('div',{className:ba.ltgTranslationUINew?"UFITranslatedText":''},wb,yb),xb,mc),kc,lc,m.createElement(u,{comment:hb,feedback:jb,parentCanComment:this.props.parentCanComment,onCommentReply:gb.onCommentReply,onMarkAsNotSpam:(function(event){return this.context.dispatch(t.markAsNotSpam(hb,event));}).bind(this),permalink:ib,viewerCanMarkNotSpam:qb,shortenTimestamp:gb.shortenTimestamp,showPermalink:gb.showPermalink,isStreaming:gb.isStreaming,showReplyLink:gb.showReplyLink,contextArgs:gb.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:gb.hideAsSpamForPageAdmin}),pb?this._renderCloseButton():null),pb?this._renderFakeCloseButton():null));}});f.exports=fb;},null);
__d('UFICommentFilters',['UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={getAuthors:function(j){return j.reduce(function(k,l){if(l.author)k=k.concat(l.author);if(l.socialcontext)k=k.concat(l.socialcontext.topmutualid);if(l.replyauthors&&l.replyauthors.length)k=k.concat(l.replyauthors);return k;},[]);},isDeleted:function(j){return j.status===h.UFIStatus.DELETED;},isSpam:function(j){return j.status===h.UFIStatus.SPAM;},collectSpamBuckets:function(j,k){var l=j.reduce(function(m,n){if(i.isSpam(n)){if(m.spamBucket){m.spamBucket.spamCommentIDs.push(n.id);m.collected.push(null);}else{m.spamBucket={status:h.UFIStatus.SPAM,id:n.id,spamCommentIDs:[n.id]};m.collected.push(m.spamBucket);}}else if(k[n.author]){m.spamBucket=null;m.collected.push(n);}return m;},{spamBucket:null,collected:[]});return l.collected;}};f.exports=i;},null);
__d('UFICommentHeader.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'UFICommentHeader',render:function(){return (h.createElement('h6',babelHelpers._extends({},this.props,{className:"accessible_elem"}),j._("Comments")));}});f.exports=k;},null);
__d('UFICommentDisabledNotice.react',['React','TextWithEntities.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes;function k(m,n){return (h.createElement('a',{href:n.entity.url,target:'_blank'},m));}var l=h.createClass({displayName:'UFICommentDisabledNotice',propTypes:{feedback:j.object.isRequired},render:function(){var m=this.props.feedback,n=m.commentdisablednotice,o=h.createElement('div',{className:'UFINotice'},h.createElement(i,{interpolator:k,ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return (h.createElement('div',{className:'UFIRow'},o));}});f.exports=l;},null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFICommentScrollableArea',propTypes:{contextArgs:j.object},render:function(){var l=this.props,m=l.children,n=l.contextArgs;if(n.scrollcomments&&n.scrollwidth)return (h.createElement(i,{width:n.scrollwidth},h.createElement('div',null,m)));return m;}});f.exports=k;},null);
__d('CommentsTimeSpentTracker.react',['Banzai','BanzaiLogger','Event','OnVisible.react','React','SubscriptionsHandler','UserActivity','invariant','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes,r=l.createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new m(),propTypes:{orderingMode:q.string.isRequired,targetFBID:q.string.isRequired,viewerHasInteracted:q.bool.isRequired,timeToConsiderViewerInactiveMillis:q.number,pollViewerActivityIntervalMillis:q.number},getDefaultProps:function(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function(){return (l.createElement(k,{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function(){if(this.firstVisibleTime&&this.isMounted()){var s=this._getTimeInSeconds();if(s>this.firstVisibleTime)i.log('CommentsTimeSpentLoggerConfig',{viewer_has_interacted:this.props.viewerHasInteracted,ordering_mode:this.props.orderingMode,post_fbid:this.props.targetFBID,start_time:this.firstVisibleTime,end_time:s,time_spent_id:p});this.firstVisibleTime=0;}},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){this.listeners.addSubscriptions(h.subscribe(h.SHUTDOWN,this.finishInterval),j.listen(window,'blur',this.finishInterval),j.listen(window,'focus',this._checkVisibility));},componentWillUnmount:function(){this.finishInterval();this.listeners.release();},componentDidUpdate:function(){this._checkVisibility();},_getTimeInSeconds:function(){return Math.floor(Date.now()/1000);},_checkVisibility:function(){if(this.isMounted()){!(this.refs.onVisibleElement!==null)?o(0):undefined;this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function(){if(this.firstVisibleTime===0)return;if(n.isActive(this.props.timeToConsiderViewerInactiveMillis)){setTimeout((function(){this._checkForIdleViewer();}).bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();n.subscribeOnce((function(){if(this.isMounted())this._checkVisibility();}).bind(this));}}});f.exports=r;},null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','throttle'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'UFISeenTracker',getInitialState:function(){return {seen:false};},render:function(){return this.state.seen?this.props.children:j.createElement(i,{onVisible:k(this.logSeen,100,this)},this.props.children);},logSeen:function(){this.setState({seen:true});h.bumpEntityKey('unsampled_feedback','rendered_ufi_client');}});f.exports=l;},null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'UFIComponentLogger',propTypes:{contextArgs:l.object.isRequired,feedback:l.object.isRequired,orderingMode:l.string.isRequired,viewerHasInteracted:l.bool.isRequired},render:function(){var n=this.props,o=n.children,p=n.contextArgs,q=n.feedback,r=n.orderingMode,s=n.viewerHasInteracted;if(!o)return null;var t=i.createElement('div',null,o);if(p.hasComments&&k.logCommentsTimespent)t=i.createElement(h,{orderingMode:r,viewerHasInteracted:s,targetFBID:q.commentstargetfbid},t);if(k.logWhetherUFISeen)t=i.createElement(j,null,t);return t;}});f.exports=m;},null);
__d('UFIComponents',['React','UFICommentFilters'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=function(m){if(!m)return false;if(m.props.comment&&i.isDeleted(m.props.comment))return false;return true;},k=function(m,n,o){var p,q=o?m.length-1:0,r=o?-1:m.length,s=o?-1:1;for(p=q;p!=r;p+=s)if(j(m[p])){n(m,p);return m;}return m;},l={applyToUFIComponents:function(m,n,o){m=k(m,function(p,q){p[q]=h.cloneElement(p[q],n);},false);m=k(m,function(p,q){p[q]=h.cloneElement(p[q],o);},true);return m;}};f.exports=l;},null);
__d('UFIContainer.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createElement('div',{className:'UFIArrow',role:'presentation'},h.createElement('i',null)),l=h.createClass({displayName:'UFIContainer',propTypes:{hasNub:j.bool,isParentLiveDeleted:j.bool,isReplyList:j.bool},render:function(){var m=(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),n=h.createElement('div',{className:m},this.props.hasNub?k:null,this.props.children);return n;}});f.exports=l;},null);
__d('UFIInlineShareConfirmation.react',['React','UFIImageBlock.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=[l.object,l.string],n=h.createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:l.bool.isRequired,isFirstComponent:l.bool,isLastComponent:l.bool,message:l.oneOfType(m).isRequired},render:function(){var o=k("UFIRow"+(' '+"UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''));return (h.createElement('div',{className:o},h.createElement(i,null,h.createElement('i',{className:'UFIConfirmationIcon',role:'presentation'}),this._getText())));},_getText:function(){if(this.props.message.__html)return h.createElement('span',{dangerouslySetInnerHTML:this.props.message});return h.createElement('span',null,this.props.message);}});f.exports=n;},null);
__d('UFIPager.react',['LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFIPager',propTypes:{contextArgs:n.object.isRequired,pagerLabel:n.string.isRequired,'data-ft':n.string,countSentence:n.string,isFirstCommentComponent:n.bool,isFirstComponent:n.bool,isLastCommentComponent:n.bool,isLastComponent:n.bool,isLoading:n.bool,isReply:n.bool,isUnseen:n.bool,onPagerClick:n.func},onPagerClick:function(p){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();p.nativeEvent.prevent();},render:function(){var p=this.onPagerClick,q=m("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),r=null;if(this.props.isLoading)r=i.createElement(k,{className:'mls',background:'light',size:'small'});var s=i.createElement('a',{className:'UFIPagerLink',onClick:p,href:'#',role:'button'},this.props.pagerLabel,r),t="fcg"+(' '+"UFIPagerCount"),u=i.createElement('span',{className:t},this.props.countSentence),v,w=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||w.showSlimUFI&&!this.props.isReply){v=i.createElement(h,{direction:h.DIRECTION.right},s,u);}else v=i.createElement(j,null,i.createElement('a',{className:'UFIPagerIcon',onClick:p,href:'#',role:'button'}),s,u);return (i.createElement('div',{className:q,'data-ft':this.props['data-ft']},v));}});f.exports=o;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 reply");case k.VIEW_ONE_MORE:return h._("View 1 more reply");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more replies");case k.VIEW_PREVIOUS:return h._("View previous replies");default:return null;}},_getCommentLabel:function(l,m){if(m.commenters)return this._getCommentLabelWithCommentSentence(l,m);var n;switch(l){case k.VIEW_ONE:return h._("View 1 comment");case k.VIEW_ONE_MORE:return h._("View 1 more comment");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more comments");case k.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(l,m){var n=i(m.commenters),o=m.othersCount,p=j.formatIntegerWithDelimiter(o,m.delimiter),q=j.formatIntegerWithDelimiter(m.count,m.delimiter);switch(l){case k.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case k.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case k.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',q,[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',q,[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',q,[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_MORE_EXPLICIT:case k.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_PREVIOUS:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;default:return null;}},_getQuestionLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 question");case k.VIEW_ONE_MORE:return h._("View 1 more question");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more questions");case k.VIEW_PREVIOUS:return h._("View previous questions");default:return null;}},getLabel:function(l,m,n,o){if(m){return k._getReplyLabel(l,o);}else if(n){return k._getQuestionLabel(l,o);}else return k._getCommentLabel(l,o);}};f.exports=k;},null);
__d('UFIPagerGenerator',['NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.UFIPaging,s={isBottomPager:function(t,u){return k.inverted(u)&&!t;},needsStartOfRangePager:function(t){return t>0;},renderPagers:function(t,u,v,w,x){var y=t.deletedCounts[u],z=t.commentCounts[u],aa=z-y,ba=w-y,ca=l.numberDelimiter,da=u!==t.id,ea,fa=this.isBottomPager(da,t.orderingMode),ga={topPager:null,bottomPager:null};!!isNaN(aa)?q(0):undefined;!!isNaN(ba)?q(0):undefined;var ha=t.ranges[u],ia=ha.isLoadingPrev(),ja=ha.isLoadingNext(),ka={delimiter:ca,count:0},la=t.feedback.commentsentenceinfo;if(la){ka.commenters=la.explicit_commenter_names;ka.othersCount=la.other_commenter_count;}var ma=v+w==z;if(z<t.pageSize&&ma||ba===0){ea=Math.min(z,t.pageSize);var na=function(){return x(fa?r.BOTTOM:r.TOP,{offset:z-ea,length:ea});},oa;if(ba===0){if(aa==1){oa=o.VIEW_ONE;}else{ka.count=aa;oa=o.VIEW_ALL;}}else if(aa-ba==1){oa=o.VIEW_ONE_MORE;}else{oa=o.VIEW_MORE_EXPLICIT;ka.count=aa-ba;}var pa=j.getTrackingInfo(j.types.VIEW_ALL_COMMENTS),qa=o.getLabel(oa,da,t.feedback.isqanda,ka),ra=i.createElement(n,{key:'allPager'+u,ref:fa?'topLevelBottomPager':null,contextArgs:t.contextArgs,isUnseen:t.feedback.hasunseencollapsed,isLoading:ia,isReply:da,pagerLabel:qa,onPagerClick:na,'data-ft':pa});if(fa){ga.bottomPager=ra;}else ga.topPager=ra;return ga;}var sa=o.getLabel(o.VIEW_MORE,da,t.feedback.isqanda,ka),ta=o.getLabel(o.VIEW_PREVIOUS,da,t.feedback.isqanda,ka);if(this.needsStartOfRangePager(v)){var ua=Math.max(v-t.pageSize,0);ea=v+w-ua;var va;if(!da||ba>1){var wa=h.formatIntegerWithDelimiter(ba,ca),xa=h.formatIntegerWithDelimiter(aa,ca);va=p._("{countshown} of {totalcount}",[p.param('countshown',wa),p.param('totalcount',xa)]);}var ya=function(){return x(fa?r.BOTTOM:r.TOP,{offset:ua,length:ea});};if(fa){ga.bottomPager=i.createElement(n,{key:'bottomPager'+u,ref:!da?'topLevelBottomPager':null,contextArgs:t.contextArgs,isLoading:ia,isReply:da,pagerLabel:sa,onPagerClick:ya,countSentence:va});}else ga.topPager=i.createElement(n,{key:'topPager'+u,contextArgs:t.contextArgs,isLoading:ia,isReply:da,pagerLabel:ta,onPagerClick:ya,countSentence:va});}if(v+w<z){ea=Math.min(w+t.pageSize,z-v);var za=function(){return x(fa?r.TOP:r.BOTTOM,{offset:v,length:ea});};if(fa){ga.topPager=i.createElement(n,{key:'topPager'+u,contextArgs:t.contextArgs,isLoading:ja,isReply:da,pagerLabel:ta,onPagerClick:za});}else ga.bottomPager=i.createElement(n,{key:'bottomPager',ref:!da?'topLevelBottomPager':null,contextArgs:t.contextArgs,isLoading:ja,isReply:da,pagerLabel:sa,onPagerClick:za});}return ga;}};f.exports=s;},null);
__d('UFIReplySocialSentence.react',['Badge.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','UFIMiddot.react','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=j.PropTypes,s=43200,t=j.createClass({displayName:'UFIReplySocialSentence',propTypes:{author:r.object,'data-ft':r.string,isExpanded:r.bool,isFirstComponent:r.bool,isLastComponent:r.bool,isLoading:r.bool,onClick:r.func,orderingMode:r.string,replies:r.number,shortenTimestamp:r.bool,showVerified:r.bool,timestamp:r.object},render:function(){var u=this.props.isLoading?"UFIReplySocialSentenceLoading":'',v=p("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),w,x;if(this.props.isExpanded){w=this.props.replies>1?q._({"*":"Hide {count} Replies"},[q.param('count',this.props.replies,[0])]):q._("Hide 1 Reply");}else{w=this.props.replies>1?q._({"*":"{count} Replies"},[q.param('count',this.props.replies,[0])]):q._("1 Reply");if(this.props.timestamp){var y=i.getApproximateServerTime()/1000-this.props.timestamp.time;if(y<s||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)x=j.createElement('span',{className:"fcg"},j.createElement(n,{key:'middot-timestamp'}),j.createElement(k,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var z=this.props.author,aa=z&&!this.props.isExpanded,ba=null,ca;if(aa){ba=j.createElement('img',{alt:'',src:z.thumbSrc,className:"img UFIActorImage _54ru"});var da=null;if(this.props.showVerified)da=j.createElement(h,{size:'xsmall',type:'verified'});ca=[q._("{author}{verified_badge} replied",[q.param('author',z.name),q.param('verified_badge',da)]),j.createElement(n,{key:'middot-author'}),w];}else ca=w;var ea=null,fa=false;if(!aa||this.props.contextArgs.feedcarded){if(aa)fa=true;ea=j.createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(fa?' '+"UFIFeedCardedIconWithActor":'')});}return (j.createElement('div',{className:v,'data-ft':this.props['data-ft']},j.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},j.createElement(m,null,j.createElement('div',{className:(aa?"UFIReplyActorPhotoWrapper":'')+(fa?' '+"UFIFeedCardedReplyActor":'')},ea,ba),j.createElement('span',{className:u},j.createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},ca),x)))));}});f.exports=t;},null);
__d('FluxStoreGroup-upstream',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(k,l){this.__dispatcher=j(k);var m=k.map(function(n){return n.getDispatchToken();});this.$FluxStoreGroup1=this.__dispatcher.register((function(n){this.__dispatcher.waitFor(m);l();}).bind(this));}i.prototype.release=function(){this.__dispatcher.unregister(this.$FluxStoreGroup1);};i.prototype.getDispatchToken=function(){return this.$FluxStoreGroup1;};function j(k){!(k&&k.length)?h(0):undefined;var l=k[0].getDispatcher();return l;}f.exports=i;},null);
__d('FluxStoreGroup',['FluxStoreGroup-upstream'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);if(this.__dispatcher.explicitlyRegisterStore)this.__dispatcher.explicitlyRegisterStore(this);}f.exports=k;},null);
__d('FluxContainerSubscriptions',['FluxStoreGroup'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.$FluxContainerSubscriptions1=[];}i.prototype.setStores=function(j){this.$FluxContainerSubscriptions2();this.$FluxContainerSubscriptions3();var k=false,l=function(){k=true;};this.$FluxContainerSubscriptions4=j.map(function(n){return n.addListener(l);});var m=(function(){if(k){this.$FluxContainerSubscriptions1.forEach(function(n){return n();});k=false;}}).bind(this);this.$FluxContainerSubscriptions5=new h(j,m);};i.prototype.addListener=function(j){this.$FluxContainerSubscriptions1.push(j);};i.prototype.reset=function(){this.$FluxContainerSubscriptions2();this.$FluxContainerSubscriptions3();this.$FluxContainerSubscriptions6();};i.prototype.$FluxContainerSubscriptions2=function(){if(this.$FluxContainerSubscriptions4){this.$FluxContainerSubscriptions4.forEach(function(j){return j.remove();});this.$FluxContainerSubscriptions4=null;}};i.prototype.$FluxContainerSubscriptions3=function(){if(this.$FluxContainerSubscriptions5){this.$FluxContainerSubscriptions5.release();this.$FluxContainerSubscriptions5=null;}};i.prototype.$FluxContainerSubscriptions6=function(){this.$FluxContainerSubscriptions1=[];};f.exports=i;},null);
__d('FluxContainer',['FluxContainerSubscriptions','React','invariant','shallowCompare'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.Component,m={pure:true,withProps:false};function n(r,s){var t,u;p(r);var v=babelHelpers._extends({},m,s||{}),w=function(ba,ca){var da=v.withProps?ca:undefined;return r.calculateState(ba,da);},x=function(ba){var ca=v.withProps?ba:undefined;return r.getStores(ca);};t=babelHelpers.inherits(y,r);u=t&&t.prototype;function y(ba){'use strict';u.constructor.call(this,ba);this.$ContainerClass1=new h();this.state=w(undefined,ba);}y.prototype.componentWillMount=function(){'use strict';if(u.componentWillMount)u.componentWillMount.call(this);this.$ContainerClass1.setStores(x(this.props));this.$ContainerClass1.addListener((function(){this.setState((function(ba){return w(ba,this.props);}).bind(this));}).bind(this));};y.prototype.componentWillReceiveProps=function(ba,ca){'use strict';if(u.componentWillReceiveProps)u.componentWillReceiveProps.call(this,ba,ca);if(!v.withProps)return;this.$ContainerClass1.setStores(x(ba));this.setState(function(da){return w(da,ba);});};y.prototype.componentWillUnmount=function(){'use strict';if(u.componentWillUnmount)u.componentWillUnmount.call(this);this.$ContainerClass1.reset();};var z=v.pure?o(y):y,aa=r.displayName||r.name;z.displayName='FluxContainer('+aa+')';return z;}function o(r){var s,t;s=babelHelpers.inherits(u,r);t=s&&s.prototype;u.prototype.shouldComponentUpdate=function(v,w){'use strict';return k(this,v,w);};function u(){'use strict';s.apply(this,arguments);}return u;}function p(r){!r.getStores?j(0):undefined;!r.calculateState?j(0):undefined;}function q(r,s,t,u){var v,w;v=babelHelpers.inherits(x,l);w=v&&v.prototype;x.getStores=function(z){'use strict';return s(z);};x.calculateState=function(z,aa){'use strict';return t(z,aa);};x.prototype.render=function(){'use strict';return r(this.state);};function x(){'use strict';v.apply(this,arguments);}var y=r.displayName||r.name||'FunctionalContainer';x.displayName=y;return n(x,u);}f.exports={create:n,createFunctional:q};},null);
__d('UFISpamPlaceholder.react',['React','XUISpinner.react','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func},render:function(){if(this.props.isLoading)return (h.createElement('div',{className:'UFIRow'},h.createElement('span',{className:'UFISpamCommentWrapper'},h.createElement(i,{className:'mls',background:'light',size:'small'}))));return (h.createElement('div',{className:'UFIRow'},h.createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':j._("Show comments marked as spam")},h.createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','aria-label':j._({"*":"{count} hidden"},[j.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},h.createElement('i',{className:'placeholderIcon'})))));}});f.exports=l;},null);
__d('abstractMethod',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){h(0);}f.exports=i;},null);
__d('FluxReduceStore',['FluxStore','abstractMethod','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.$FluxReduceStore1=this.getInitialState();}m.prototype.getState=function(){return this.$FluxReduceStore1;};m.prototype.getInitialState=function(){return i('FluxReduceStore','getInitialState');};m.prototype.reduce=function(n,o){return i('FluxReduceStore','reduce');};m.prototype.areEqual=function(n,o){return n===o;};m.prototype.__invokeOnDispatch=function(n){this.__changed=false;var o=this.$FluxReduceStore1,p=this.reduce(o,n);!(p!==undefined)?j(0):undefined;if(!this.areEqual(o,p)){this.$FluxReduceStore1=p;this.__emitChange();}if(this.__changed)this.__emitter.emit(this.__changeEvent);};f.exports=m;},null);
__d('UFISpamStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.getInitialState=function(){return {};};n.prototype.areEqual=function(o,p){return Object.keys(o).length===Object.keys(p).length;};n.prototype.reduce=function(o,p){switch(p.type){case i.STORY.SPAM_FETCHED:o=babelHelpers._extends({},o);p.commentIDs.forEach(function(q){return (o[q]=true);});k.fetchSpamComments(p.ftentidentifier,p.commentIDs,p.parentCommentID,p.viewas);break;}return o;};function n(){l.apply(this,arguments);}f.exports=new n(j);},null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';n=babelHelpers.inherits(p,i.Component);o=n&&n.prototype;p.getStores=function(){return [l];};p.calculateState=function(q,r){var s=r.ftentidentifier,t=r.viewas,u=r.comment,v=r.parentCommentID;return {isLoading:!!l.getState()[u.id],numHidden:u.spamCommentIDs.length,onClick:function(){return j.dispatch(m.spamFetched(s,t,u.spamCommentIDs,v));}};};p.prototype.shouldComponentUpdate=function(q,r){return q.ftentidentifier!=this.props.ftentidentifier||q.viewas!=this.props.viewas||q.parentCommentID!=this.props.parentCommentID||r.isLoading!=this.state.isLoading||r.numHidden!=this.state.numHidden;};p.prototype.render=function(){return i.createElement(k,this.state);};function p(){n.apply(this,arguments);}f.exports=h.create(p,{pure:true,withProps:true});},null);
__d('StaticUFI.react',['Arbiter','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMScroll','Event','JSResource','LogHistory','MentionsInputUtils','Parent','React','ReactDOM','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentFilters','UFICommentHeader.react','UFICommentOrdering','UFICommentDisabledNotice.react','UFICommentScrollableArea.react','UFIComponentLogger.react','UFIComponents','UFIConfig','UFIConstants','UFIContainer.react','UFIInlineShareConfirmation.react','UFIInstanceState','UFIPagerGenerator','UFIReplySocialSentence.react','UFISpamPlaceholderContainer.react','UFIStoryAction','UFIUIEvents','URI','XUISpinner.react','cx','getUnboundedScrollPosition','isEmpty','focusWithinLayer','shallowEqual','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya){'use strict';if(c.__markCompiled)c.__markCompiled();var za=s.PropTypes,ab=s.createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},s.createElement(sa,{size:'large'})),bb=s.createClass({displayName:'StaticUFI',contextTypes:{dispatch:za.func},getInitialState:function(){var cb=this.props.focusReply;return {focusReply:cb,viewerHasClickedCommentComposer:false};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},inlineShare:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,viewerHasInteracted:false,loadingSpamIDs:{}};},componentDidMount:function(){if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var cb=ya(this.loadMoreComments,20);this._scrollEventListener=n.listen(window,'scroll',cb);this._resizeEventListener=n.listen(window,'resize',cb);}this._resolveFocus();},componentWillReceiveProps:function(cb){if(this.props.focusReply!==cb.focusReply)this.setState({focusReply:cb.focusReply});},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},shouldComponentUpdate:function(cb,db){var eb=this.props,fb=this.state;return (!xa(fb,db)||!xa(fb.loadingSpamIDs,db.loadingSpamIDs)||!xa(eb,cb)||!xa(eb.feedback,cb.feedback)||!xa(eb.repliesMap,cb.repliesMap)||!xa(eb.commentCounts,cb.commentCounts)||!xa(eb.deletedCounts,cb.deletedCounts)||!xa(eb.availableComments,cb.availableComments)||!xa(eb.ranges,cb.ranges)||!xa(eb.authorProfiles,cb.authorProfiles)||!xa(eb.commentPermalinks,cb.commentPermalinks)||!xa(eb.canAddCommentMap,cb.canAddCommentMap)||!xa(eb.canReplyMap,cb.canReplyMap)||!xa(eb.inlineShare,cb.inlineShare)||!xa(eb.isActiveLoading,cb.isActiveLoading)||!xa(eb.repliesExpandedMap,cb.repliesExpandedMap));},componentDidUpdate:function(cb,db){this._resolveFocus(cb);},_resolveFocus:function(cb){if(this.props.inlineShare.toggling){var db=cb&&cb.inlineShare||{};k.expand(t.findDOMNode(this),false,'ufi.react');if(!db.active&&!this.props.inlineShare.active)this.onComment();var eb=this.props.inlineShare.active;if(eb){var fb=!db.loaded;setTimeout((function(){return this._focusInlineShare({shouldHighlight:fb});}).bind(this),10);}la.updateStateField(this.props.instanceid,'inlineShare','toggling',false);}if(this.state.focusReply){var gb=this.state.focusReply,hb=gb.replyID,ib=gb.initiatorComment;if(!(hb in this.refs))return;var jb=this.refs[hb]&&this.refs[hb].refs&&this.refs[hb].refs.mentionsinput;if(!jb)return;jb.focus();this.setState({focusReply:null});if(!ib)return;var kb=jb.hasEnteredText(),lb=ib.author===this.props.feedback.actorforpost,mb=!!ib.parentcommentid;if(!kb&&!lb&&mb)jb.insertMention(this._createMentionEntry(ib.author));}},_createMentionEntry:function(cb){var db=this.props.authorProfiles[cb],eb=db.type;return new u({uniqueID:db.id,title:db.name,type:eb==='friend'?'user':eb});},_isAds:function(){return this.props.source===ia.UFIFeedbackSourceType.ADS;},_showLikeSentenceOrderingModeSelector:function(){var cb=this.props,db=cb.hideOrderingModeSelector,eb=cb.feedback,fb=cb.commentCounts,gb=cb.id;return (!db&&eb.orderingmodes&&fb[gb]>=ia.minCommentsForOrderingModeSelector);},_hasLikeSentenceRow:function(){var cb=this.props,db=cb.contextArgs,eb=cb.feedback,fb=cb.likeSentenceRowComponent;if(!fb||this._isAds()||db.search||this.hasReactions(eb,db))return false;var gb=eb.likesentences,hb=eb.reactionsentences;return (gb&&!va(gb.current)||hb&&!va(hb.current)||eb.seencount>0&&!db.entstream||this._showLikeSentenceOrderingModeSelector());},_hasShares:function(){var cb=this.props,db=cb.contextArgs,eb=cb.feedback;if(this._isAds())return false;return (db.showshares&&eb.sharecount&&!this.hasReactions(eb,db));},_hasShareRow:function(){return (this.props.shareRowComponent&&this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var cb=this.props.availableComments;return !!(cb&&cb.length);},_hasAddCommentView:function(){var cb=this.props,db=cb.canAddCommentMap,eb=cb.contextArgs,fb=cb.feedback,gb=cb.id;return (fb.cancomment&&eb.showaddcomment&&fb.actorforpost&&db[gb]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.props.hasPagedToplevel);},_hasAddCommentDisabledNotice:function(){var cb=this.props.feedback;return cb.arecommentsdisabled===true&&cb.cancomment===false;},_renderShareRow:function(){if(!this._hasShareRow())return null;var cb=this.props,db=cb.commentCounts,eb=cb.contextArgs,fb=cb.deletedCounts,gb=cb.feedback,hb=cb.id,ib=eb.isPermalink,jb=eb.hasReactions,kb=gb.commentcountreduced,lb=null,mb=false;if(this._hasComments()&&ib&&!jb&&ha.permalinkShareRowShowCommentCount){if(kb&&isNaN(kb)){lb=kb;}else if(db&&fb&&hb&&hb in db&&hb in fb)lb=db[hb]-fb[hb];mb=!!(lb&&ha.permalinkShareRowCommentCountTooltip);}var nb=this.props.shareRowComponent;return (s.createElement(nb,{contextArgs:eb,feedback:gb,shownCommentCount:lb,includeCommentCountTooltip:mb}));},render:function(){var cb=this.props,db=cb.feedback,eb=cb.contextArgs,fb=this._hasLikeSentenceRow(),gb=this._hasAddCommentDisabledNotice(),hb=this._hasShares(),ib=cb.inlineShare.message?s.createElement(ka,cb.inlineShare):null,jb=null;if(fb){var kb=cb.likeSentenceRowComponent;jb=s.createElement(kb,{contextArgs:cb.contextArgs,feedback:cb.feedback,showOrderingModeSelector:this._showLikeSentenceOrderingModeSelector()});}var lb=gb?s.createElement(da,{feedback:cb.feedback}):null,mb=this._renderShareRow();if(cb.loadingComments)return (s.createElement(ja,{hasNub:false},ib,jb,mb,ab));var nb=this._hasComments(),ob=cb.loggingOffset-cb.ranges[cb.id].getOffset(),pb=nb?this.renderCommentArray(cb.availableComments,ob,false,null):null;eb.hasComments=nb;var qb=null,rb=db.cancomment,sb=fb||hb||nb||rb,tb=sb?s.createElement(ba,null):null;if(this._hasAddCommentView()){eb.orderingmodes=db.orderingmodes;var ub=la.getKeyForInstance(eb.instanceid,'isediting');qb=s.createElement(x,{viewerActorID:db.actorforpost,hide:ub,replyCommentID:null,targetID:db.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:db.mentionsdatasource,showSendOnEnterTip:db.showsendonentertip,allowPhotoAttachments:db.allowphotoattachments&&!eb.isstreaming,allowStickerAttachments:db.allowstickerattachments&&!eb.isstreaming,source:eb.source,contextArgs:eb,subtitle:db.subtitle,isQAndA:db.isqanda,isSnowlift:eb.issnowlift,markViewerHasInteracted:(function(){if(!this.state.viewerHasClickedCommentComposer)this.setState({viewerHasClickedCommentComposer:true});}).bind(this)});}var vb=this.renderPagers(cb.id,false,cb.ranges[cb.id].getOffset(),cb.ranges[cb.id].getLength()),wb=vb.topPager,xb=vb.bottomPager,yb=ga.applyToUFIComponents([wb].concat(pb,[xb]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),zb=yb.slice(0,1);wb=zb[0];var ac=yb.slice(-1);xb=ac[0];pb=yb.slice(1,-1);var bc=this._hasCommentOrderInverted()?qb:null,cc=this._hasCommentOrderInverted()?null:qb,dc=this._hasAddCommentLink()?s.createElement(y,{onClick:this.onComment,isQAndA:db.isqanda}):null;yb=ga.applyToUFIComponents([ib,jb,mb,bc,wb].concat(pb,[xb,cc,dc]),{isFirstComponent:true},{isLastComponent:true});var ec=yb.slice(0,5);ib=ec[0];jb=ec[1];mb=ec[2];bc=ec[3];wb=ec[4];var fc=yb.slice(-3);xb=fc[0];cc=fc[1];dc=fc[2];pb=yb.slice(5,-3);if(cb.inlineShare.active){return (s.createElement(ja,{hasNub:false},s.createElement(i,babelHelpers._extends({bootloadPlaceholder:s.createElement('span',null),bootloadLoader:o('ShareDialog.react')},cb.inlineShare.props,{onCancel:(function(){return this._resetInlineShare();}).bind(this),onPost:(function(gc){j.loadModules(["ShareDialogOsricController"],(function(hc){hc.onPost(gc,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}).bind(this));}).bind(this),ref:'inlineShare',renderInline:true,status:cb.inlineShare.status}))));}else return (s.createElement(ja,{hasNub:eb.shownub&&sb},ib,jb,mb,tb,bc,s.createElement(ea,{contextArgs:eb},s.createElement(fa,{contextArgs:eb,feedback:db,orderingMode:cb.orderingMode,viewerHasInteracted:this.props.viewerHasInteracted||this.state.viewerHasClickedCommentComposer},wb,pb,xb)),cc,dc,lb));},_focusInlineShare:function(cb){cb=cb||{};var db=t.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)wa(db);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;m.ensureVisible(db);if(cb.shouldHighlight)j.loadModules(["highlight","CSS","cx"],function(eb,fb,gb){fb.addClass(db,"_5p5");var hb=function(){fb.removeClass(db,"_5p5");};eb(db,hb,'#f6f7f8');});},renderCommentArray:function(cb,db,eb,fb){var gb=this.props,hb=gb.id,ib=gb.contextArgs;if(!cb.length)return [];var jb=la.getKeyForInstance(gb.instanceid,'editcommentid'),kb=aa.collectSpamBuckets(cb,gb.authorProfiles);return kb.reduce((function(lb,mb,nb){if(!mb)return lb;if(aa.isSpam(mb)){lb.push(s.createElement(oa,{key:'spam'+mb.id,ftentidentifier:hb,viewas:ib.viewas,comment:mb,parentCommentID:fb}));}else{if(mb.id==jb){lb.push(this.renderEditCommentBox(mb));}else{var ob=Math.max(db-nb,0),pb=nb===0,qb=nb===kb.length,rb=!eb,sb=eb&&!pb;lb.push(this.renderComment(mb,ob,pb,qb,rb,sb));}if(!eb&&!aa.isDeleted(mb)){var tb=this.renderReplyContainer(mb);if(tb)lb.push(tb);}}return lb;}).bind(this),[]);},renderReplyContainer:function(cb){var db=this.props,eb=db.commentCounts[cb.id],fb=db.repliesExpandedMap[cb.id],gb=!fb&&cb.interestingReplyId,hb=db.ranges[cb.id],ib,jb;if(fb||cb.interestingReplyId){ib=db.repliesMap[cb.id];jb=hb.getOffset();if(gb){var kb=ib.filter(function(fc){return fc.id===cb.interestingReplyId;});if(kb.length!==1){p.getInstance('ufi').error('comment '+cb.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');ib=null;}else{ib=kb;jb=cb.interestingReplyOffset;}}}var lb;if(ib){var mb=hb.getOffset(),nb=hb.getLength();if(gb){mb=jb;nb=1;}var ob=this.renderPagers(cb.id,true,mb,nb),pb=ob.topPager,qb=ob.bottomPager,rb=db.loggingOffset-jb;lb=this.renderCommentArray(ib,rb,true,cb.id);}var sb=Math.max(eb-cb.spamreplycount,0),tb;if(sb&&(fb&&ib&&ib.length>db.replySocialSentenceMaxReplies||!fb&&!ib)){var ub=hb.isLoadingPrev()||hb.isLoadingNext(),vb=fb&&!pb&&ub,wb=null;if(cb.replyauthors&&cb.replyauthors.length)wb=db.authorProfiles[cb.replyauthors[0]];tb=s.createElement(na,{contextArgs:db.contextArgs,author:wb,replies:fb?ib.length:sb,shortenTimestamp:db.shortenTimestamp,timestamp:cb.recentreplytimestamp,onClick:(function(){return this.context.dispatch(pa.toggleReplies(cb.id));}).bind(this),isLoading:vb,isExpanded:fb,showVerified:db.feedback.showfeaturedreplies,orderingMode:db.orderingMode});}var xb;if(fb)if(cb.cancomment&&db.canAddCommentMap[cb.id]){var yb=false;if(lb)for(var zb=lb.length-1;zb>=0;zb--)if(lb[zb]){yb=lb[zb].props.isAuthorReply;break;}xb=this.renderReplyComposer(cb,!yb);}var ac;if(tb||pb||lb||qb||xb){var bc=ga.applyToUFIComponents([tb,pb].concat(lb,[qb,xb]),{isFirstComponent:true},{isLastComponent:true}),cc=bc.slice(0,2);tb=cc[0];pb=cc[1];var dc=bc.slice(-2);qb=dc[0];xb=dc[1];lb=bc.slice(2,-2);var ec=cb.status===ia.UFIStatus.LIVE_DELETED;ac=s.createElement(ja,{key:'replies'+cb.id,isParentLiveDeleted:ec,isReplyList:true},tb,pb,lb,qb,xb);}return ac;},renderReplyComposer:function(cb,db){var eb=this.props,fb=eb.contextArgs,gb=eb.feedback,hb=la.getKeyForInstance(fb.instanceid,'isediting')&&!cb.id;return (s.createElement(x,{viewerActorID:gb.actorforpost,hide:hb,replyCommentID:cb.id,targetID:gb.ownerid,initialData:null,ref:'replycomposer-'+cb.id,withoutSeparator:db,editingComment:{},isEditing:false,mentionsDataSource:gb.mentionsdatasource,showSendOnEnterTip:false,allowPhotoAttachments:gb.allowphotoattachments&&!fb.isstreaming,allowStickerAttachments:gb.allowstickerattachments&&!fb.isstreaming,source:fb.source,contextArgs:fb,subtitle:gb.subtitle,isQAndA:gb.isqanda,isSnowlift:fb.issnowlift}));},renderEditCommentBox:function(cb){var db=this.props,eb=db.contextArgs,fb=db.feedback,gb;if(cb.attachment)gb=cb.attachment.type=='sticker'?cb.attachment:null;var hb=q.generateDataFromTextWithEntities(cb.body),ib={mentionsinput:eb.mentionsinput};return (s.createElement(x,{key:'comment'+cb.id,viewerActorID:fb.actorforpost,targetID:fb.ownerid,initialData:hb,mentionsDataSource:fb.mentionsdatasource,source:undefined,contextArgs:ib,isEditing:true,editingComment:cb,attachedSticker:gb,allowPhotoAttachments:fb.allowphotoattachments,allowStickerAttachments:fb.allowstickerattachments,isQAndA:fb.isqanda}));},renderComment:function(cb,db,eb,fb,gb,hb){var ib=this.props,jb=ib.feedback,kb=jb.actorforpost===cb.author,lb=la.getKeyForInstance(ib.instanceid,'locallycomposed'),mb=cb.islocal||lb&&lb[cb.id],nb=jb.showremovemenu||jb.viewerid===cb.author,ob=jb.canremoveall&&jb.isownerpage&&!kb,pb=ib.source!=ia.UFIFeedbackSourceType.INTERN,qb=!!cb.parentcommentid,rb=true;if(qb&&cb.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[cb.parentcommentid]!==null)rb=this.props.canReplyMap[cb.parentcommentid];var sb=!!cb.isfeatured;switch(ib.source){case ia.UFIFeedbackSourceType.TOPIC_CONVERSATION:return (s.createElement(i,{key:'comment'+cb.id,bootloadPlaceholder:s.createElement('span',null),bootloadLoader:o('UFITopicConversationComment.react'),isFirst:eb,isLast:fb,comment:cb,authorProfiles:ib.authorProfiles,viewerIsAuthor:kb,feedback:jb,contextArgs:ib.contextArgs,focusOnMount:cb.id===ib.commentIDToFocusOnMount,isLocallyComposed:mb}));default:var tb=w.getTrackingInfo(w.types.COMMENT,db),ub=new ra(ib.commentPermalinks[cb.id]).addQueryData({comment_tracking:tb}).toString();return (s.createElement(z,{key:'comment'+cb.id,isFirst:eb,isLast:fb,showReplyLink:gb,hasPartialBorder:hb,comment:cb,authorProfiles:ib.authorProfiles,viewerIsAuthor:kb,feedback:jb,'data-ft':tb,contextArgs:ib.contextArgs,hideAsSpamForPageAdmin:ob,isLocallyComposed:mb,isReply:qb,isFeatured:sb,parentCanComment:rb,permalink:ub,shortenTimestamp:ib.shortenTimestamp,showPermalink:pb,isStreaming:ib.isStreaming,showRemoveReportMenu:nb,focusOnMount:cb.id===ib.commentIDToFocusOnMount,onCommentReply:(function(){var vb=this.props.feedback;if(vb.isthreaded&&cb.cancomment){this.context.dispatch(pa.showReplies(cb.id,cb));}else if(cb.parentcommentid)this.context.dispatch(pa.showReplies(cb.parentcommentid,cb));}).bind(this),shouldLogVPVs:ib.shouldLogVPVs,orderingMode:ib.orderingMode}));}},renderPagers:function(cb,db,eb,fb){var gb=this.props.commentCounts[cb],hb=fb==gb;if(hb||this._isAds()||!db&&this.props.hideToplevelPager)return {topPager:null,bottomPager:null};return ma.renderPagers(this.props,cb,eb,fb,(function(ib,jb){return this.context.dispatch(pa.pageInComments(cb,ib,jb));}).bind(this));},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.id in this.props.isActiveLoading)){var cb=t.findDOMNode(this.refs.topLevelBottomPager),db=ua(window).y,eb=db+document.documentElement.clientHeight+ia.infiniteScrollRangeForQANDAPermalinks;if(cb.offsetHeight&&cb.offsetTop<eb)this.refs.topLevelBottomPager.props.onPagerClick();}},onComment:function(){var cb=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();cb=t.findDOMNode(this.refs.toplevelcomposer);}else{var db=r.byTag(t.findDOMNode(this),'form');cb=l.scry(db,'[name="add_comment_text_text"]').concat(l.scry(db,'[name="add_comment_text"]')).find(function(eb){return !r.byClass(eb,'UFIReplyList');});cb&&cb.focus();}if(cb)h.inform(qa.CommentFocus,{element:cb});},_beforePostInlineShare:function(){la.updateStateField(this.props.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(cb){var db=cb.payload.message||v.success;this._resetInlineShare({message:db,isError:false});},_onInlineShareError:function(cb){var db=cb.errorDescription||v.error;this._resetInlineShare({message:db,isError:true});},_resetInlineShare:function(cb){la.updateState(this.props.instanceid,'inlineShare',cb||{});},_hasCommentOrderInverted:function(){return ca.inverted(this.props.orderingMode);},hasReactions:function(cb,db){return (cb.displayreactions&&db.hasReactions&&(!ha.reactionsSocialSentence||ha.reactionsSocialSentence.position==='above'));}});f.exports=bb;},null);
__d('UFIActionLinks.react',['BootloadedComponent.react','JSResource','Parent','React','UFIBling.react','UFICommentActionLink.react','UFIConfig','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;'use strict';u=babelHelpers.inherits(w,k.Component);v=u&&u.prototype;w.prototype.renderActorSelector=function(){var x=this.props.contextArgs.actorSelectorConfig;if(!x)return null;var y=x.props;y.nuxHoverContext=j.byTag(this.refs.root,'form');var z=x.module;return (k.createElement('div',{className:"_40yk"+(this.props.contextArgs.hasReactions?' '+"_pbn":'')},k.createElement(z,y)));};w.prototype.renderActionList=function(){var x=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderMessageLink(),this.renderTranslateLink()].map(function(y,z){return y&&k.createElement('span',{key:z},y);});return (k.createElement('div',{className:"_42nr"},x));};w.prototype.renderBling=function(){if(this.props.contextArgs.showBling||this.props.contextArgs.hasReactions&&(!n.reactionsSocialSentence||n.reactionsSocialSentence.position==='above'))return (k.createElement(l,{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,ufiInstanceID:this.props.ufiInstanceID,onCommentVisibilityChanged:this.props.visibilityTogglerCallback}));return null;};w.prototype.renderLikeLink=function(){var x=this.props,y=x.contextArgs,z=x.feedbacktarget;if(!z.hasviewerliked&&!z.viewercanlike)return null;return (k.createElement(o,{feedback:z,contextArgs:y,entidentifier:y.ftentidentifier,source:y.source}));};w.prototype.renderCommentLink=function(){if(!this.props.feedbacktarget.cancomment){var x=this.props.contextArgs.disabledCommentTooltip;if(x)return (k.createElement('span',null,k.createElement('span',{className:"_1ysv",'data-hover':'tooltip','aria-label':x},s._("Comment"))));return null;}return (k.createElement(m,{ufiInstanceID:this.props.ufiInstanceID,feedbacktarget:this.props.feedbacktarget,contextArgs:this.props.contextArgs}));};w.prototype.renderShareLink=function(){var x=this.props.contextArgs.shareLinkConfig;if(!x)return null;return (k.createElement(q,babelHelpers._extends({ufiInstanceID:this.props.ufiInstanceID},x)));};w.prototype.renderMessageLink=function(){var x=this.props,y=x.contextArgs,z=x.feedbacktarget,aa=z.actorforpost,ba=z.messagereplycontext;if(!p.willRender(ba,aa))return null;return (k.createElement(p,{actorID:aa,activityID:y.ftentidentifier,context:ba}));};w.prototype.renderTranslateLink=function(){var x=this.props.contextArgs.translationDialogURI;if(!x)return null;return (k.createElement('a',{href:x,rel:'dialog'},s._("Translate")));};w.prototype.renderSearchFeedback=function(){var x=this.props.contextArgs.inlineSearchFeedbackConfig;if(!x)return null;return (k.createElement(h,babelHelpers._extends({bootloadPlaceholder:k.createElement('div',null),bootloadLoader:i('InlineFeedback.react')},x)));};w.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return (k.createElement('div',{className:"_3csb"},k.createElement(h,{bootloadPlaceholder:k.createElement('div',null),bootloadLoader:i('UFIOrderingModeSelector.react'),feedback:this.props.feedbacktarget,onOrderChanged:this.props.onCommentOrderingModeSelectorChange})));};w.prototype.renderLayout=function(x,y,z){y=y.map(function(aa,ba){return aa&&k.createElement('div',{className:"_3m9g",key:ba},aa);}).filter(function(aa){return aa;});if(!x&&y.length===0)return null;return (k.createElement('div',{className:t("_3399",z)},y,k.createElement('div',{className:"_524d"},x)));};w.prototype.render=function(){var x=this.renderActorSelector(),y=this.renderSearchFeedback(),z=[],aa=[],ba=this.renderBling();if(this.props.contextArgs.ufiexperiments.showSlimUFI||ba){aa.push(x);aa.push(y);}else{z.push(x);z.push(y);}z.push(this.renderCommentOrderingModeSelector());var ca="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":'');return (k.createElement('div',{ref:'root'},this.renderLayout(ba,aa,ca),this.renderLayout(this.renderActionList(),z,"_a7s")));};function w(){u.apply(this,arguments);}f.exports=w;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.__onDispatch=function(l){var m=l.type,n=babelHelpers.objectWithoutProperties(l,['type']);this.__emitter.emit(m,n);};k.prototype.on=function(l,m){return this.__emitter.addListener(l,m);};k.prototype.remove=function(){this.__emitter.removeAllListeners();};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:j.instanceOf(i).isRequired,stores:j.object.isRequired},childContextTypes:{dispatch:j.func,stores:j.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=k;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.getCommentList=function(l,m){};function k(l,m,n,o){j.constructor.call(this,l,m);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}k.prototype.fetchComments=function(l,m,n){};f.exports=k;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelCommentList'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,i);k=j&&j.prototype;l.getCommentList=function(m,n){};l.getCommentListsForFeedbackTargetID=function(m){};l.getCommentListForFeedbackTargetID_UNSAFE=function(m){};l.resetCommentListsForFeedbackTargetID=function(m){};function l(m,n,o){k.constructor.call(this,m,h.UFICommentOrderingMode.FEATURED);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}l.prototype.fetchComments=function(m,n,o){};f.exports=l;},null);
__d('UFIFeedbackFilters',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRequestedIDs:function(i){var j=[];if(i.reactorids)j=j.concat(i.reactorids);if(i.actorforpost)j=j.concat(i.actorforpost);return j;}};f.exports=h;},null);
__d("XWebGraphQLQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"String"},variables:{type:"String"}});},null);
__d("CommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1660573210832508";}};f.exports=i;},null);
__d('BaseGraphQLSubscription',['BanzaiLogger','CurrentUser','CurrentLocale','RTISubscriptionManager'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={subscribe:function(m,n){var o={transformContext:JSON.stringify(this._getTransformContext(m))};this._logEvent('subscribe');return k.subscribe(this._getTopic(m),function(p){n(JSON.parse(p.payload));},o);},_getTransformContext:function(m){var n=155160167952447;return {viewerID:i.getID(),appID:n,locale:j.get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(m))};},_logEvent:function(m){h.log('GraphQLSubscriptionsLoggerConfig',{mechanism:'skywalker',subscription_call:this._getSubscriptionCallName(),event:m});}};f.exports=l;},null);
__d('UFICommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'graphql/comment_create_subscribe;top_level_feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'comment_create_subscribe';}});f.exports=k;},null);
__d("CommentLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1670967286459767";}};f.exports=i;},null);
__d('UFICommentLikeSubscription',['CommentLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),top_level_feedback_id:l})};},_getSubscriptionCallName:function(){return 'comment_like_subscribe';}});f.exports=k;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;},null);
__d('UFIFetcher',['Promise','ShortProfiles','UFICommentList','UFIRange','UFIFeedbackTargets','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n={fetchNewFeedbackTarget:function(o){return new h(function(p,q){return (l.getFeedbackTarget(o,p));});},fetchShortProfiles:function(o){return new h(function(p,q){return (i.getMulti(o,p));});},fetchComments:function(o,p,q){return new h(function(r,s){return (o.getComments(p.getOffset(),p.getLength(),q,r));}).then(function(r){return m(r);});}};f.exports=n;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1678388869050942";}};f.exports=i;},null);
__d('UFILikeSubscription',['FeedbackLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'graphql-sample/feedback_like_subscribe;feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'feedback_like_subscribe';}});f.exports=k;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});},null);
__d('UFILiveStreamingComments',['AsyncRequest','BanzaiODS','Map','Set','UFICentralUpdates','UFIConfig','UFIConstants','UFIToplevelCommentList','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=new j();function t(v,w,x){this.eftID=v;this.totalCommentCount=w;this.tailCommentFBID=x;this.queue=[];this.localCommentBodies=new k();this.errorCount=0;this.interval=r((function(){if(this.queue.length>m.facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new h().setURI(this.getNextURI()).setHandler((function(y){switch(y.payload.status){case 'streaming':this.enqueueMoreComments(y.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':q(this.interval);return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)i.bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){i.bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');q(this.interval);return;}break;}}).bind(this)).send();}).bind(this),2000);l.subscribe('update-comments',(function(y,z){if(z.comments&&z.comments.length)z.comments.forEach((function(aa){if(aa.parentcommentid)return;if(aa.islocal)this.trackLocalComment(aa);}).bind(this));}).bind(this));}t.prototype.enqueueMoreComments=function(v){if(!v.ufipayloads||isNaN(v.commentcount))return;var w=v.ufipayloads.filter((function(z){return !this.resemblesLocalComment(z.comments[0]);}).bind(this)),x=-1;if(this.tailCommentFBID!==null)x=w.findIndex((function(z){return z.comments[0].fbid===this.tailCommentFBID;}).bind(this),this);if(x===-1){this.queue=w;}else this.queue=this.queue.concat(w.slice(x+1));if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;var y=v.commentcount-this.queue.length;if(y>this.totalCommentCount)this.totalCommentCount=y;if(m.showAccurateStreamingCommentCount)o.getCommentList(this.eftID,n.UFICommentOrderingMode.LIVE_STREAMING).updateOverriddenDisplayCount(this.totalCommentCount);};t.prototype.renderNextComment=function(){if(this.queue.length===0)return;l.handleUpdate(n.UFIPayloadSourceType.LIVE_SEND,this.queue.shift());};t.prototype.getNextURI=function(){return p.getURIBuilder().setString('eft_id',this.eftID).getURI();};t.prototype.trackLocalComment=function(v){var w=t.hashCommentData(v);this.localCommentBodies.add(w);};t.prototype.resemblesLocalComment=function(v){var w=t.hashCommentData(v);return this.localCommentBodies.has(w);};t.hashCommentData=function(v){var w=v.author+v.body.text;if(v.attachment)w+=':'+v.attachment.fbid;return w;};var u={start:function(v,w,x){if(s.get(v))return;s.set(v,new t(v,w,x));}};f.exports=u;},null);
__d('UFILiveVideoCommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'live_video_comment_create_subscribe';}});f.exports=k;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.create('UFIRetryActions');function m(p,q){var r={actiontype:j.UFIActionType.DELETE_COMMENT,commentid:p.id};i.handleUpdate(j.UFIPayloadSourceType.USER_ACTION,{actions:[r]});var s=p.body.text,t=p.body.mentionstext;q.replyid=p.parentcommentid;q.attachedphoto=p.body.mentionsphoto;k.addComment(p.ftentidentifier,s,t,q);}function n(p,q){var r=p.body.text,s=p.body.mentionstext;q.attachedPhoto=p.body.mentionsphoto;q.attachedSticker=p.attachment;k.editComment(p.id,r,s,q);}var o={retrySubmit:function(p,q){switch(p.status){case j.UFIStatus.FAILED_ADD:m(p,q);break;case j.UFIStatus.FAILED_EDIT:n(p,q);break;default:l.error('retrysubmitstatus',{status:p.status});break;}}};f.exports=o;},null);
__d('UFISubscriptionUpdates',['BanzaiODS','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();h.setEntitySample('feedback',.0001);function m(o,p,q){new i().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(o).setTimeSinceSub(p).updateData(q?q:{}).log();}var n={handleLiveLike:function(o,p,q){h.bumpEntityKey('feedback','gql_like_received');m('like',q);if(!p||!p.feedback_like_subscribe)return;var r=p.feedback_like_subscribe.feedback,s=p.feedback_like_subscribe.liker;if(!r||!s)return;var t=[babelHelpers._extends({actiontype:k.UFIActionType.LIKE_ACTION,actorid:s.id,clientid:p.feedback_like_subscribe.client_mutation_id,entidentifier:o,likesentences:{current:r.does_viewer_like?r.viewer_likes_sentence:r.viewer_does_not_like_sentence,alternate:r.does_viewer_like?r.viewer_does_not_like_sentence:r.viewer_likes_sentence},hasviewerliked:r.does_viewer_like,likecount:r.likers.count},{})],u=r.reactions_summary;if(u){var v={};for(var w=0;w<u.length;w++){var x=u[w],y=x.feedback_reaction.key;v[y]={'default':x.reactors.count,reduced:x.reactors.display_count};}var z=r.viewer_feedback_reaction_info?r.viewer_feedback_reaction_info.key:0,aa=r.reaction_count_reduced?r.reaction_count_reduced:r.reactors.count;t.push(babelHelpers._extends({actiontype:k.UFIActionType.REACTION,actorid:s.id,clientid:p.feedback_like_subscribe.client_mutation_id,entidentifier:o,viewerreaction:z,reactioncount:r.reactors.count,reactioncountreduced:aa,reactioncountmap:v,reactionsentences:{current:z?r.viewer_likes_reaction_sentence:r.viewer_does_not_like_reaction_sentence,alternate:z?r.viewer_does_not_like_reaction_sentence:r.viewer_likes_reaction_sentence}},{}));}j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{actions:t});},handleLiveComment:function(o,p,q){h.bumpEntityKey('feedback','gql_comment_received');var r=p&&p.comment_create_subscribe&&p.comment_create_subscribe.comment;if(!r)return;m('comment',q,{comment_id:r.legacy_token});var s=babelHelpers._extends({author:r.author.id,body:r.body,cancomment:r.feedback.can_viewer_comment,canedit:r.can_viewer_edit,canremove:r.can_viewer_delete,clientid:p.comment_create_subscribe.client_mutation_id,ftentidentifier:o,id:r.legacy_token,fbid:r.legacy_fbid,legacyid:r.legacy_fbid,timestamp:{time:r.created_time,text:l._("a few seconds ago")},hasviewerliked:r.feedback.does_viewer_like,isfeatured:r.is_featured,istranslatable:r.translation_available_for_viewer,likecount:r.feedback.likers.count,viewercanlike:r.feedback.can_viewer_like,parentcommentid:r.comment_parent&&r.comment_parent.legacy_token,spamreplycount:0},{});if(r.attachments.length){var t=r.attachments[0],u=t.style_list;if(u&&u.length&&u[0]=='sticker'){var v=t.target;s.attachment={metadata:{source_uri:v.img.uri,source_uri_2x:v.img_2x.uri,width:v.img.width,height:v.img.height,frameCount:v.frame_count,frameRate:v.frame_rate,framesPerCol:v.frames_per_column,framesPerRow:v.frames_per_row,sprite_uri:v.sprite_img&&v.sprite_img.uri,sprite_uri_2x:v.sprite_img_2x&&v.sprite_img_2x.uri},type:'sticker'};}else if(u&&u.length&&u[0]=='photo'){var w=t.target;s.attachment={metadata:{preview_uri:w.photo_img&&w.photo_img.uri,width:w.photo_img.width,height:w.photo_img.height,url:w.url},type:'photo'};}else if(u&&u.length&&u[0]=='share'){t.type='live_share';s.attachment=t;}}j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{comments:[s]});},handleLiveCommentLike:function(o,p,q){m('comment_like',q);var r=p&&p.comment_like_subscribe&&p.comment_like_subscribe.feedback;if(!r)return;j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:k.UFIActionType.COMMENT_LIKE,clientid:p.comment_like_subscribe.client_mutation_id,commentid:r.legacy_comment_token,likecount:r.likers&&r.likers.count,viewerliked:r.does_viewer_like}]});}};f.exports=n;},null);
__d('UFIController',['Arbiter','Bootloader','BootloadedComponent.react','CommentPrelude','DOM','DOMQuery','JSResource','LayerRemoveOnHide','LiveTimer','PageAdminSignatureSettings','Parent','Promise','React','ReactDOM','ReactMount','Run','ScrollSuppressor','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionLinks.react','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFICommentLogger','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFIFeedbackFilters','UFICommentSubscription','UFICommentLikeSubscription','UFICommentTemplates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIFetcher','UFIInstanceState','UFILikeSubscription','UFILiveStreamingComments','UFILiveVideoCommentSubscription','UFINewCommentNotifier','UFIRange','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelCommentList','UFIUIEvents','UFIUserActions','URI','csx','emptyFunction','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob){'use strict';if(c.__markCompiled)c.__markCompiled();var pb=qa.UFIPayloadSourceType,qb=qa.UFIPaging,rb=qa.UFIFeedbackMode,sb=function(vb,wb,xb,yb){var zb=vb.getRequestedOffset(),ac=vb.getRequestedLength(),bc=zb+ac===wb,cc=bc&&tb(yb)?xb-zb:ac;return new ya(zb,cc);},tb=function(vb){return vb==pb.USER_ACTION||vb==pb.LIVE_SEND;};ub.preload=function(){};ub.prototype.$UFIController1=function(vb,wb){if(!this.$UFIController2||wb!==pb.INITIAL_SERVER)return;this.$UFIController2.startRecording(vb);};ub.prototype.$UFIController3=function(vb,wb){if(!this.$UFIController2||wb!==pb.INITIAL_SERVER)return;this.$UFIController2.log(vb,wb,{num_comments:this.comments&&this.comments.length||0,num_likes:this.feedback&&this.feedback.likecount||0,features:{is_featured:!!this.$UFIController4.featuredCommentLists[this.id],is_streaming:this.$UFIController5(),is_lazy_fetch:this.$UFIController6.lazyFetch,is_disable_css_hiding:this.$UFIController6.disableCSSHiding}});};function ub(vb,wb,xb){this.id=wb.ftentidentifier;this.$UFIController2=pa.perfLogger?new pa.perfLogger(this.id):null;this.$UFIController1('construct',pb.INITIAL_SERVER);this.$UFIController7();this.root=vb;this.source=wb.source;this.$UFIController8=wb.instanceid;bb.registerController(vb.id,(function(){return this.$UFIController9();}).bind(this));this.$UFIController10=(function(){if(!this.$UFIController11){var hc=bb.isSnowliftNode(this.root.id),ic=hc?m.scry(this.root,"^.fbPhotosSnowliftFeedback ._37uu"):m.scry(this.root,"^form ._37uu");this.$UFIController11=ic&&ic[0]||null;}return this.$UFIController11;}).bind(this);var yb=wb.feedbackMode===rb.NEVER||wb.feedbackMode===rb.NONE;this.$UFIController4={feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:yb,viewerHasInteracted:false,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},toplevelPagerClickCounts:{},replyPagerClickCounts:{}};this.comments=[];this.repliesMap={};this.$UFIController6=wb;this.$UFIController6.rootid=this.root.id;var zb=xb.feedbacktargets[0];this.orderingMode=zb.defaultcommentorderingmode;this.onCommentOrderingModeSelectorChange=this.onCommentOrderingModeSelectorChange.bind(this);this.$UFIController6.livevideographqlcomments=zb.lvc;var ac=(function(){if(!this.$UFIController6.disableinlinetoggle){this.$UFIController4.isHidden=!this.$UFIController4.isHidden;this.render(pb.COLLAPSE_ACTION);}}).bind(this);if(this.canRenderHeader()){this.renderHeader(zb);}else new aa(vb,this.$UFIController6,zb,this.$UFIController8,this.$UFIController12.bind(this));var bc=Date.now();if(zb.ll)this.liveLikeSubscription=ua.subscribe(zb.targetfbid,(function(hc){db.handleLiveLike(this.id,hc,Date.now()-bc);}).bind(this));if(zb.lc)this.liveCommentSubscription=ma.subscribe(zb.targetfbid,(function(hc){db.handleLiveComment(this.id,hc,Date.now()-bc);}).bind(this));if(zb.lvc)this.liveVideoCommentSubscription=wa.subscribe(zb.targetfbid,(function(hc){db.handleLiveComment(this.id,hc,Date.now()-bc);}).bind(this));if(zb.lcl)this.liveCommentLikeSubscription=na.subscribe(zb.targetfbid,(function(hc){db.handleLiveCommentLike(this.id,hc,Date.now()-bc);}).bind(this));this.$UFIController6.pagesAdminSignatureSettings=new q(this.$UFIController6.initAdminSignatureContext,zb.actorforpost);var cc=null;if(xb.featuredcommentlists&&xb.featuredcommentlists.comments&&xb.featuredcommentlists.comments[this.id]){cc=xb.featuredcommentlists.comments[this.id];this.$UFIController4.featuredCommentLists[this.id]=new ka(this.id,cc.values,xb.comments);}else cc=xb.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();this.ranges[this.orderingMode]=new ya(cc.range.offset,cc.range.length);this.$UFIController4.oldRange={offset:cc.range.offset,length:this.comments&&this.comments.length||0};var dc,ec,fc;if(xb.commentlists.replies)for(dc=0;dc<cc.values.length;dc++){ec=cc.values[dc];fc=xb.commentlists.replies[ec];if(fc){this.commentcounts[ec]=this.getReplyCommentList(ec).getCommentCount();this.replaceReplyRange(ec,new ya(fc.range.offset,fc.range.length));}}if(xb.featuredcommentlists)if(xb.featuredcommentlists.replies)for(dc=0;dc<cc.values.length;dc++){ec=cc.values[dc];fc=xb.featuredcommentlists.replies[ec];if(fc){this.$UFIController4.featuredCommentLists[ec]=new ja(this.id,ec,fc.values,xb.comments);this.commentcounts[ec]=this.getReplyCommentList(ec).getCommentCount();this.replaceReplyRange(ec,ya.combine(new ya(fc.range.offset,fc.range.length),this.replyRanges[ec]));}}this.$UFIController13=null;this.$UFIController14=null;this.ufiCentralUpdatesSubscriptions=[ea.subscribe('feedback-updated',(function(hc,ic){var jc=ic.updates,kc=ic.payloadSource;if(this.id in jc)this.fetchAndUpdate(kc,false);}).bind(this)),ea.subscribe('feedback-id-changed',(function(hc,ic){var jc=ic.updates;if(this.id in jc)this.id=jc[this.id];}).bind(this)),ea.subscribe('instance-updated',(function(hc,ic){var jc=ic.updates;if(this.$UFIController8 in jc){var kc=jc[this.$UFIController8];if(kc.editcommentid||kc.inlineShare){if(this.canRenderHeader())this.renderHeader(this.feedback);this.render(ic.payloadSource);}}}).bind(this)),ea.subscribe('actor-changed',(function(hc,ic){this.$UFIController15();}).bind(this))];this.pageletDestroySubscription=nb(this.root,(function(){u.unmountComponentAtNode(this.root);this.$UFIController9();}).bind(this));this.ufiUIPageClearedSubscription=h.subscribe(fb.PageCleared,(function(){u.unmountComponentAtNode(this.root);this.$UFIController9();}).bind(this));this.onUnloadSubscription=w.onUnload((function(){return this.$UFIController16();}).bind(this));ea.handleUpdate(pb.INITIAL_SERVER,xb);if(this.$UFIController6.viewas)this.viewasUFICleanSubscription=h.subscribe('pre_page_transition',(function(hc,ic){if(this.$UFIController6.viewas!==new hb(ic.to).getQueryData('viewas'))eb.resetCommentListsForFeedbackTargetID(this.id);}).bind(this));i.loadModules(["ScrollAwareDOM"],function(hc){v.scrollMonitor=hc.monitor;});if(this.$UFIController5()){var gc=null;if(xb.comments&&xb.comments.length>0)gc=xb.comments[xb.comments.length-1].fbid;va.start(this.id,zb.commentcount,gc);}if(!this.$UFIController6.lazyFetch)this.$UFIController17(zb);this.$UFIController3('construct',pb.INITIAL_SERVER);}ub.prototype.$UFIController18=function(vb){this.feedback=vb;this.$UFIController4.feedback=vb;};ub.prototype.$UFIController7=function(){if(!this.$UFIController19){this.$UFIController20=new ha();this.$UFIController21={UFICallbackStore:new da(this.$UFIController20)};this.$UFIController19=new y();this.$UFIController19.addSubscriptions(this.$UFIController21.UFICallbackStore.on(ca.ADD_COMMENT.CANCEL,(function(){return this.$UFIController15();}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.TOGGLE_LIKE,(function(vb){return gb.changeCommentLike(vb.comment.id,vb.like,{source:this.source,target:vb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.TOGGLE_PIN,function(vb){return gb.changeCommentPin(vb.comment.id);}),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.REMOVE,(function(vb){return this.$UFIController22(vb.comment,vb.target,vb.onConfirm);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.EDIT,(function(vb){return this.$UFIController23(vb.comment);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.TRANSLATE,(function(vb){return gb.translateComment(vb.comment,{source:this.source,target:vb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.TOGGLE_MARK_AS_SPAM,(function(vb){return gb.setHideAsSpam(vb.comment.id,vb.is_spam,{source:this.source,target:vb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.TOGGLE_INLINE_BAN,(function(vb){return gb.banUser(vb.comment,vb.ownerid,vb.is_banned,{source:this.source,target:vb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.STORY.TOGGLE_LIKE,(function(vb){return gb.changeReaction(this.id,this.feedback.hasviewerliked?0:qa.LikeReaction,{source:this.source,target:vb.target,rootid:this.$UFIController6.rootid});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.ADD_COMMENT.TYPING_CHANGE,(function(vb){return gb.typingChange(this.id,vb.state);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.ADD_COMMENT.SUBMIT_NEW,(function(vb){return xa.onNewComment(this.id,this.$UFIController8,this.$UFIController24(),this.$UFIController6,vb.comment,vb.target,vb.replyCommentID,vb.timestamp);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.ADD_COMMENT.SUBMIT_EDIT,(function(vb){return this.$UFIController25(vb.comment,vb.commentData,vb.target);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.COMMENT.REMOVE_PREVIEW,(function(vb){return gb.removePreview(vb.comment,{source:this.source,target:vb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.ADD_COMMENT.RETRY_SUBMIT,(function(vb){return ab.retrySubmit(vb.comment,{source:this.source});}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.STORY.CHANGE_ORDER_MODE,(function(vb){this.orderingMode=vb.mode;this.$UFIController4.showLoadingUFI=true;var wb=pb.USER_ACTION;this.render(wb);this.fetchAndUpdate(wb,false);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.STORY.PAGE_IN_COMMENTS,(function(vb){return this.$UFIController26(vb.commentID,vb.direction,new ya(vb.nextRange.offset,vb.nextRange.length));}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.STORY.TOGGLE_REPLIES,(function(vb){var wb=vb.commentID,xb=this.$UFIController4.repliesExpandedMap[wb];if(xb){delete this.$UFIController4.isActiveLoading[wb];this.$UFIController4.repliesExpandedMap[wb]=false;this.render(pb.USER_ACTION);}else this.$UFIController27(wb,null);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.STORY.SHOW_REPLIES,(function(vb){return this.$UFIController27(vb.commentID,vb.initiatorComment);}).bind(this)),this.$UFIController21.UFICallbackStore.on(ca.STORY.COMMENTS_ARRIVED,(function(vb){this.$UFIController4.showLoadingUFI=false;this.$UFIController4.isActiveLoading={};this.$UFIController4.commentIDToFocusOnMount=vb.source===pb.USER_ACTION?this.$UFIController28(vb.newOffset,vb.newLength):null;this.$UFIController4.oldRange={offset:vb.newOffset,length:vb.newLength};this.render(vb.source);if(vb.source==pb.ENDPOINT_COMMENT_FETCH){h.inform(fb.CommentPager);if(pa.logCommentLoad)ga.logCommentFetchReceived(this.id,Date.now());}}).bind(this)));}};ub.prototype.getStores=function(){return this.$UFIController21;};ub.prototype.$UFIController27=function(vb,wb){this.$UFIController4.focusedReplyComposer={replyID:'replycomposer-'+vb,initiatorComment:wb};var xb=this.commentcounts[vb],yb=Math.min(xb,this.$UFIController6.pagesize),zb=new ya(xb-yb,yb);this.$UFIController26(vb,qb.BOTTOM,zb);};ub.prototype.$UFIController26=function(vb,wb,xb){var yb=vb!==this.id;this.$UFIController4.isActiveLoading[vb]=wb;if(yb){this.$UFIController4.repliesExpandedMap[vb]=true;}else this.$UFIController4.hasPagedToplevel=true;if(vb==this.id){var zb=this.$UFIController4.toplevelPagerClickCounts[this.orderingMode]||0;this.$UFIController4.toplevelPagerClickCounts[this.orderingMode]=zb+1;this.getRange().updateRequestedRange(xb.offset,xb.length);}else{var ac=this.$UFIController4.replyPagerClickCounts[vb]||0;this.$UFIController4.replyPagerClickCounts[vb]=ac+1;this.replyRanges[vb].updateRequestedRange(xb.offset,xb.length);}var bc=pb.USER_ACTION;this.fetchAndUpdate(bc,true);this.$UFIController29();this.render(bc);};ub.prototype.$UFIController5=function(){if(this.$UFIController6.livevideographqlcomments)return false;if(!this.$UFIController6.isstreaming)return false;if(this.$UFIController6.feedcarded)return pa.enableStreamingCommentsInFeed;return true;};ub.prototype.$UFIController24=function(){if(!this.$UFIController30)this.$UFIController30=r.byTag(this.root,'form');return this.$UFIController30;};ub.prototype.$UFIController12=function(){if(!this.$UFIController6.disableinlinetoggle){this.$UFIController4.isHidden=!this.$UFIController4.isHidden;this.render(pb.COLLAPSE_ACTION);}};ub.prototype.$UFIController23=function(vb){ta.updateState(this.$UFIController8,'isediting',true);ta.updateState(this.$UFIController8,'editcommentid',vb.id);};ub.prototype.$UFIController25=function(vb,wb,xb){if(!wb.visibleValue&&!wb.attachedPhoto&&!wb.attachedSticker){this.$UFIController22(vb,xb,jb);}else gb.editComment(vb.id,wb.visibleValue,wb.encodedValue,{source:this.$UFIController6.source,target:xb,attachedPhoto:wb.attachedPhoto,attachedSticker:wb.attachedSticker});ta.updateStateField(this.$UFIController8,'locallycomposed',vb.id,true);this.$UFIController15();};ub.prototype.$UFIController15=function(){ta.updateState(this.$UFIController8,'isediting',false);ta.updateState(this.$UFIController8,'editcommentid',null);};ub.prototype.$UFIController22=function(vb,wb,xb){var yb=oa[':fb:ufi:hide-dialog-template'].build();l.setContent(yb.getNode('body'),ob._("Are you sure you want to delete this comment?"));l.setContent(yb.getNode('title'),ob._("Delete Comment"));i.loadModules(["DialogX"],(function(zb){var ac=new zb({modal:true,width:465,addedBehaviors:[o]},yb.getRoot());ac.subscribe('confirm',(function(){gb.removeComment(vb.id,{source:this.source,oneclick:false,target:wb});xb();ac.hide();}).bind(this));ac.show();}).bind(this));};ub.prototype.$UFIController31=function(){var vb=this.getToplevelCommentList().count,wb=Math.min(vb,this.$UFIController6.numLazyComments);lb(this.ranges,function(xb){return xb.updateRequestedRange(vb-wb,wb);});this.$UFIController4.showLoadingUFI=true;this.$UFIController4.requestedInitialComments=true;this.fetchAndUpdate(pb.USER_ACTION,false);ra.getFeedbackTarget(this.id,(function(xb){if(this.canRenderHeader()){this.renderHeader(xb);}else this.$UFIController17(xb);}).bind(this));};ub.prototype.$UFIController17=function(vb){if(this.shouldShowCommentOrderingModeSelector(vb))l.scry(this.root,"^form ._3csb").slice(0,1).forEach((function(wb){u.render(t.createElement(j,{bootloadPlaceholder:t.createElement('div',null),bootloadLoader:n('UFIOrderingModeSelector.react'),onOrderChanged:this.onCommentOrderingModeSelectorChange,feedback:vb}),wb);}).bind(this));};ub.prototype.canRenderHeader=function(){var vb=this.$UFIController10();if(!vb)return false;return pa.reactActionLinks||vb.children.length===0;};ub.prototype.renderHeader=function(vb){if(!this.canRenderHeader())return;var wb=this.$UFIController6.hasReactions&&(!pa.reactionsSocialSentence||pa.reactionsSocialSentence.position==='above')&&vb.displayreactions&&this.shouldShowCommentOrderingModeSelector(vb)&&(!this.$UFIController6.lazyFetch||this.$UFIController4.requestedInitialComments);u.render(t.createElement(ba,{root:this.root,entidentifier:this.id,contextArgs:this.$UFIController6,feedbacktarget:vb,onCommentOrderingModeSelectorChange:this.onCommentOrderingModeSelectorChange,showCommentOrderingModeSelector:wb,ufiInstanceID:this.$UFIController8,visibilityTogglerCallback:(function(){return this.$UFIController12();}).bind(this)}),this.$UFIController10());};ub.prototype.render=function(vb){if(this.$UFIController6.isPermalink||vb!==pb.INITIAL_SERVER&&vb!==pb.ENDPOINT_LIKE&&vb!==pb.ENDPOINT_REACTION)this.$UFIController4.viewerHasInteracted=true;this.$UFIController1('render',vb);if(this.$UFIController4.showLoadingUFI){u.render(this.$UFIController32(),this.root);this.$UFIController3('render',vb);return;}var wb=ta.getKeyForInstance(this.$UFIController8,'inlineShare')||{},xb=this.comments.length||!mb(this.feedback.likesentences.current);if((xb&&tb(vb)||wb.toggling)&&this.$UFIController6.feedbackMode!==rb.NEVER){this.$UFIController4.isHidden=false;k.expand(this.root,false,'ufi_controller');}if(this.$UFIController6.disableCSSHiding&&this.$UFIController4.isHidden){this.$UFIController3('render',vb);u.unmountComponentAtNode(this.root);return;}if(this.$UFIController6.lazyFetch&&!this.$UFIController4.requestedInitialComments&&!wb.active){u.render(this.$UFIController32(),this.root);this.$UFIController3('render',vb);this.$UFIController31();return;}var yb=this.getRange();if(this.$UFIController13===null)this.$UFIController13=yb.getOffset()+yb.getLength()-1;var zb=this.feedback.replysocialsentencemaxreplies||-1,ac={};ac[this.id]=new ya(yb.offset,yb.length);for(var bc in this.replyRanges)ac[bc]=new ya(this.replyRanges[bc].offset,this.replyRanges[bc].length);var cc=babelHelpers._extends({},this.$UFIController4.defaultRepliesExpandedMap,this.$UFIController4.repliesExpandedMap),dc=!!this.$UFIController4.featuredCommentLists[this.id],ec=this.getToplevelCommentList().getForceNotPageable(),fc=this.$UFIController6.mayLogVPVs&&this.orderingMode===qa.UFICommentOrderingMode.FILTERED,gc=this.$UFIController33(vb),hc=t.createElement(ia,{dispatcher:this.$UFIController20,stores:this.$UFIController21},t.createElement(z,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController6,repliesMap:this.repliesMap,shortenTimestamp:this.$UFIController6.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:this.$UFIController4.deletedCounts,availableComments:this.comments,source:this.source,ranges:ac,pageSize:this.$UFIController6.pagesize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController8,loggingOffset:this.$UFIController13,replySocialSentenceMaxReplies:zb,orderingMode:this.orderingMode,hideOrderingModeSelector:dc,commentPermalinks:this.$UFIController4.commentPermalinks,canAddCommentMap:this.$UFIController4.canAddCommentMap,canReplyMap:this.$UFIController4.canReplyMap,focusReply:gc,inlineShare:wb,isActiveLoading:this.$UFIController4.isActiveLoading,repliesExpandedMap:cc,hasPagedToplevel:this.$UFIController4.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController4.commentIDToFocusOnMount,hideToplevelPager:ec,isStreaming:this.$UFIController6.isstreaming,shouldLogVPVs:fc,viewerHasInteracted:this.$UFIController4.viewerHasInteracted,likeSentenceRowComponent:this.$UFIController6.likeSentenceRowComponent,shareRowComponent:this.$UFIController6.shareRowComponent}));u.render(hc,this.root);p.updateTimeStamps();if(this.$UFIController24())h.inform(fb.Changed,{form:this.$UFIController24()});if(vb!=pb.INITIAL_SERVER)h.inform('reflow');this.$UFIController4.focusedReplyComposer=null;this.$UFIController3('render',vb);};ub.prototype.$UFIController33=function(vb){if(vb===pb.INITIAL_SERVER&&this.feedback.permalinkcommentid){var wb='replycomposer-'+this.feedback.permalinkcommentid;return {replyID:wb};}else if(this.$UFIController4.focusedReplyComposer)return this.$UFIController4.focusedReplyComposer;return null;};ub.prototype.$UFIController28=function(vb,wb){var xb=this.$UFIController4.oldRange;if(xb.offset!=vb||xb.length!=wb){var yb=vb<xb.offset?xb.length:0;if(yb<wb)return this.comments[yb].id;}return this.$UFIController4.commentIDToFocusOnMount;};ub.prototype.$UFIController34=function(vb,wb,xb){if(wb.id===vb.permalinkcommentid)return true;if(xb>1)return true;if(xb>0&&wb.interestingReplyOffset===undefined)return true;var yb=wb.author===vb.viewerid;if(yb&&xb==1)return true;return false;};ub.prototype.$UFIController29=function(){var vb=this.$UFIController4.isActiveLoading;x.start();Object.keys(vb).filter(function(wb){return vb[wb]!==qb.TOP;}).forEach(function(wb){return x.increment();});};ub.prototype.getNewRange=function(vb,wb,xb){if(wb.isstreaming){var yb=wb.feedcarded?4:50;return new ya(Math.max(0,xb-yb),Math.min(yb,xb));}else return sb(this.getRange(),this.commentcounts[this.id],xb,vb);};ub.prototype.getNewReplyRange=function(vb,wb,xb,yb){var zb=wb.id;if(this.replyRanges[zb]){return sb(this.getReplyRange(zb),this.commentcounts[zb],yb,vb);}else if(wb.interestingReplyOffset!==undefined){return new ya(wb.interestingReplyOffset,1);}else{var ac=xb.isranked?0:Math.min(yb,2);return new ya(0,ac);}};ub.prototype.fetchAndUpdate=function(vb,wb){this.$UFIController4.source=vb;sa.fetchNewFeedbackTarget(this.id).done((function(xb){this.$UFIController18(xb);if(tb(this.$UFIController4.source))this.render(this.$UFIController4.source);if(this.canRenderHeader())this.renderHeader(xb);if(!this.$UFIController4.isHidden)this.fetchAllCommentsAndRender(this.$UFIController4.source,wb);}).bind(this));};ub.prototype.fetchAllCommentsAndRender=function(vb,wb){this.fetchAllComments(vb,wb).done((function(){this.$UFIController20.dispatch(cb.commentsArrived(this.getRange().getOffset(),this.comments.length,vb));}).bind(this));};ub.prototype.fetchAllComments=function(vb,wb){return s.resolve().then((function(){return this.fetchCommentsForFeedbackTarget(this.feedback,vb,wb).then((function(xb){var yb=fa.getAuthors(xb);if(!this.feedback.isthreaded||!xb.length)return yb;return this.fetchAllReplyIDsForComments(xb,vb,wb).then(function(zb){return yb.concat(zb);});}).bind(this)).then((function(xb){return (la.getRequestedIDs(this.feedback).concat(xb));}).bind(this));}).bind(this)).then(function(xb){return sa.fetchShortProfiles(xb);}).then((function(xb){this.authorProfiles=xb;}).bind(this));};ub.prototype.fetchCommentsForFeedbackTarget=function(vb,wb,xb){var yb=this.getToplevelCommentList().getCommentCount(),zb=this.getNewRange(wb,this.$UFIController6,yb),ac={numPagerClicks:xb?this.$UFIController4.toplevelPagerClickCounts[this.orderingMode]||0:null,viewAs:this.$UFIController6.viewas,feedContext:this.$UFIController6.feedcontext,feedbackSource:this.source};return sa.fetchComments(this.getToplevelCommentList(),zb,ac).then((function(bc){this.replaceRange(zb);this.comments=bc;this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();this.$UFIController4.deletedCounts[this.id]=this.getToplevelCommentList().getDeletedCount();this.$UFIController4.canAddCommentMap[this.id]=!this.$UFIController4.featuredCommentLists[this.id];bc.forEach((function(cc){this.$UFIController4.canReplyMap[cc.id]=cc.cancomment;this.$UFIController4.commentPermalinks[cc.id]=this.getToplevelCommentList().getPermalinkForComment(cc.id);}).bind(this));return bc;}).bind(this));};ub.prototype.fetchRepliesForComment=function(vb,wb,xb){var yb=vb.id,zb=this.getReplyCommentList(yb).getCommentCount(),ac=this.getNewReplyRange(wb,vb,this.feedback,zb),bc={numPagerClicks:xb?this.$UFIController4.replyPagerClickCounts[yb]||0:null,viewAs:this.$UFIController6.viewas,feedContext:this.$UFIController6.feedcontext};return sa.fetchComments(this.getReplyCommentList(yb),ac,bc).then((function(cc){this.replaceReplyRange(yb,ac);this.repliesMap[yb]=cc;this.commentcounts[yb]=this.getReplyCommentList(yb).getCommentCount();this.$UFIController4.deletedCounts[yb]=this.getReplyCommentList(yb).getDeletedCount();this.$UFIController4.canAddCommentMap[yb]=!this.$UFIController4.featuredCommentLists[yb];this.$UFIController4.defaultRepliesExpandedMap[yb]=this.$UFIController34(this.feedback,vb,cc.length);cc.forEach((function(dc){this.$UFIController4.canReplyMap[dc.id]=dc.cancomment;this.$UFIController4.commentPermalinks[dc.id]=this.getReplyCommentList(yb).getPermalinkForComment(dc.id);}).bind(this));return cc;}).bind(this));};ub.prototype.fetchAllReplyIDsForComments=function(vb,wb,xb){return new s.all(vb.map((function(yb){return this.fetchRepliesForComment(yb,wb,xb).then(function(zb){return fa.getAuthors(zb);});}).bind(this))).then(function(yb){return kb(yb);});};ub.prototype.getToplevelCommentList=function(){if(this.$UFIController4.featuredCommentLists[this.id])return this.$UFIController4.featuredCommentLists[this.id];return eb.getCommentList(this.id,this.orderingMode);};ub.prototype.getReplyCommentList=function(vb){if(vb in this.$UFIController4.featuredCommentLists)return this.$UFIController4.featuredCommentLists[vb];return za.getCommentList(this.id,vb);};ub.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var vb=this.getToplevelCommentList().getCommentCount(),wb=Math.min(vb,this.$UFIController6.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new ya(vb-wb,wb);}return this.ranges[this.orderingMode];};ub.prototype.replaceRange=function(vb){this.ranges[this.orderingMode]=vb;};ub.prototype.getReplyRange=function(vb){if(!(vb in this.replyRanges))this.replyRanges[vb]=new ya();return this.replyRanges[vb];};ub.prototype.replaceReplyRange=function(vb,wb){this.replyRanges[vb]=wb;};ub.prototype.$UFIController9=function(){this.$UFIController35();this.$UFIController36();this.$UFIController37();this.$UFIController38();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();};ub.prototype.$UFIController16=function(){this.$UFIController37();};ub.prototype.$UFIController35=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(vb){return vb&&ea.unsubscribe(vb);});};ub.prototype.$UFIController36=function(){var vb=[this.pageletDestroySubscription,this.viewasUFICleanSubscription,this.ufiUIPageClearedSubscription];vb.forEach(function(wb){try{wb&&h.unsubscribe(wb);}catch(xb){}});this.pageletDestroySubscription=null;this.viewasUFICleanSubscription=null;this.ufiUIPageClearedSubscription=null;};ub.prototype.$UFIController37=function(){var vb=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveVideoCommentSubscription,this.liveCommentLikeSubscription];vb.forEach(function(wb){return wb&&wb.unsubscribe();});};ub.prototype.$UFIController38=function(){if(this.$UFIController19){this.$UFIController19.release();this.$UFIController19=null;}};ub.prototype.$UFIController32=function(){var vb=ta.getKeyForInstance(this.$UFIController8,'inlineShare'),wb=this.$UFIController6;return (t.createElement(ia,{dispatcher:this.$UFIController20,stores:this.$UFIController21},t.createElement(z,{feedback:this.feedback,id:this.id,contextArgs:wb,commentCounts:this.commentcounts,inlineShare:vb,loadingComments:true,isStreaming:wb.isstreaming,likeSentenceRowComponent:wb.likeSentenceRowComponent,shareRowComponent:wb.shareRowComponent})));};ub.prototype.shouldShowCommentOrderingModeSelector=function(vb){var wb=this.getToplevelCommentList().getCommentCount()||vb.commentcount||0;if(vb.orderingmodes&&wb>=qa.minCommentsForOrderingModeSelector&&!this.$UFIController4.featuredCommentLists[this.id]){return true;}else return false;};ub.prototype.onCommentOrderingModeSelectorChange=function(vb){this.$UFIController20.dispatch(cb.changeOrderingMode(vb));};f.exports=ub;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes;function r(t,u,v,w){if(w.count!=null){var x=k.LIKES,y={id:t.targetfbid,actorid:t.actorid},z=[],aa;for(var ba=0;ba<u.length;ba++)if(!u[ba].count){aa=u[ba];var ca=aa.entity;z.push(ca.id);}var da=new n('/ajax/like/tooltip.php').setQueryData({comment_fbid:t.targetfbid,comment_from:t.actorforpost,seen_user_fbids:z.length?z:true});da=h.create(da,t.actorforpost);var ea,fa;if(t.displayreactions){ea=p.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();ea=h.create(ea,t.actorforpost);fa=o.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();fa=h.create(fa,t.actorforpost);}else{ea=j.constructDialogURI(x,y).toString();fa=j.constructPageURI(x,y).toString();}return (l.createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:ea,href:fa,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':da.toString(),role:'button'},v));}else{var ga={source_feedback_owner_id:t.ownerid,source_feedback_identifier:t.entidentifier};return i(v,w,null,null,'ufi',ga);}}var s=l.createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:q.object.isRequired,feedback:q.object.isRequired,likeSentenceData:q.object.isRequired},render:function(){var t=this.props.feedback,u=this.props.likeSentenceData,v,w=u.aggregatedranges||u.aggregated_ranges;v=r;v=v.bind(null,t,u.ranges);return (l.createElement(m,{interpolator:v,ranges:u.ranges,aggregatedRanges:w,text:u.text}));}});f.exports=s;},null);
__d('UFILikeSentence.react',['Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','UFIImageBlock.react','UFILikeSentenceText.react','UFIStoryAction','URI','cx','invariant','joinClasses','fbt','UFIReactionsBlingSocialSentenceBelow'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=c('UFIReactionsBlingSocialSentenceBelow').module,w=l.PropTypes,x=l.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:w.object.isRequired,feedback:w.object.isRequired,isFirstComponent:w.bool,isLastComponent:w.bool,onOrderingModeChange:w.func,showOrderingModeSelector:w.bool},contextTypes:{dispatch:w.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(y){this._bootloadSelectorModule(y);},_bootloadSelectorModule:function(y){if(y.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var z=(function(aa){this.setState({selectorModule:aa});}).bind(this);!!y.contextArgs.entstream?s(0):undefined;h.loadModules(["UFIOrderingModeSelector.react"],z);this.setState({bootloadedSelectorModule:true});}},render:function(){var y=this.props.feedback,z=y.likesentences.current||{},aa=this.props.contextArgs.entstream,ba=this.props.contextArgs.hasReactions&&m.reactionsSocialSentence&&m.reactionsSocialSentence.position==='below'&&v,ca=t("UFIRow"+(y.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(ba?' '+"_4_dr":'')),da=null,ea=null;if(ba){ea=l.createElement(v,{feedback:y});}else if(z.text)ea=l.createElement('div',{className:"UFILikeSentenceText"},l.createElement(o,{contextArgs:this.props.contextArgs,feedback:y,likeSentenceData:z}));var fa=this.props.contextArgs.ufiexperiments||{};if(ea&&!aa&&!fa.showSlimUFI){da=l.createElement('i',{className:'UFILikeIcon'});if(y.viewercanlike&&!y.hasviewerliked)da=l.createElement('a',{className:'UFILikeThumb',href:'#',tabIndex:'-1',title:u._("Like this"),onClick:(function(event){this.context.dispatch(p.toggleLike(event.target));event.preventDefault();}).bind(this),role:'button','aria-label':u._("Like this")},da);}var ga=ea,ha=null;if(y.seencount>0&&!aa){var ia=k.GROUP_MESSAGE_VIEWERS,ja={id:y.targetfbid},ka=j.constructDialogURI(ia,ja),la=j.constructPageURI(ia,ja),ma=new q('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:y.entidentifier,displayed_count:y.seencount}),na;if(y.seenbyall){na=u._("Seen by everyone");}else na=y.seencount==1?u._("Seen by 1"):u._("Seen by {count}",[u.param('count',y.seencount)]);ha=l.createElement('a',{rel:'dialog',ajaxify:ka.toString(),href:la.toString(),'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-uri':ma.toString(),className:"UFISeenCount"+(!!z.text?' '+"UFISeenCountRight":'')},l.createElement('span',{className:'UFISeenCountIcon'}),na);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var oa=this.state.selectorModule;ha=l.createElement(oa,{entstream:aa,feedback:y,onOrderChanged:(function(qa){return this.context.dispatch(p.changeOrderingMode(qa));}).bind(this)});if(!ga)ga=l.createElement('div',null);}var pa=null;if(da&&ea){pa=l.createElement(n,null,da,ea,ha);}else if(ga){pa=l.createElement(i,{direction:i.DIRECTION.right},ga,ha);}else pa=ha;return (l.createElement('div',{className:ca},pa));}});f.exports=x;},null);
__d('UFIMentionsInputProxy.react',['Bootloader','React','cx','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(n){this._fillCmdBuffer({fn:'setSignature',args:[n]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(n){this._fillCmdBuffer({fn:'insertMention',args:[n]});},insertEmoticon:function(n){this._fillCmdBuffer({fn:'insertEmoticon',args:[n]});},_bootload:function(){h.loadModules(["UFIMentionsInput.react"],(function(n){if(this.isMounted())this.setState({component:n});}).bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(n){if(this.refs.mentionsinputchild){return this._execCmd(n);}else this._cmdBuffer=this._cmdBuffer.concat([n]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var n=this._cmdBuffer[0];this._execCmd(n);this._cmdBuffer=this._cmdBuffer.slice(1);l(this._drainFnBuffer);}},_execCmd:function(n){var o=this.refs.mentionsinputchild;return o[n.fn].apply(o,n.args);},_renderProxyInput:function(){var n="_1osa mentionsHidden";return (i.createElement('input',{className:n,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus}));},_renderDummy:function(){var n="UFIAddCommentInput _1osb _1osc";return (i.createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:k,onMouseOver:this._bootload},i.createElement('div',{className:n},this._renderProxyInput(),this.props.placeholder)));},render:function(){var n=this.state.component;if(!n)return this._renderDummy();return (i.createElement(n,babelHelpers._extends({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props),this.props.children));}});f.exports=m;},null);
__d('Layout.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'Layout',render:function(){var l=[],m=[],n=null;h.Children.forEach(this.props.children,function(p,q){if(!p)return;var r=n!==null,s=h.cloneElement(p,{className:j(p.props.className,r?"_4bl8":''),key:q});if(n===null){if(p.type===k.FillColumn){n=s;}else l.push(s);}else m.push(s);});m.reverse();var o=l.concat(m);if(n)o.push(n);return (h.createElement('div',babelHelpers._extends({},this.props,{className:j(this.props.className,'clearfix')}),o));}});k.Column=h.createClass({displayName:'Column',render:function(){return (h.createElement('div',babelHelpers._extends({},this.props,{className:j(this.props.className,"_4bl7")})));}});k.FillColumn=h.createClass({displayName:'FillColumn',render:function(){return (h.createElement('div',babelHelpers._extends({},this.props,{className:j(this.props.className,"_4bl9")})));}});f.exports=k;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d('UFIShareRowCommentCount.react',['ActorURI','NumberFormat','React','XUFICommentTooltipController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=j.PropTypes;n=babelHelpers.inherits(q,j.Component);o=n&&n.prototype;q.prototype.$UFIShareRowCommentCount1=function(){var r=this.props.commentCount,s=r==1;if(typeof r==='number')r=i.formatInteger(r);return m._({"comment":"{count (could be abbreviated, such as '3.2k')} comment","comments":"{count (could be abbreviated, such as '3.2k')} comments"},[m.param('count (could be abbreviated, such as \'3.2k\')',r),m['enum'](s?'comment':'comments',{comment:'comment',comments:'comments'})]);};q.prototype.render=function(){var r=this.$UFIShareRowCommentCount1(),s="_2w0q";if(this.props.useTooltip){var t=h.create(k.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (j.createElement('span',{'aria-live':'polite',className:s,'data-hover':'tooltip','data-tooltip-uri':t},r));}else return j.createElement('span',{className:s},r);};function q(){n.apply(this,arguments);}q.propTypes={feedback:p.object.isRequired,commentCount:p.oneOfType([p.number,p.string]).isRequired,useTooltip:p.bool};f.exports=q;},null);
__d('UFIShareRow.react',['Layout.react','NumberFormat','React','UFIConfig','UFIImageBlock.react','UFIShareRowCommentCount.react','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=h.Column,s=h.FillColumn,t=j.PropTypes,u=j.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:t.object.isRequired,feedback:t.object.isRequired,isFirstComponent:t.bool,isLastComponent:t.bool,shownCommentCount:t.oneOfType([t.number,t.string]),includeCommentCountTooltip:t.bool},_renderCommentCount:function(){var v=this.props,w=v.feedback,x=v.includeCommentCountTooltip,y=v.shownCommentCount;if(y&&y!=0)return (j.createElement(m,{feedback:w,commentCount:y,useTooltip:x}));return null;},render:function(){var v=new n('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid}),w=new n('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid}),x;if(this.props.feedback.sharecount>1){var y=i.formatIntegerWithDelimiter(this.props.feedback.sharecount,k.numberDelimiter);x=q._({"*":"{count} shares"},[q.param('count',y,[0,this.props.feedback.sharecount])]);}else x=q._("1 share");var z=p("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),aa=j.createElement('a',{className:'UFIShareLink',rel:'dialog',ajaxify:v.toString(),href:w.toString()},x),ba=this._renderCommentCount();if(ba)aa=j.createElement(h,null,j.createElement(s,null,aa),j.createElement(r,null,ba));var ca=j.createElement(l,null,j.createElement('a',{className:'UFIShareIcon',rel:'dialog',ajaxify:v.toString(),href:w.toString()}),aa),da=this.props.contextArgs.ufiexperiments||{};return (j.createElement('div',{className:z},da.showSlimUFI?aa:ca));}});f.exports=u;},null);
__d("cssURL",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return "url('"+i.replace(/(\\|\s|\(|\)|'|\")/g,'\\$1')+"')";}f.exports=h;},null);
__d('MentionsTypeaheadViewItem.react',['Badge.react','ImageBlock.react','React','TypeaheadViewItem','cssURL','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'MentionsTypeaheadViewItem',mixins:[k.Mixin],propTypes:babelHelpers._extends({},k.propTypes,{ariaDescribedBy:n.string}),render:function(){var p=this.props.entry,q=p.getAuxiliaryData(),r=null;if(q)if(q.verified){r=j.createElement(h,{type:'verified',size:'xsmall'});}else if(q.workUser)r=j.createElement(h,{type:'work',size:'xsmall'});var s=p.getPhoto()?j.createElement('span',{className:"_5u93",style:{backgroundImage:l(p.getPhoto())}}):j.createElement('span',null),t=null;if(p.getSubtitle())t=j.createElement('div',{className:"_5u95"},p.getSubtitle());var u="_5u91"+(this.props.highlighted?' '+"_5u92":'');return (j.createElement('li',{role:'option',className:u,'aria-label':p.getTitle(),'aria-selected':this.props.highlighted,'aria-describedby':this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},j.createElement(i,{spacing:'medium'},s,j.createElement('div',null,j.createElement('div',{className:"_5u94"},p.getTitle(),r),t))));}});f.exports=o;},null);
__d('MentionsInputTypeaheadView.react',['MentionsTypeaheadViewItem.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'MentionsInputTypeaheadView',propTypes:{id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (i.createElement(h,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m="_5u8_"+(!this.props.entries.length?' '+"_5u90":'');return (i.createElement('ul',{className:m,role:'listbox',id:this.props.id},this.props.entries.map(this._renderItem)));}});f.exports=l;},null);
__d('EditSubscriptions',['Arbiter','AsyncRequest','CSS','DOM','Event','FeedBlacklistButton','MenuDeprecated','Parent','SubscriptionLevels','arrayContains','cx','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=45,u=[p.ALL,p.DEFAULT,p.TOP],v={},w={},x={},y={},z={},aa={},ba={},ca={},da={},ea={},fa={},ga="/ajax/follow/follow_profile.php",ha="/ajax/follow/unfollow_profile.php",ia="/ajax/settings/notifications/notify_me.php",ja={},ka={},la={},ma=null,na={};function oa(mb){return q(u,mb);}function pa(mb,nb,ob,pb){var qb=o.byClass(pb,'uiMenuItem')||o.byClass(pb,"_54ni"),rb=k.getID(mb);if(!qb||!k.contains(mb,qb)){return;}else if(j.hasClass(qb,'SubscribeMenuSubscribeCheckbox')){if(x[nb]){ua(rb,nb);}else ta(rb,nb);return false;}else if(j.hasClass(qb,'SubscribeMenuUnsubscribe')){ua(rb,nb);return false;}else if(j.hasClass(qb,'SubscribeMenuSettingsItem')){gb(mb,true);return false;}else if(j.hasClass(qb,'SubscriptionMenuGoBack')){gb(mb,false);return false;}else if(j.hasClass(qb,'SubscriptionMenuItem')){ra(mb,nb,ob,qb);return false;}else if(j.hasClass(qb,'SubscribeMenuNotifyMeCheckbox')){qa(mb,nb);return false;}}function qa(mb,nb){if(y[nb]){kb(mb,nb);}else jb(mb,nb);}function ra(mb,nb,ob,pb){if(j.hasClass(pb,'SubscriptionMenuLevel')){if(n.isItemChecked(pb))return;eb(mb,nb,xa(pb),true,ob);}else if(j.hasClass(pb,'SubscriptionMenuCategory')){bb(nb,pb,!n.isItemChecked(pb),true,ob);}else if(j.hasClass(pb,'SubscriptionAppStory'))db(nb,pb,!n.isItemChecked(pb),ob);}function sa(mb){return na[mb]?na[mb]:0;}function ta(mb,nb){var ob={profile_id:nb};h.inform('FollowingUser',ob);h.inform(m.UNBLACKLIST,ob);new i().setURI(ga).setMethod('POST').setData({profile_id:nb,location:sa(mb)}).setErrorHandler(h.inform.bind(null,'FollowUserFail',ob)).send();}function ua(mb,nb){var ob={profile_id:nb};h.inform('UnfollowingUser',ob);h.inform(m.BLACKLIST,ob);new i().setURI(ha).setMethod('POST').setData({profile_id:nb,location:sa(mb)}).setErrorHandler(h.inform.bind(null,'UnfollowUserFail',ob)).send();}function va(mb,nb,ob){var pb={profile_id:mb,level:ca[mb],custom_categories:da[mb],location:ob};new i().setURI('/ajax/follow/manage_subscriptions.php').setData(pb).send();}function wa(mb,nb){var ob=da[nb]||[],pb=n.getItems(mb);pb.forEach(function(qb){if(j.hasClass(qb,'SubscriptionMenuCategory')){var rb=xa(qb);if(q(ob,rb)){za(qb);}else ab(qb);}else if(j.hasClass(qb,'SubscriptionAppStory')){var sb=xa(qb);if(la[nb]&&la[nb][sb]){za(qb);}else ab(qb);}});eb(mb,nb,ca[nb],false);}function xa(mb){var nb=k.scry(mb,'input')[0];return nb&&nb.value;}function ya(mb){return k.find(mb,'a.itemAnchor');}function za(mb){j.addClass(mb,'checked');ya(mb).setAttribute('aria-checked',true);}function ab(mb){j.removeClass(mb,'checked');ya(mb).setAttribute('aria-checked',false);}function bb(mb,nb,ob,pb,qb){if(ob){za(nb);}else ab(nb);var rb=xa(nb);if(oa(rb)){ob&&cb(mb,rb);}else if(ob){if(!q(da[mb],rb))da[mb].push(rb);}else{var sb=da[mb].indexOf(rb);if(sb!==-1)da[mb].splice(sb,1);}if(pb)va(mb,rb,qb);}function cb(mb,nb){ca[mb]=nb;h.inform('SubscriptionLevelUpdated',{profile_id:mb,level:nb});}function db(mb,nb,ob,pb){var qb='/ajax/feed/filter_action/',rb=xa(nb),sb={actor_id:mb,app_id:rb};if(ob){za(nb);qb+='resubscribe_user_app/';sb.action='resubscribe_user_app';if(!la[mb])la[mb]={};la[mb][rb]=true;}else{ab(nb);qb+='unsubscribe_user_app_checkbox/';sb.action='unsubscribe_user_app_checkbox';if(la[mb])la[mb][rb]=false;}new i().setURI(qb).setData(sb).send();}function eb(mb,nb,ob,pb,qb){var rb=k.scry(mb,'.SubscriptionMenuLevel'),sb=null;rb.forEach(function(tb){if(xa(tb)==ob){sb=tb;}else if(n.isItemChecked(tb))bb(nb,tb,false,false);});sb&&bb(nb,sb,true,pb,qb);}function fb(mb,nb,ob){x[nb]=ob;j.conditionClass(mb,'isUnsubscribed',!ob);var pb=k.scry(mb,'li.SubscribeMenuSubscribeCheckbox');if(pb.length!==0){var qb=pb[0];if(ob){za(qb);}else ab(qb);}}function gb(mb,nb){j.conditionClass(mb,'subscriptionMenuOpen',nb);}function hb(mb,nb,ob){var pb=k.find(mb,".FriendListSubscriptionsMenu"),qb=k.find(pb,".uiMenuInner");if(ma!=null)ma.forEach(function(rb){qb.removeChild(rb);});ob.forEach(function(rb){qb.appendChild(rb);});ma=ob;}h.subscribe('UnfollowUser',function(mb,nb){if(ea[nb.profile_id]){cb(nb.profile_id,ea[nb.profile_id]);da[nb.profile_id]=fa[nb.profile_id].slice();}});h.subscribe('UpdateSubscriptionLevel',function(mb,nb){var ob=nb.profile_id+'',pb=nb.level+'';cb(ob,pb);var qb;for(qb in v)if(v[qb]===ob){var rb=s(qb);rb&&eb(rb,ob,pb,false);}});h.subscribe('listeditor/close_editor',function(){var mb;for(mb in v){var nb=s(mb);nb&&gb(nb,false);}});function ib(mb,nb,ob){y[nb]=ob;var pb=ka[nb];if(pb){if(ob){pb.select();}else pb.deselect();return;}var qb=k.scry(mb,'li.SubscribeMenuNotifyMeCheckbox');if(qb.length!==0){var rb=qb[0];j.conditionShow(rb,true);var sb=k.scry(mb,'li.SubscribeMenuNotifyMeCheckboxSeparator');if(sb.length>0)j.conditionShow(sb[0],true);if(ob){za(rb);}else ab(rb);}}function jb(mb,nb){var ob={profile_id:nb};h.inform('EnableNotifsForUser',ob);new i().setURI(ia).setMethod('POST').setData({notifier_id:nb,enable:true}).setErrorHandler(h.inform.bind(null,'EnableNotifsForUserFail',ob)).send();}function kb(mb,nb){var ob={profile_id:nb};h.inform('DisableNotifsForUser',ob);new i().setURI(ia).setMethod('POST').setData({notifier_id:nb,enable:false}).setErrorHandler(h.inform.bind(null,'DisableNotifsForUserFail',ob)).send();}var lb={init:function(mb,nb,ob){var pb=k.getID(mb);na[pb]=ob;if(!v[pb])l.listen(mb,'click',function(qb){return pa(mb,v[pb],ob,qb.getTarget());});if(ob===t&&ja[nb].length)hb(mb,nb,ja[nb]);if(ca[nb])wa(mb,nb);v[pb]=nb;j.conditionClass(mb,'NonFriendSubscriptionMenu',!w[nb]);j.conditionClass(mb,'cannotSubscribe',!z[nb]);j.conditionClass(mb,'noSubscriptionLevels',aa[nb]&&!ba[nb]);j.conditionClass(mb,'noSubscribeCheckbox',!w[nb]&&!aa[nb]);fb(mb,nb,x[nb]);ib(mb,nb,y[nb]);h.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],(function(qb,rb){if(rb.profile_id==nb)fb(mb,nb,true);}).bind(this));h.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],(function(qb,rb){if(rb.profile_id==nb){h.inform('SubMenu/Reset');fb(mb,nb,false);}}).bind(this));h.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],(function(qb,rb){if(rb.profile_id==nb)ib(mb,nb,true);}).bind(this));h.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],(function(qb,rb){if(rb.profile_id==nb)ib(mb,nb,false);}).bind(this));h.subscribe('listeditor/friend_lists_changed',(function(qb,rb){if(rb.notify_state){var sb=rb.added_uid?rb.added_uid:rb.removed_uid;ib(mb,sb,rb.notify_state.is_notified);}}).bind(this));},getSubscriptions:function(mb){return {level:ca[mb],custom_categories:da[mb]};},registerTimelineNotifySelector:function(mb,nb){var ob=mb.getInitialMenu(),pb=mb.getContentRoot();ob.forEachItem(function(qb){var rb=qb.getRoot();if(j.hasClass(rb,'SubscribeMenuNotifyMeCheckbox')){ka[nb]=qb;ib(pb,nb,y[nb]);}});ob.subscribe('itemclick',function(qb,rb){if(rb.item===ka[nb])qa(pb,nb);return true;});},toggleNotificationsOnJoin:function(mb,nb){if(y[mb]!==nb)qa(null,mb);},setSubscriptions:function(mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb){cb(mb,sb+'');w[mb]=nb;x[mb]=ob;z[mb]=pb;aa[mb]=qb;ba[mb]=rb;ea[mb]=ub+'';da[mb]=tb.map(String);fa[mb]=vb.map(String);ja[mb]=xb;y[mb]=wb;}};f.exports=b.EditSubscriptions||lb;},null);
__d('ConnectionsPYMLTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:ConnectionsPYMLLoggerConfig',this.$ConnectionsPYMLTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:ConnectionsPYMLLoggerConfig',this.$ConnectionsPYMLTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$ConnectionsPYMLTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$ConnectionsPYMLTypedLogger1=babelHelpers._extends({},this.$ConnectionsPYMLTypedLogger1,m);return this;};k.prototype.setEvent=function(m){this.$ConnectionsPYMLTypedLogger1.event=m;return this;};k.prototype.setLikeSource=function(m){this.$ConnectionsPYMLTypedLogger1.like_source=m;return this;};k.prototype.setPageID=function(m){this.$ConnectionsPYMLTypedLogger1.page_id=m;return this;};k.prototype.updateExtraData=function(m){m=j(i.serializeMap(m));i.checkExtraDataFieldNames(m,l);this.$ConnectionsPYMLTypedLogger1=babelHelpers._extends({},this.$ConnectionsPYMLTypedLogger1,m);return this;};k.prototype.addToExtraData=function(m,n){var o={};o[m]=n;return this.updateExtraData(o);};var l={event:true,like_source:true,page_id:true};f.exports=k;},null);
__d('SocialGoodCharityActionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:SocialGoodCharityActionsLoggerConfig',this.$SocialGoodCharityActionsTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:SocialGoodCharityActionsLoggerConfig',this.$SocialGoodCharityActionsTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$SocialGoodCharityActionsTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$SocialGoodCharityActionsTypedLogger1=babelHelpers._extends({},this.$SocialGoodCharityActionsTypedLogger1,m);return this;};k.prototype.setAbTestNamesToGroups=function(m){this.$SocialGoodCharityActionsTypedLogger1.ab_test_names_to_groups=i.serializeMap(m);return this;};k.prototype.setAttributes=function(m){this.$SocialGoodCharityActionsTypedLogger1.attributes=i.serializeMap(m);return this;};k.prototype.setCampaignID=function(m){this.$SocialGoodCharityActionsTypedLogger1.campaign_id=m;return this;};k.prototype.setCampaignType=function(m){this.$SocialGoodCharityActionsTypedLogger1.campaign_type=m;return this;};k.prototype.setEvent=function(m){this.$SocialGoodCharityActionsTypedLogger1.event=m;return this;};k.prototype.setFundraiserID=function(m){this.$SocialGoodCharityActionsTypedLogger1.fundraiser_id=m;return this;};k.prototype.setHasPaymentMethodOnFile=function(m){this.$SocialGoodCharityActionsTypedLogger1.has_payment_method_on_file=m;return this;};k.prototype.setParentEventType=function(m){this.$SocialGoodCharityActionsTypedLogger1.parent_event_type=m;return this;};k.prototype.setSourceAttributes=function(m){this.$SocialGoodCharityActionsTypedLogger1.source_attributes=i.serializeMap(m);return this;};k.prototype.setVC=function(m){this.$SocialGoodCharityActionsTypedLogger1.vc=m;return this;};k.prototype.updateExtraData=function(m){m=j(i.serializeMap(m));i.checkExtraDataFieldNames(m,l);this.$SocialGoodCharityActionsTypedLogger1=babelHelpers._extends({},this.$SocialGoodCharityActionsTypedLogger1,m);return this;};k.prototype.addToExtraData=function(m,n){var o={};o[m]=n;return this.updateExtraData(o);};var l={ab_test_names_to_groups:true,attributes:true,campaign_id:true,campaign_type:true,event:true,fundraiser_id:true,has_payment_method_on_file:true,parent_event_type:true,source_attributes:true,vc:true};f.exports=k;},null);
__d('Tour',['Arbiter','LayerDestroyOnHide','LayerHideOnEscape','NavigationMessage','PageEvents'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(){'use strict';if(m._instance)m._instance.setTourComplete();m._instance=this;}m.prototype.init=function(){'use strict';this._pageLeaveToken=h.subscribe(l.AJAXPIPE_ONUNLOAD,this.handleLeavePage.bind(this));this._navigationBeginToken=h.subscribe(k.NAVIGATION_BEGIN,this.handleTransition.bind(this));this.steps={};return this;};m.prototype.registerStep=function(n,o){'use strict';n.disableBehavior(i);n.disableBehavior(j);this.steps[o]=n;n.subscribe('show',function(){n.inform('tour-dialog-show',n);});if(!this.getTourStarted())this.setTourStart();};m.prototype._unsubscribeSubscriptions=function(){'use strict';this._navigationBeginToken.unsubscribe();this._pageLeaveToken.unsubscribe();};m.prototype.handleLeavePage=function(){'use strict';this._unsubscribeSubscriptions();};m.prototype.handleTransition=function(){'use strict';this._unsubscribeSubscriptions();};m.prototype.handleTourStart=function(){'use strict';};m.prototype.handleTourStop=function(){'use strict';};m.prototype.handleTourComplete=function(){'use strict';};m.prototype.showStep=function(n){'use strict';var o=this.steps[n];if(!(this.openDialog==o))this.hideOpenDialog();if(!o)return;this.openDialog=o;o.show();};m.prototype.hideOpenDialog=function(){'use strict';if(this.openDialog){this.openDialog.hide();this.openDialog=null;}};m.prototype.getTourStarted=function(){'use strict';return this.tourStarted;};m.prototype.setTourStart=function(){'use strict';this.tourStarted=true;this.handleTourStart();};m.prototype.setTourStop=function(){'use strict';this.tourStarted=false;this.hideOpenDialog();this.handleTourStop();};m.prototype.setTourComplete=function(){'use strict';if(this.tourComplete)return;this.setTourStop();this.tourComplete=true;this.handleTourComplete();};m.prototype.hideStep=function(n){'use strict';var o=this.steps[n];o&&o.hide();};m.getInstance=function(){'use strict';return m._instance||(m._instance=new m());};Object.assign(m.prototype,{tourStarted:false,tourComplete:false,_navigationBeginToken:null,_pageLeaveToken:null,steps:{},openDialog:null});f.exports=m;},null);
__d('PageFanning',['Animation','AsyncRequest','CSS','DOM','Parent','URI','ActorURI','$','collectDataAttributes','ConnectionsPYMLTypedLogger'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={setFanStatus:function(t,u,v,w,x,y,z){var aa={ft:{}};if(t)aa={ft:p(t,['ft']).ft};var ba=new m(window.location.href).getQueryData();if(v)if(ba.ref==='pyml_feed'){new q().setEvent('like_page').setLikeSource('profile').setPageID(parseInt(u,10)).log();}else if(ba.ref==='pyml_permalink')new q().setEvent('like_page').setLikeSource('post_permalink').setPageID(parseInt(u,10)).log();x=x||function(fa){var ga=fa.getPayload();if(!ga||!t)return;if(ga.reload){r.reloadOnFanStatusChanged();}else s(t,ga);};var ca={fbpage_id:u,add:v,reload:w};if(z!=null)Object.assign(ca,z);Object.assign(ca,aa);var da='/ajax/pages/fan_status.php';if(z!=null&&z.actor_id!=null)da=n.create(da,z.actor_id);var ea=new i().setURI(da).setData(ca).setNectarModuleDataSafe(t).setHandler(x);if(y)ea.setErrorHandler(y);ea.send();return false;},reloadOnFanStatusChanged:function(){var t=m.getRequestURI();window.location.href=t;},toggleLikeOnFanStatusChanged:function(t,u){var v=o('liked_pages_like_action_'+t),w=o('liked_pages_undo_action_'+t);j.conditionClass(v,'hidden_elem',u);j.conditionClass(w,'hidden_elem',!u);}};function s(t,u){var v=u.feedback;if(!v)return;if(l.byClass(t,'fbTimelineEscapeSectionItem'))t=l.byClass(t,'fan_status_inactive')||t;var w=k.create('span',{className:'fan_status_inactive'},v);t.parentNode.replaceChild(w,t);var x=function(){if(u.can_repeat_action)w.parentNode.replaceChild(t,w);};new h(w).duration(3000).checkpoint().to('backgroundColor','#FFFFFF').duration(1000).ondone(x).go();}f.exports=r;},null);
__d('SocialGoodCharityActionsLoggerUtils',['SocialGoodCharityActionsLoggerEvents','SocialGoodCharityActionsLoggerParentEvents','SocialGoodCharityActionsTypedLogger'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={logAction:function(event,l,m,n){new j().setEvent(event).setParentEventType(l).setCampaignID(m.campaign_id).setCampaignType(m.campaign_type).setAttributes(m.attributes).setSourceAttributes(m.source_attributes).setFundraiserID(m.fundraiser_id).log();},logJoinActionClick:function(l,m){var event=l?h.JOIN_CLICK:h.LEAVE_CLICK;this.logAction(event,i.INTERACT,m);},logFollowActionClick:function(l,m){var event=l?h.FOLLOW_CLICK:h.UNFOLLOW_CLICK;this.logAction(event,i.INTERACT,m);},logShareActionClick:function(l){this.logAction(h.SHARE_CLICK,i.INTERACT,l);},logInviteActionClick:function(l){this.logAction(h.INVITE_CLICK,i.INTERACT,l);}};f.exports=k;},null);
__d("XPagesLikeCountController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/x\/updateLikeCountDomString\/",{page_id:{type:"Int",required:true},like_id:{type:"String",required:true}});},null);
__d('PageLikeButton',['Arbiter','AsyncRequest','AsyncResponse','EditSubscriptions','Event','FeedBlacklistButton','PageFanning','PageLikeConstants','SocialGoodCharityActionsLoggerUtils','SubscribeButton','Tour','XPagesLikeCountController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t={init:function(u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=this._getOption(fa,'isLazy');this._subscribe(o.LIKED,ga,(function(ia,ja){if(this._shouldUpdateButton(x,fa,ja)){u.swap();if(!ca)w.suppressNextMouseEnter&&w.suppressNextMouseEnter();if(this._getOption(fa,'is_fundraiser'))k.toggleNotificationsOnJoin(x,true);}}).bind(this));this._subscribe(o.UNLIKED,ga,(function(ia,ja){if(this._shouldUpdateButton(x,fa,ja)){u.unswap();w.hideFlyout&&w.hideFlyout();if(this._getOption(fa,'is_fundraiser'))k.toggleNotificationsOnJoin(x,false);}}).bind(this));if(ea)this._subscribe(o.SPM_CALLOUT,ga,(function(ia,ja){if(this._shouldUpdateButton(x,fa,ja)){ea.show();h._releaseAllEvents(o.SPM_CALLOUT);}}).bind(this));var ha=(function(event){var ia=u.getCurrentButton();this._likeButtonAction(x,y,z,aa,ia,event,fa);}).bind(this);l.listen(v,'click',ha);if(ga)h.subscribe(o.LAZY_CLICK,function(ia,ja){var event=ja.event,ka=ja.node;if(ka!==v)return;ha(event);});},_subscribe:function(event,u,v){var w=u?[event,event+'.lazy']:[event];h.subscribe(w,v);},initCallout:function(u,v){var w=document.getElementById('pageActionLikeCalloutButton');l.listen(w,'click',this._likeButtonAction(u,v,null,null,null));},initUnlike:function(u,v,w,x){var y=this._getOption(x,'actor_id');l.listen(u,'click',(function(event){this.doUnlikeAction(event,v,w,y,x);}).bind(this));},doUnlikeAction:function(event,u,v,w,x){this._saveLike(event.getTarget(),u,false,function(y){h.inform(o.LIKED,{profile_id:u,actor_id:w});j.defaultErrorHandler(y);},v,null,null,x);this.informUnlike(u,w);},informLike:function(u,v,w,x){var y=this._getOption(x,'actor_id'),z={profile_id:u,actor_id:y,target:v,origin:w};h.inform(o.LIKED,z);z.connected=true;h.inform(q.SUBSCRIBED,z);h.inform(m.UNBLACKLIST,z);},informLikeSuccess:function(u){var v={profile_id:u};h.inform(o.LIKED_SUCCESS,v);h.inform(o.SPM_CALLOUT,v);},informUnlike:function(u,v){var w={profile_id:u,actor_id:v};setTimeout(h.inform.bind(h,o.UNLIKED,w),0);w.connected=false;setTimeout(h.inform.bind(h,q.UNSUBSCRIBED,w),0);h.inform(m.BLACKLIST,w);},updateLikeCount:function(u,v){h.subscribe(o.LIKED_SUCCESS,function(w,x){var y=x.profile_id;if(v==y){var z=s.getURIBuilder().setInt('page_id',v).setString('like_id',u).getURI();new i().setURI(z).send();}});},_saveLike:function(u,v,w,x,y,z,aa,ba){var ca=this._getOption(ba,'actor_id');r.getInstance().hideStep('low_page_likes');if(this._getOption(ba,'is_fundraiser')&&this._getOption(ba,'logging_info'))p.logJoinActionClick(w,this._getOption(ba,'logging_info'));n.setFanStatus(u,v,w,false,(function(){t.informLikeSuccess(v);if(!w&&this._getOption(ba,'reload_on_unlike')||w&&this._getOption(ba,'reload_on_like'))location.reload();}).bind(this),x,{fan_origin:y,fan_source:z,cat:aa,actor_id:ca});},_likeButtonAction:function(u,v,w,x,y,event,z){var aa=this._getOption(z,'actor_id');this._saveLike(event.getTarget(),u,true,function(ba){h.inform(o.UNLIKED,{profile_id:u,actor_id:aa});j.defaultErrorHandler(ba);},v,w,x,z);t.informLike(u,y,v,z);},_shouldUpdateButton:function(u,v,w){var x=this._getOption(v,'actor_id');if(u===w.profile_id){if(x===null)return true;if(w.actor_id!==null&&x===w.actor_id)return true;}return false;},_getOption:function(u,v){if(u&&v in u)return u[v];return null;}};f.exports=t;b.PageLikeButton=t;},null);
__d("XReactComposerLoggingODSController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/logging\/ods\/",{attachment_type:{type:"String"},composer_type:{type:"Enum",required:true,enumType:1},event:{type:"String",required:true}});},null);
__d("XReactFeedComposerXBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},target_id:{type:"String",required:true}});},null);
__d('ReactFeedComposerX',['ReactComposerAttachmentType','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','csx','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();function v(w){this.$ReactFeedComposerX1=w.root;this.$ReactFeedComposerX2=w.composerID;this.$ReactFeedComposerX3=w.targetID;this.$ReactFeedComposerX4=w.composerType;this.$ReactFeedComposerX5=false;this.$ReactFeedComposerX6=m.find(this.$ReactFeedComposerX1,'form');this.$ReactFeedComposerX7=m.find(this.$ReactFeedComposerX1,"._3en1");this.$ReactFeedComposerX8=new p();this.$ReactFeedComposerX8.addSubscriptions(n.listen(this.$ReactFeedComposerX1,'click',this.$ReactFeedComposerX9.bind(this)),n.listen(this.$ReactFeedComposerX1,'mouseover',this.$ReactFeedComposerX9.bind(this)),n.listen(this.$ReactFeedComposerX7,'keydown',this.$ReactFeedComposerX9.bind(this)),n.listen(this.$ReactFeedComposerX6,'success',this.$ReactFeedComposerX10.bind(this)),i.subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX11.bind(this)));var x=m.find(this.$ReactFeedComposerX1,"._4d6h"),y=m.scry(x,'input[name="composer_photo[]"]')[0];if(y){this.$ReactFeedComposerX8.addSubscriptions(n.listen(y,'click',this.$ReactFeedComposerX9.bind(this)),n.listen(y,'change',this.$ReactFeedComposerX9.bind(this)));if(y.files&&y.files.length>0)this.$ReactFeedComposerX9();}this.$ReactFeedComposerX12=m.scry(this.$ReactFeedComposerX1,"._5qtm");this.$ReactFeedComposerX12.forEach((function(z){return this.$ReactFeedComposerX8.addSubscriptions(n.listen(z,'click',this.$ReactFeedComposerX13.bind(this)));}).bind(this));o.onLeave(this.$ReactFeedComposerX11.bind(this));}v.prototype.$ReactFeedComposerX13=function(w){var x=w.getTarget(),y=null;while(x){if(x.nodeType===1&&x.nodeName==='A'){y=x;break;}x=x.parentNode;}!(y!==null)?u(0):undefined;var z=l.hasClass(y,"._5qtn");if(z)return;this.$ReactFeedComposerX12.forEach(function(ca){return l.removeClass(ca,"_5qtn");});l.addClass(y,"_5qtn");var aa=m.find(this.$ReactFeedComposerX1,"._559p"),ba=m.find(this.$ReactFeedComposerX1,"._559q");switch(y.getAttribute('data-attachment-type')){case h.STATUS:l.hide(ba);l.show(aa);break;case h.MEDIA:case h.QANDA:l.show(ba);l.hide(aa);break;}};v.prototype.$ReactFeedComposerX9=function(w){if(this.$ReactFeedComposerX5)return;this.$ReactFeedComposerX5=true;var x=r.getURIBuilder().setString('composer_id',this.$ReactFeedComposerX2).setString('target_id',this.$ReactFeedComposerX3).setEnum('composer_type',this.$ReactFeedComposerX4).getURI();new j(x).send();var y=q.getURIBuilder().setString('event','bootload_start').setEnum('composer_type',k.FEEDX).getURI();new j(y).send();};v.prototype.$ReactFeedComposerX11=function(){this.$ReactFeedComposerX8.release();};v.prototype.$ReactFeedComposerX10=function(){this.$ReactFeedComposerX7.value='';this.$ReactFeedComposerX11();};f.exports=v;},null);
__d('ReactComposerEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={CHANGE:'change',ACTIVATE_ATTACHMENT:'composer/activateAttachment/',MENTION_INPUT_FOCUS:'composer/mentionInputFocused/',POST_STARTED:'composer/postStarted/',POST_SUCCEEDED:'composer/postSucceeded/'};f.exports=h;},null);
__d('ReactComposerIDGenerator',['ReactComposerConstants','uniqueID'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={getID:function(){return h.ID_PREFIX+i();},isComposerID:function(k){return !!k&&k.startsWith(h.ID_PREFIX);}};f.exports=j;},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);
__d('SwapButton',['DOM','Event','Focus'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n,o){h.insertAfter(n,m);h.remove(n);o&&j.setWithoutOutline(m);}function l(m,n,o){'use strict';this._swapperButton=m;this._swappeeButton=n;i.listen(m,'click',k.bind(null,n,m,true));if(o)i.listen(n,'click',k.bind(null,m,n,true));}l.prototype.swap=function(m){'use strict';if(this._swapperButton.parentNode)k(this._swappeeButton,this._swapperButton,m);};l.prototype.unswap=function(m){'use strict';if(!this._swapperButton.parentNode)k(this._swapperButton,this._swappeeButton,m);};l.prototype.toggle=function(m){'use strict';if(this._swapperButton.parentNode){this.swap(m);}else this.unswap(m);};l.prototype.getCurrentButton=function(){'use strict';return this._swapperButton.parentNode?this._swapperButton:this._swappeeButton;};Object.assign(l.prototype,{_swapperButton:null,_swappeeButton:null});f.exports=l;},null);
__d('VideoFeedFastPreloadController',['Run','DOMQuery'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=0,k={preload:function(l){if(j<2){l=i.scry(l,'video')[0];if(l instanceof b.HTMLVideoElement){if(!j)h.onBeforeUnload(function(){return k.reset();});l.preload='auto';j+=1;}}},reset:function(){j=0;}};k.reset();f.exports=k;},null);