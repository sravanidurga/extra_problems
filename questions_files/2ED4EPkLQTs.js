/*!CK:3627676562!*//*1448853445,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ebmFt"]); }

__d('MercuryAttachmentMalicious.react',['XUINotice.react','XUIText.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MercuryAttachmentMalicious',render:function(){return (j.createElement(h,{use:'warn'},j.createElement(i,{size:'small'},k._("This attachment has been marked as malicious."))));}});f.exports=l;},null);
__d('loadImage',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=new Image();k.onload=function(){j(k.width,k.height,k);};k.src=i;}f.exports=h;},null);
__d('PhotoResizeMath',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getScaledPhotoDimensions:function(i,j,k,l,m){var n=i/j,o=k/l;if(k&&l&&m==='stretch')return {width:k,height:l};if(!k&&l||m==='contain'!==n>=o)return {width:l*n,height:l};if(k)return {width:k,height:k/n};return {width:i,height:j};}};f.exports=h;},null);
__d('PixelzFocus',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={search:function(i,j){var k=0,l=i.length-1;while(k<=l){var m=k+Math.floor((l-k)/2),n=i[m];if(n>j){l=m-1;}else if(n<j){k=m+1;}else return m;}return Math.min(k,l);},forceSpecificPoint:function(i,j,k){var l=1e-09,m=h.search(i,j-k-l)+1,n=h.search(i,j+k);return i.slice(m,n+1);},findBiggestSets:function(i,j){var k=[],l=-1;for(var m=0;m<i.length;++m){var n=i[m],o=m,p=h.search(i,n+j),q=p-o;if(q>l)k=[];if(q>=l){l=q;k.push({low:o,high:p});}}return k;},getBestSet:function(i,j,k){var l=-1,m=null;for(var n=0;n<j.length;++n){var o=j[n],p=i[o.low],q=i[o.high],r=p+(q-p)/2,s=Math.min(p-(r-k),r+k-q);if(s>l){l=s;m=o;}}return m;},getFocusFromSet:function(i,j){var k=i[j.low],l=i[j.high];return k+(l-k)/2;},clampFocus:function(i,j){var k=j/2,l=1-j/2;if(i<k)return k;if(i>l)return l;return i;},convertFromCenterToCSS:function(i,j){if(Math.abs(1-j)<1e-05)return 0;return (i-j/2)/(1-j);},convertFromCSSToCenter:function(i,j){return i*(1-j)+j/2;},getVisible:function(i,j){if(i<j)return i/j;return j/i;},getHidden:function(i,j){return 1-h.getVisible(i,j);},focusHorizontally:function(i,j){return i<j;},convertVectorFromCenterToCSS:function(i,j,k){var l=h.focusHorizontally(j,k),m;if(l){m=i.x/100;}else m=i.x/100;var n=h.convertFromCenterToCSS(m,h.getVisible(j,k));if(l){return {x:n,y:0};}else return {x:0,y:n};},getCropRect:function(i,j,k){var l=h.focusHorizontally(j,k),m=h.getVisible(j,k);if(l){var n=(1-m)*i.x;return {left:n,top:0,width:m,height:1};}else{var o=(1-m)*i.y;return {left:0,top:o,width:1,height:m};}}};f.exports=h;},null);
__d('Pixelz.react',['arrayContains','cx','loadImage','joinClasses','React','PhotoResizeMath','PixelzFocus'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'Pixelz',propTypes:{width:o.number,height:o.number,resizeMode:o.oneOf(['contain','cover','stretch']),alt:o.string,letterbox:o.bool,borderRadius:o.number,insetBorderColor:o.string,animated:o.bool,upscale:o.bool,cropRect:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(t.left<0||t.top<0||t.width<0||t.height<0||t.left+t.width>1||t.top+t.height>1)return new Error(u);},focus:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(t)){for(var v=0;v<t.length;++v)if(!(t[v].x>=0&&t[v].x<=1)||!(t[v].y>=0&&t[v].y<=1))return new Error(u);}else{if(!t.type)t.type='css';if(!(t.x>=0&&t.x<=1)||!(t.y>=0&&t.y<=1)||!h(['center','css'],t.type))return new Error(u);}}},getDefaultProps:function(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function(){return {srcDimensions:{}};},getSrcDimensions:function(){var q=this.props.src,r=this.state.srcDimensions[q];if(r)return r;j(q,(function(s,t){var u={};u[q]={width:s,height:t};this.isMounted()&&this.setState({srcDimensions:u});}).bind(this));return null;},getCropSrcDimensions:function(){var q=this.getSrcDimensions();return {width:q.width*this.props.cropRect.width,height:q.height*this.props.cropRect.height};},getUpscaleCropDimensions:function(){var q=this.getCropSrcDimensions();return m.getScaledPhotoDimensions(q.width,q.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function(){var q=this.getUpscaleCropDimensions(),r=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(q.width,r.width),height:Math.min(q.height,r.height)};return q;},getCropAspectRatio:function(){var q=this.getCropDimensions();return q.width/q.height;},getContainerDimensions:function(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function(){var q=this.getContainerDimensions();return q.width/q.height;},getContainerPosition:function(){return {left:0,top:0};},getFocus:function(){var q=this.props.focus;if(!Array.isArray(q)&&q.type==='css')return {x:q.x,y:q.y};var r=this.getContainerAspectRatio(),s=this.getCropAspectRatio(),t=n.getVisible(r,s),u=n.focusHorizontally(r,s),v;if(!Array.isArray(q)){v=n.convertFromCenterToCSS(u?q.x:q.y,t);}else{var w=q.map(function(z){return u?z.x:z.y;});w.sort();var x=n.findBiggestSets(w,t),y=n.getBestSet(w,x,t);v=n.getFocusFromSet(w,y);}return {x:u?v:.5,y:u?.5:v};},getCropPosition:function(){var q=this.getCropDimensions(),r=this.getContainerDimensions(),s=this.getFocus();return {left:s.x*(r.width-q.width),top:s.y*(r.height-q.height)};},getScaleDimensions:function(){var q=this.getCropDimensions();return {width:q.width/this.props.cropRect.width,height:q.height/this.props.cropRect.height};},getScalePosition:function(){var q=this.getScaleDimensions();return {left:-q.width*this.props.cropRect.left,top:-q.height*this.props.cropRect.top};},getClipCropRectangle:function(){var q=this.getContainerDimensions(),r=this.getCropDimensions(),s=this.getContainerPosition(),t=this.getCropPosition(),u=Math.max(s.left,t.left),v=Math.max(s.top,t.top),w=Math.min(s.top+q.height,t.top+r.height),x=Math.min(s.left+q.width,t.left+r.width);return {left:u,top:v,width:x-u,height:w-v};},getClipCropPosition:function(){var q=this.getClipCropRectangle();return {left:q.left,top:q.top};},getClipCropDimensions:function(){var q=this.getClipCropRectangle();return {width:q.width,height:q.height};},getClipScalePosition:function(){var q=this.getScalePosition(),r=this.getClipCropPosition(),s=this.getCropPosition();return {left:q.left+(s.left-r.left),top:q.top+(s.top-r.top)};},getClipScaleDimensions:function(){return this.getScaleDimensions();},areDimensionsEqual:function(q,r){return q.width===r.width&&q.height===r.height;},shouldAddAllNodesAndStyles:function(){return this.props.animated;},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return true;var q=this.getContainerDimensions(),r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r)||this.areDimensionsEqual(r,s))return false;return true;},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var q=this.getContainerDimensions(),r=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r))return false;return true;},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function(q,r){if(this.shouldAddAllNodesAndStyles()||r.left)q.left=Math.round(r.left);if(this.shouldAddAllNodesAndStyles()||r.top)q.top=Math.round(r.top);},applyDimensionsStyle:function(q,r){q.width=Math.round(r.width);q.height=Math.round(r.height);},applyBorderRadiusStyle:function(q){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)q.borderRadius=this.props.borderRadius||0;},getScaleStyle:function(){var q={},r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(r,s)){this.applyPositionStyle(q,this.getClipScalePosition());}else this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipScaleDimensions());this.applyBorderRadiusStyle(q);return q;},getCropStyle:function(){var q={};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getInsetBorderStyle:function(){var q={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getContainerStyle:function(){var q={};this.applyDimensionsStyle(q,this.getContainerDimensions());this.applyBorderRadiusStyle(q);return q;},getScale:function(){var q=this.getScaleStyle(),r=q.width,s=q.height;q=babelHelpers._extends({},q);delete q.width;delete q.height;return (l.createElement('img',babelHelpers._extends({},this.props,{alt:this.props.alt,className:k(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),src:this.props.src,style:babelHelpers._extends({},this.props.style||{},q),width:r,height:s})));},getCrop:function(){var q=this.getScale();if(!this.hasCrop())return q;return (l.createElement('div',{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getCropStyle()},q));},getInsetBorder:function(){if(!this.hasInsetBorder())return null;return (l.createElement('div',{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getInsetBorderStyle()}));},getContainer:function(){var q=this.getCrop();if(!this.hasContainer())return q;var r=this.getInsetBorder();return (l.createElement('div',{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getContainerStyle()},q,r));},render:function(){var q=this.getSrcDimensions();if(!q)return l.createElement('span',null);return this.getContainer();}});f.exports=p;},null);
__d('BanzaiScribe',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){return {log:function(l,m,n){var o=[m];if(n!=null)o.push(n);h.post('scribe:'+l,o,k);}};}var j=i({});j.create=i;f.exports=j;},null);
__d('MessagingConst',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={APP_ID:313785040330,XD_MESSAGE:{SANDBOX_READY:'sandbox_ready',SET_CONTENT:'set_content',HTML_SIZE:'html_size',REFRESH_SIZE:'refresh_size'},SHINGLE_SCROLL_TRIGGER:5,EVENTS:{MESSAGE_SENT:'messaging/message_sent'},initConstants:function(i){Object.assign(h,i);}};f.exports=h;},null);
__d('SamplingPolicyBase',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';throw 'Tried to instantiate SamplingPolicyBase';}h.prototype.getName=function(){'use strict';return this.name;};h.prototype.isSampled=function(){'use strict';if(typeof this.sampled=='undefined')this.sampled=this.decideIfSampled();return this.sampled;};f.exports=h;},null);
__d('FbtraceForcedByServerPolicy',['FbtraceForcedByServer','SamplingPolicyBase'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j;function k(){this.name='FbtraceForcedByServerPolicy';}k.get=function(){if(typeof j=='undefined')j=new k();return j;};function l(){return h.forced;}Object.assign(k.prototype,i.prototype,{decideIfSampled:l});f.exports=k;},null);
__d("guardFunction",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){return function(){if(i.apply(k||this,arguments))j.apply(k||this,arguments);};}f.exports=h;},null);
__d('Fbtrace',['Arbiter','BanzaiScribe','ErrorUtils','FbtraceForcedByServer','FbtraceForcedByServerPolicy','Random','SiteData','guardFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';var r='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',s='AAAAAAAAAAA';p=babelHelpers.inherits(t,Error);q=p&&p.prototype;function t(ia){q.constructor.call(this,ia);}function u(ia){j.reportError(new t(ia));}function v(){var ia=function(){var la=0,ma=0,na='';for(var oa=10;oa>=0;oa--){if(la<6){ma=m.uint32();la=32;}if(oa===0)ma=ma&7;na=r.charAt(ma&63)+na;ma>>=6;la-=6;}return na;},ja,ka;for(ja=3;ja>0;ja--){ka=ia();if(ka!=s)return ka;}u('failed to generate valid Fbtrace id');return s;}function w(){Object.assign(this,w);}Object.assign(w,{isOn:function(){return false;},replySend:function(ia,ja){},requestSend:function(ia,ja,ka){ca(ia,ja);return {metadata:function(){return undefined;},replyReceive:function(la){}};}});var x=new w();function y(ia,ja,ka){if(!ia)throw {name:'ArgumentError',message:'no valid service name specified'};if(!ja)throw {name:'ArgumentError',message:'no valid version specified'};var la=i,ma=0,na=v(),oa=v(),pa=ba(na),qa={service:ia,version:ja},ra=function(wa){if(typeof wa=='undefined')return 'undefined';if(typeof wa!='string')wa=ra(JSON.stringify(wa));return wa;},sa=function(wa){var xa='';for(var ya in wa){if(xa.length>0)xa+='\x02';xa+=ra(ya)+'\x03'+ra(wa[ya]);}return xa;},ta=function(wa,xa,event,ya,za){ma++;return [za,ma,na,wa,xa,ra(event),sa(ya)].join('\x01');},ua=function(wa,xa,event,ya,za){if(!za&&typeof za=='undefined')za=Date.now()*1000;var ab=ta(wa,xa,event,ya,za);la.log('fbtrace',ab,pa);},va=function(){return oa;};ua(s,oa,'#rqrecv',Object.assign(ka||{},qa));Object.assign(this,y,{replySend:function(wa,xa){xa=babelHelpers._extends({},xa,qa,{success:wa?'true':'false'});ua(s,oa,'#rpsend',xa);},requestSend:function(wa,xa,ya){ca(wa,xa);var za=va(),ab=v();ya=babelHelpers._extends({},ya,qa,{op:wa,'remote:service':xa});ua(za,ab,'#rqsend',ya);return {metadata:function(){return na+ab;},replyReceive:function(bb){ua(za,ab,'#rprecv',Object.assign(bb||{},qa));},parentNode:this};}});}Object.assign(y,{isOn:function(){return true;}});function z(){return x;}function aa(ia,ja,ka){ka=ka||{};ka.init=true;var la=l.get();if(la.isSampled()){return new y(ia,ja,ka);}else return new w();}function ba(ia){var ja=ia.charAt(ia.length-1);return r.indexOf(ja)%32;}function ca(ia,ja){if(!ia)throw {name:'ArgumentError',message:'no valid operation specified'};if(!ja)throw {name:'ArgumentError',message:'no valid remote:service specified'};}function da(ia,ja){var ka=x,la;x=ia;try{la=ja();}finally{x=ka;}return la;}var ea=function(ia,ja){var ka=z(),la=ja.request,ma=false;if(!ka.isOn()&&k.forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(la.uri.toString())){ka=aa('photo_upload_kludge',String(n.revision||'dev'),{policy:'PhotoUpload'});ma=true;}if(ka.isOn()){var na=ma?{policy:'PhotoUpload'}:{};if(la.userActionId)na.user_action_id=la.userActionId;var oa=ka.requestSend(la.uri.toString(),'www',na);la.fbtraceRemoteNode=oa;la.transport.setRequestHeader('X-Fbtrace-Meta',oa.metadata());}},fa=function(ia,ja){ja.request.fbtraceRemoteNode.replyReceive({is_last:ja.response.is_last,success:true});setTimeout(function(){ja.request.fbtraceRemoteNode.parentNode.replySend(true,{});},0);},ga=function(ia,ja){ja.request.fbtraceRemoteNode.replyReceive({is_last:ja.response.is_last,success:false,error_code:ja.response.error,error_summary:ja.response.errorSummary,error_description:ja.response.errorDescription});setTimeout(function(){ja.request.fbtraceRemoteNode.parentNode.replySend(false,{});},0);},ha=function(ia,ja){return ja.request.fbtraceRemoteNode;};h.subscribe('AsyncRequest/will_send',ea);h.subscribe('AsyncRequest/response',o(ha,fa));h.subscribe('AsyncRequest/error',o(ha,ga));f.exports={defaultNode:z,requestReceive:aa,withDefaultNode:da};},null);
__d('FileFormResetOnSubmit',['DOMQuery','Event','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o=i.listen(m,'change',j.thatReturnsFalse,i.Priority.URGENT);try{n();}catch(p){throw p;}finally{o.remove();}}function l(m){'use strict';this._form=m;}l.prototype.enable=function(){'use strict';var m=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(m,0);});};l.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};l.prototype._reset=function(){'use strict';var m=this._form.getRoot();k(m,function(){var n=h.scry(m,'input[type="file"]');n.forEach(function(o){o.value='';});});};f.exports=l;},null);
__d('Token',['CSS','DataStore','DOM','Locale','UnicodeBidi','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p){'use strict';this.info=o;this.paramName=p;}n.prototype.getInfo=function(){'use strict';return this.info;};n.prototype.getText=function(){'use strict';return this.info.text;};n.prototype.getValue=function(){'use strict';return this.info.uid;};n.prototype.isFreeform=function(){'use strict';return !!this.info.freeform;};n.prototype.setSelected=function(o){'use strict';h.conditionClass(this.getElement(),'uiTokenSelected',o);return this;};n.prototype.getElement=function(){'use strict';if(!this.element)this.setElement(this.createElement());return this.element;};n.prototype.setElement=function(o){'use strict';i.set(o,'Token',this);this.element=o;return this;};n.prototype.isRemovable=function(){'use strict';return h.hasClass(this.element,'removable');};n.prototype.getTextDirection=function(){'use strict';var o=l.isDirectionRTL(this.getText()),p=k.isRTL();if(o&&!p)return 'rtl';if(!o&&p)return 'ltr';return null;};n.prototype.createElement=function(o,p){'use strict';var q=this.paramName,r=this.getValue(),s=this.getText(),t=j.create('span',{className:'uiTokenText'},s),u=j.create('a',{href:'#','aria-label':m._("Remove {item}",[m.param('item',s)]),className:'remove uiCloseButton uiCloseButtonSmall'});if(o)h.addClass(u,'uiCloseButtonSmallGray');var v=j.create('input',{type:'hidden',value:r,name:q+'[]',autocomplete:'off'}),w=j.create('input',{type:'hidden',value:s,name:'text_'+q+'[]',autocomplete:'off'}),x={className:'removable uiToken'},y=this.getTextDirection();if(y!==null)x.dir=y;var z=j.create('span',x,[t,v,w,u]);if(o)h.addClass(z,'uiTokenGray');if(p){var aa=j.create('i',{className:p});j.prependContent(z,aa);}return z;};f.exports=n;},null);
__d('WeakToken',['CSS','Token'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,i);k=j&&j.prototype;l.prototype.createElement=function(){'use strict';var m=k.createElement.call(this,true,'UFIWeakReferenceIcon');h.addClass(m,'uiTokenWeakReference');return m;};function l(){'use strict';j.apply(this,arguments);}f.exports=l;},null);
__d('Tokenizer',['Arbiter','ArbiterMixin','CSS','DataStore','DOM','DOMQuery','Event','Focus','Input','Keys','Parent','StickyPlaceholderInput','Style','TextMetrics','Token','UserAgent_DEPRECATED','WeakToken','createObjectFrom','emptyFunction','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba,ca,da=20;ba=babelHelpers.inherits(ea,aa(i));ca=ba&&ba.prototype;function ea(fa,ga,ha){'use strict';ca.constructor.call(this);this.element=fa;this.typeahead=ga;this.input=ga.getCore().getElement();if(ha)this.init(ha.tokenarea,ha.param_name,ha.initial_info,ha.options);k.set(this.element,'Tokenizer',this);}ea.prototype.init=function(fa,ga,ha,ia){'use strict';this._handleEvents=this.handleEvents.bind(this);this.init=z;this.setTokenarea(fa);this.paramName=ga;if(!this.placeholder)this.placeholder=this.input.getAttribute('data-placeholder')||this.input.getAttribute('placeholder')||'';Object.assign(this,ia);this.initEvents();this.initTypeahead();this.reset(ha);this.initBehaviors();setTimeout(this.adjustWidth.bind(this),0);h.inform('Tokenizer/init',this,h.BEHAVIOR_PERSISTENT);this.inform('init',{tokens:this.getTokens()});};ea.prototype.reset=function(fa){'use strict';this.tokens=[];this.unique={};if(fa){this.populate(fa);}else l.empty(this.tokenarea);this.updateTokenarea();};ea.prototype.populate=function(fa){'use strict';var ga=[];this.tokens=this.getTokenElements().map(function(ha,ia){var ja=fa[ia];ga.push(this._tokenKey(ja));return this.createToken(ja,ha);},this);this.unique=y(ga,this.tokens);};ea.prototype.setTokenarea=function(fa){'use strict';var ga=!this.tokenarea;if(fa!==this.tokenarea){if(this.tokenarea){l.remove(this.tokenarea);for(var ha in this._tokenareaListeners)this._tokenareaListeners[ha].remove();}this._tokenareaListeners=n.listen(fa,{click:this._handleEvents,keydown:this._handleEvents});this.tokenarea=fa;}if(!ga)this.reset();};ea.prototype.getElement=function(){'use strict';return this.element;};ea.prototype.getTypeahead=function(){'use strict';return this.typeahead;};ea.prototype.getInput=function(){'use strict';return this.input;};ea.prototype.initBehaviors=function(){'use strict';this.behaviors=this.behaviors||[];if(this.behaviors instanceof Array){this.behaviors.forEach((function(ha){ha.behavior(this,ha.config);}).bind(this));}else for(var fa in this.behaviors||{}){var ga=window.TokenizerBehaviors&&window.TokenizerBehaviors[fa];ga.call(null,this,this.behaviors[fa]);}};ea.prototype.initTypeahead=function(){'use strict';var fa=this.typeahead.getCore();fa.resetOnSelect=true;fa.setValueOnSelect=false;fa.preventFocusChangeOnTab=true;if(this.inline){var ga=this.typeahead.getView();j.addClass(ga.getElement(),'uiInlineTokenizerView');}this.typeahead.subscribe('select',(function(ha,ia){return this.handleSelect(ia);}).bind(this));this.typeahead.subscribe('blur',this.handleBlur.bind(this));};ea.prototype.handleBlur=function(event){'use strict';this.inform('blur',{event:event});this.updatePlaceholder();};ea.prototype.handleSelect=function(fa){'use strict';var ga=fa.selected;if('uid' in ga){this.updateInput();this.addToken(this.createToken(ga));}};ea.prototype.initEvents=function(){'use strict';var fa=w.firefox()<4?'keypress':'keydown';n.listen(this.input,'paste',this.paste.bind(this));n.listen(this.input,fa,this.keydown.bind(this));};ea.prototype.handleEvents=function(event){'use strict';var fa=event.getTarget(),ga=fa&&this.getTokenElementFromTarget(fa);if(!ga)return;if(event.type!='keydown'||n.getKeyCode(event)==q.RETURN)this.processEvents(event,fa,ga);};ea.prototype.processEvents=function(event,fa,ga){'use strict';if(r.byClass(fa,'remove')){var ha=ga.nextSibling;ha=ha&&m.scry(ga.nextSibling,'.remove')[0];var ia=this.getTokenFromElement(ga);ia=this.addTokenData(ia,fa);this.removeToken(ia);this.focusOnTokenRemoval(event,ha);event.kill();}};ea.prototype.focusOnTokenRemoval=function(event,fa){'use strict';o.set(event.type=='keydown'&&fa||this.input);};ea.prototype.addTokenData=function(fa,ga){'use strict';return fa;};ea.prototype.keydown=function(event){'use strict';this.inform('keydown',{event:event});var fa=n.getKeyCode(event),ga=this.input;if(this.inline&&fa==q.BACKSPACE&&p.isEmpty(ga)){var ha=this.getLastToken();if(ha&&ha.isRemovable())this.removeToken(ha);}this.updateInput();};ea.prototype.paste=function(event){'use strict';this.inform('paste',{event:event});this.updateInput(true);};ea.prototype.focusInput=function(){'use strict';o.set(this.input);};ea.prototype.updateInput=function(fa){'use strict';if(!this.inline)return;setTimeout((function(){this.adjustWidth(this.input.value);if(fa)this.input.value=this.input.value;}).bind(this),20);s.setPlaceholderText(this.input,'');this.inform('resize');};ea.prototype.setPlaceholder=function(fa){'use strict';this.placeholder=fa;if(this.stickyPlaceholder)s.setPlaceholderText(this.input,fa);this.updatePlaceholder();};ea.prototype.updatePlaceholder=function(){'use strict';if(!this.inline||this.input.value)return;var fa=!this.tokens.length,ga='';if(fa||this.stickyPlaceholder){this.adjustWidth(this.placeholder);ga=this.placeholder;}else this.adjustWidth(this.input.value);s.setPlaceholderText(this.input,ga);};ea.prototype.adjustWidth=function(fa){'use strict';if(!this.inline||!this._getIsInDOM())return;if(!fa&&this.input.value==='')fa=this.placeholder;var ga=da;if(fa!==this.placeholder||!this.getTokens().length||this.stickyPlaceholder){var ha=t.getFloat(this.getElement(),'width'),ia=this._getMetrics().measure(fa);ga=ia.width+this._getWidthOffset()+10;ga=ga>=ha?ha:ga;}t.set(this.input,'width',ga+'px');this.inform('resize');h.inform('reflow');};ea.prototype.getToken=function(fa){'use strict';return this.unique[fa]||null;};ea.prototype.getTokens=function(){'use strict';return this.tokens||[];};ea.prototype.getTokenElements=function(){'use strict';return m.scry(this.tokenarea,'span.uiToken');};ea.prototype.getTokenElementFromTarget=function(fa){'use strict';return r.byClass(fa,'uiToken');};ea.prototype.getTokenFromElement=function(fa){'use strict';return k.get(fa,'Token');};ea.prototype.getTokenValues=function(){'use strict';if(!this.tokens)return [];return this.tokens.map(function(fa){return fa.getValue();});};ea.prototype.getFirstToken=function(){'use strict';return this.tokens[0]||null;};ea.prototype.getLastToken=function(){'use strict';return this.tokens[this.tokens.length-1]||null;};ea.prototype.hasMaxTokens=function(){'use strict';return this.maxTokens&&this.maxTokens<=this.tokens.length;};ea.prototype.createToken=function(fa,ga){'use strict';var ha=this.getToken(this._tokenKey(fa));if(!ha)ha=fa.weak_reference?new x(fa,this.paramName):new v(fa,this.paramName);ga&&ha.setElement(ga);return ha;};ea.prototype.addToken=function(fa){'use strict';if(this.hasMaxTokens())return;var ga=this._tokenKey(fa.getInfo());if(ga in this.unique)return;this.unique[ga]=fa;this.tokens.push(fa);this.insertToken(fa);this.updateTokenarea();this.inform('addToken',fa);this.inform('changeTokens');h.inform('Form/change',{node:this.element});};ea.prototype.insertToken=function(fa){'use strict';l.appendContent(this.tokenarea,fa.getElement());};ea.prototype.removeToken=function(fa){'use strict';if(!fa)return;var ga=this.tokens.indexOf(fa);if(ga<0)return;this.tokens.splice(this.tokens.indexOf(fa),1);delete this.unique[this._tokenKey(fa.getInfo())];l.remove(fa.getElement());this.updateTokenarea();this.inform('removeToken',fa);this.inform('changeTokens');h.inform('Form/change',{node:this.element});};ea.prototype.removeAllTokens=function(){'use strict';this.reset();this.inform('changeTokens');this.inform('removeAllTokens');};ea.prototype.updateTokenarea=function(){'use strict';var fa=this.typeahead.getCore(),ga=this.getTokenValues();if(this.excludeDuplicates){this._exclusions||(this._exclusions=fa.getExclusions());fa.setExclusions(ga.concat(this._exclusions));}fa.setEnabled(!this.hasMaxTokens());this.updateTokenareaVisibility();this.updatePlaceholder();this.inform('resize');h.inform('reflow');};ea.prototype.updateTokenareaVisibility=function(){'use strict';j.conditionShow(this.tokenarea,this.tokens.length!==0);};ea.prototype._tokenKey=function(fa){'use strict';return fa.uid+(fa.freeform?':':'');};ea.prototype._getWidthOffset=function(){'use strict';if(this._widthOffset===null){var fa=this.input.clientWidth,ga=t.getFloat(this.input,'width');if(fa==ga){this._widthOffset=t.getFloat(this.input,'paddingLeft')+t.getFloat(this.input,'paddingRight');}else this._widthOffset=0;}return this._widthOffset;};ea.prototype._getMetrics=function(){'use strict';if(!this._metrics)this._metrics=new u(this.input,this.inline);return this._metrics;};ea.prototype._getIsInDOM=function(){'use strict';return this._isInDOM||(this._isInDOM=m.contains(document.body,this.input));};ea.getInstance=function(fa){'use strict';var ga=r.byClass(fa,'uiTokenizer');return ga?k.get(ga,'Tokenizer'):null;};ea.init=function(fa,ga){'use strict';fa.init(ga.tokenarea,ga.param_name,ga.initial_info,ga.options);};Object.assign(ea.prototype,{inline:false,maxTokens:null,excludeDuplicates:true,placeholder:'',_widthOffset:null,_metrics:null});f.exports=ea;},null);
__d('StickerSearch',['StickerServerRequests'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i,j={},k={requestStickersForQuery:function(l,m,n){i=l;h.getStickersForQuery(l,m,function(o){return i===l&&n(o.payload);});},getTagByName:function(l){return j[l];},getTagsIndex:function(){return j;}};f.exports=k;},null);
__d('FormSubmitOnChange',['Event','submitForm'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._form=k;}j.prototype.enable=function(){'use strict';this._listener=h.listen(this._form.getRoot(),'change',this._submit.bind(this));};j.prototype.disable=function(){'use strict';this._listener.remove();this._listener=null;};j.prototype._submit=function(){'use strict';i(this._form.getRoot());};Object.assign(j.prototype,{_listener:null});f.exports=j;},null);
__d('VaultBoxURI',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(j){var k=new RegExp("\/"+i.PHOTOS_SYNCED+"\/?$");return j.getPath().match(k)&&j.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(j){var k=new RegExp("\/"+i.PHOTOS_SYNCED+"\/?$");return j.getPath().match(k);},getSyncedTabURI:function(){return new h('/me/'+i.PHOTOS_SYNCED).getQualifiedURI();}};f.exports=i;},null);