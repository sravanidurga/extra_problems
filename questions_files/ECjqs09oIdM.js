/*!CK:3521892538!*//*1446495321,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["VJ1sp"]); }

__d('UFIAddCommentController',['Parent','React','ReactDOM','ShortProfiles','UFIActionTypes','UFIAddComment.react','UFICallbackStore','UFICentralUpdates','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackTargets','UFIInstanceState','UFINewCommentNotifier'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();function u(v,w,x){if(!x)x=arguments[3];this._root=v;this._id=w;this._ufiInstanceID=x.instanceid;this._contextArgs=x;if(!this._contextArgs.rootid)this._contextArgs.rootid=v.id;this._contextArgs.ftentidentifier=w;this._dispatcher=new p();this._stores={UFICallbackStore:new n(this._dispatcher)};this._stores.UFICallbackStore.on(l.ADD_COMMENT.SUBMIT_NEW,(function(y){return t.onNewComment(this._id,this._ufiInstanceID,h.byTag(v,'form'),this._contextArgs,y.comment,y.target,y.replyCommentID,y.timestamp);}).bind(this));this.render();o.subscribe('instance-updated',(function(y,z){var aa=z.updates;if(this._ufiInstanceID in aa)this.render();}).bind(this));o.subscribe('feedback-updated',(function(y,z){var aa=z.updates;if(this._id in aa)this.render();}).bind(this));o.subscribe('feedback-id-changed',(function(y,z){var aa=z.updates;if(this._id in aa)this._id=aa[this._id];}).bind(this));}Object.assign(u.prototype,{render:function(){var v=this._contextArgs,w=s.getKeyForInstance(this._ufiInstanceID,'isediting');r.getFeedbackTarget(this._id,(function(x){if(x.cancomment&&x.actorforpost)k.get(x.actorforpost,(function(y){var z=i.createElement(q,{dispatcher:this._dispatcher,stores:this._stores},i.createElement(m,{viewerActorID:y.id,hide:w,replyCommentID:null,targetID:x.ownerid,initialData:null,ref:null,withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:x.mentionsdatasource,showSendOnEnterTip:x.showsendonentertip,allowPhotoAttachments:x.allowphotoattachments&&!v.isstreaming,allowStickerAttachments:x.allowstickerattachments&&!v.isstreaming,source:v.source,contextArgs:v,subtitle:x.subtitle,isQAndA:x.isqanda,isSnowlift:v.issnowlift}));j.render(z,this._root);}).bind(this));}).bind(this));}});f.exports=u;},null);